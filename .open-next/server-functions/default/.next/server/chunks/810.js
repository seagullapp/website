exports.id=810,exports.ids=[810],exports.modules={42086:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"40ed1cbe531db32df21e69b2241e1a47df2d5f99e5":()=>n,"6051f5aa824f8636b5d8da13f41f6f600771dc420d":()=>o,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6":()=>a.q});var a=t(90559),r=t(21590);t(70376);var l=t(13362),i=t(99344);async function n(e){if(!e)return{success:!1,msg:"Invalid data",status:400};if(e.length>60)return{success:!1,msg:"You're editing too much in one go",status:400};e.forEach((e,s)=>e.value&&("label"===e.type||"service"===e.type||"skill"===e.type)?e.value.length<1?{success:!1,msg:`Tag ${e.value} is too short`,status:400}:e.value.length>25?{success:!1,msg:`Tag ${e.value} is too long`,status:400}:void 0:{success:!1,msg:"Invalid data",status:400});let s=Array.from(new Set(e.filter(e=>"label"===e.type))),t=Array.from(new Set(e.filter(e=>"service"===e.type))),r=Array.from(new Set(e.filter(e=>"skill"===e.type)));if(s.length>5)return{success:!1,msg:"Too many labels. Please remove some",status:400};if(t.length>15)return{success:!1,msg:"Too many service tags. Please remove some",status:400};if(r.length>40)return{success:!1,msg:"Too many skill tags. Please remove some",status:400};let i=[...s,...t,...r],n=new Set;for(let e of i){if(n.has(e.value))return{success:!1,msg:"Duplicate tags found",status:403};n.add(e.value)}let o=await (0,a.q)();if(!o||!o.user||!o.session)return{success:!1,msg:"Sorry, you're not authenticated",status:403};try{let s=[o.user.id],t=await (0,l.P)("DELETE FROM user_tags WHERE user_id = $1",s);if(!t)throw"A database error occurred when deleting previous tags";if(o.user.tags.length>0&&(!t.rowCount||t.rowCount<=0))return{success:!1,msg:"We could not delete previous tags",status:500};let a=new Date;for(let s=0;s<=e.length-1;s++){let t=[o.user.id,a,e[s].type,e[s].value,s],r=await (0,l.P)(`
                INSERT INTO user_tags (user_id, created_at, type, value, tag_order)
                VALUES ($1, $2, $3, $4, $5)
                ON CONFLICT (user_id, type, value) DO NOTHING
            `,t);if(!r)throw`A database error occurred when inserting ${e[s].value}`;if(!r.rowCount)return{success:!1,msg:`Could not insert ${e[s].value}`,status:500}}return{success:!0,msg:"Successfully updated tags",status:200}}catch(e){return{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:505}}}async function o(e,s){if(!e||e.length>500)return{success:!1,msg:"Invalid text",status:400};let t=await (0,a.q)();if(!t||!t.user||!t.session)return{success:!1,msg:"Sorry, you're not authenticated",status:403};if(e==s||e==t.user.about)return{success:!1,msg:"Please enter a different about text",status:400};try{let s=[e,t.user.id],a=await (0,l.P)(`
            UPDATE users
            SET about = $1
            WHERE id = $2    
        `,s);if(!a)throw"A database error occurred";if(0===a.rowCount)return{success:!1,msg:"User about information could not be updated",status:500};return{success:!0,msg:"User about information updated successfully",status:200,data:e}}catch(e){return{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:505}}}(0,i.D)([n]),(0,r.A)(n,"40ed1cbe531db32df21e69b2241e1a47df2d5f99e5",null),(0,i.D)([o]),(0,r.A)(o,"6051f5aa824f8636b5d8da13f41f6f600771dc420d",null)},56885:(e,s,t)=>{Promise.resolve().then(t.bind(t,38083)),Promise.resolve().then(t.bind(t,34390))},47157:(e,s,t)=>{Promise.resolve().then(t.bind(t,54653)),Promise.resolve().then(t.bind(t,86114))},54653:(e,s,t)=>{"use strict";t.d(s,{default:()=>A});var a=t(45512),r=t(58009),l=t.n(r),i=t(81317),n=t.n(i);function o({children:e,className:s,...t}){return(0,a.jsxs)("button",{className:`my-[2px] ${n().button} ${s}`,...t,children:["+ ",e]})}var c=t(23924),u=t(86987),d=t(49850);function m({ogTags:e,className:s,tags:t,setTags:i,type:n,editedTags:o,setEditedTags:c,editMode:m,setEditMode:g}){let[f,x]=(0,r.useState)(),[h,v]=(0,r.useState)("");if(e.length)return(0,a.jsxs)("div",{className:`flex flex-wrap gap-2 mt-2 ${s}`,children:[m?t.map((s,r)=>(0,a.jsx)("div",{onClick:()=>{i(t.filter((e,s)=>s!==r))},style:{zIndex:"5"},children:(0,a.jsxs)(u.A,{className:`deletable ${o.includes(s?.id)&&s?.value!==e[r]?.value&&"dashed"}`,children:[" ",s?.value," "]})},s?.id)):t.map((s,r)=>f===s.id?(0,a.jsxs)(l().Fragment,{children:[(0,a.jsx)("div",{className:"overlay",onClick:()=>x(null),children:" "}),(0,a.jsx)("div",{style:{zIndex:"5"},onClick:()=>x(s.id),children:(0,a.jsx)("input",{style:{zIndex:"5"},value:t[r].value,placeholder:t[r].value,onChange:t=>{var a;return a=s.id,void i(s=>{let l=[...s];return l[r]={...s[r],value:t.target.value},s!==l&&s[r]!==e[r]&&c(Array.from(new Set([...o,a]))),l})},className:`Tag ${o.includes(s.id)&&s?.value!==e[r]?.value&&"dashed"} text-center
                                ${t[r].value} 
                                ${t[r]?.value.toLowerCase()}
                                ${t[r]?.value.toLowerCase().replaceAll("."," ")}
                                ${t[r]?.value.toLowerCase().replaceAll("-"," ")}
                                ${t[r]?.value.toLowerCase().replaceAll("_"," ")}
                            `})})]},s.id):(0,a.jsx)("div",{onClick:()=>x(s?.id),style:{zIndex:"5"},children:(0,a.jsxs)(u.A,{className:`editable ${o.includes(s?.id)&&s?.value!==e[r]?.value&&"dashed"}`,children:[" ",s?.value," "]})},s?.id)),m&&(0,a.jsxs)("form",{children:[(0,a.jsx)("div",{className:"overlay",style:{zIndex:"4"},onClick:()=>{v(""),g(null)}}),(0,a.jsxs)("div",{className:"relative",style:{zIndex:"5"},children:[(0,a.jsx)("input",{type:"text",placeholder:"New tag",value:h,onChange:e=>v(e.target.value),className:`
                        Tag dashed ${h.length<=0&&"green bg-[rgba(0,255,0,0.1)_!important]"} 
                        ${h} ${h.toLowerCase()}
                        ${h.replaceAll("."," ")}
                        ${h.replaceAll("-"," ")}
                        ${h.replaceAll("_"," ")}
                        ${h.toLowerCase().replaceAll("."," ")}
                        ${h.toLowerCase().replaceAll("-"," ")}
                        ${h.toLowerCase().replaceAll("_"," ")}
                    `}),(0,a.jsx)("button",{onClick:function(e){e.preventDefault();let s=Math.floor(101*Math.random())+100;i([...t,{id:s,createdAt:new Date,tagOrder:100,verified:!1,link:null,userId:1,type:n||t[t.length-1].type,value:h.trim()}]),v(""),c([...o,s])},className:"button green rounded absolute top-[-13%] right-[-10%] text-sm",disabled:h.trim().length<=0,children:h.trim().length<=0?(0,a.jsx)(d.OiG,{}):(0,a.jsx)(d.CMH,{})})]})]})]})}var g=t(6341),f=t.n(g);function x({about:e,setAbout:s,editMode:t,onRevert:r,onSubmit:i}){return(0,a.jsx)(a.Fragment,{children:e&&e.length>0?(0,a.jsx)("div",{children:t?(0,a.jsxs)("form",{className:"flex flex-col",onSubmit:i,children:[(0,a.jsx)("textarea",{name:"about",value:e,onChange:e=>s(e.target.value),rows:e.split("\n").length+5}),(0,a.jsxs)("div",{className:"flex items-center justify-center mt-2 ",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"button grey flex-grow",children:" Revert "}),(0,a.jsx)("button",{type:"submit",className:"button red flex-grow ml-2",children:" Ok "})]})]}):(0,a.jsx)(a.Fragment,{children:e.split("\n").map((e,s)=>(0,a.jsxs)(l().Fragment,{children:[e.trim()," ",(0,a.jsx)("br",{})]},s))})}):(0,a.jsx)(o,{children:" Add About "})})}var h=t(28531),v=t.n(h),p=t(88864),b=t(64398);function j({setShow:e}){return(0,a.jsx)(b.A,{setShow:e,title:"First Label tag",children:(0,a.jsxs)("form",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"title",className:"font-semibold mb-1",children:"Label Tag"}),(0,a.jsx)("input",{name:"title",type:"text",placeholder:"Designer"})]})})}function w({user:e,editMode:s,setEditMode:t,canceled:l,tagLabels:i,setTagLabels:n,tagServices:u,setTagServices:g,tagSkills:h,setTagSkills:b,editedLabelTags:w,setEditedLabelTags:y,newLabelTags:$,setNewLabelTags:N,editedServiceTags:_,setEditedServiceTags:T,newServiceTags:S,setNewServiceTags:A,editedSkillTags:C,setEditedSkillTags:E,newSkillTags:k,setNewSkillTags:L,about:P,setAbout:M}){let[D,I]=(0,r.useState)(),[O,R]=(0,r.useState)(!1),[U,F]=(0,r.useState)(!1),[W,z]=(0,r.useState)(!1),[H,q]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:`widget ${s?"dashed":""} rounded items-center gap-3 ${f().userWidget}`,children:[!1!==U&&(0,a.jsx)(j,{setShow:F}),(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,a.jsx)(p.A,{size:110,avatar:e.avatar,avatar_url:e.avatar_url}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow",children:[(0,a.jsx)(v(),{href:`/user/${e.slug}/`,children:(0,a.jsxs)("h1",{className:"capitalize text-[20px] hover:underline",children:[" ",e.firstName," ",e.lastName," "]})}),(0,a.jsx)(c.A,{user:e}),i.length>1?(0,a.jsxs)("div",{className:"gap-1 flex justify-between items-center",children:[(0,a.jsx)(m,{className:"mt-1",ogTags:i,tags:$,setTags:N,type:"label",editedTags:w,setEditedTags:y,editMode:"label"==D,setEditMode:I}),(0,a.jsxs)("button",{onClick:()=>I("label"===D?null:"label"),className:"cursor-pointer text-sm grey hover:text-white",children:[" ",(0,a.jsx)(d.cLm,{})," "]})]}):(0,a.jsx)(o,{onClick:()=>F(!0),children:" Add Labels "})]})]}),(0,a.jsxs)("span",{className:"flex items-center justify-between gap-2 mb-1 mt-3",children:[(0,a.jsx)("h3",{className:"subtitle grey",children:" Services "}),u.length>0&&(0,a.jsxs)("button",{onClick:()=>I("service"===D?null:"service"),className:"cursor-pointer text-sm grey hover:text-white",children:[" ",(0,a.jsx)(d.cLm,{})," "]})]}),u.length>0?(0,a.jsx)(m,{className:"mt-1",ogTags:u,tags:S,setTags:A,type:"service",editedTags:_,setEditedTags:T,editMode:"service"==D,setEditMode:I}):(0,a.jsx)(o,{children:" Add Services "}),(0,a.jsxs)("span",{className:"flex items-center justify-between gap-2 mb-1 mt-3",children:[(0,a.jsx)("h3",{className:"subtitle grey",children:" Skills "}),u.length>0&&(0,a.jsxs)("button",{onClick:()=>I("skill"===D?null:"skill"),className:"cursor-pointer text-sm grey hover:text-white",children:[" ",(0,a.jsx)(d.cLm,{})," "]})]}),h.length>0?(0,a.jsx)(m,{className:"mt-1",ogTags:h,tags:k,setTags:L,type:"skill",editedTags:C,setEditedTags:E,editMode:"skill"==D,setEditMode:I}):(0,a.jsx)(o,{children:" Add Skills "}),(0,a.jsxs)("span",{className:"flex items-center justify-between gap-2 mb-1 mt-3",children:[(0,a.jsx)("h3",{className:"subtitle grey",children:" About "}),P&&P.length>0&&(0,a.jsxs)("button",{onClick:()=>I("about"===D?null:"about"),className:"cursor-pointer text-sm grey hover:text-white",children:[" ",(0,a.jsx)(d.F7,{})," "]})]}),(0,a.jsx)(x,{about:P,setAbout:M,editMode:"about"===D,onSubmit:()=>{P!==e.about&&t(!0),I(null)},onRevert:()=>{M(e.about),I(null)}})]})}var y=t(26248);let $=(0,y.createServerReference)("40ed1cbe531db32df21e69b2241e1a47df2d5f99e5",y.callServer,void 0,y.findSourceMapURL,"default"),N=(0,y.createServerReference)("6051f5aa824f8636b5d8da13f41f6f600771dc420d",y.callServer,void 0,y.findSourceMapURL,"default");var _=t(92273),T=t(30115),S=t(50520);function A(){let e=(0,_.d4)(e=>e.user),s=(0,_.d4)(e=>e.ui),t=(0,_.wA)(),[l,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(e.tags.filter(e=>"label"===e.type)),[d,m]=(0,r.useState)(e.tags?.filter(e=>"service"===e.type)),[g,x]=(0,r.useState)(e.tags.filter(e=>"skill"===e.type)),[h,v]=(0,r.useState)([]),[p,b]=(0,r.useState)(c),[j,y]=(0,r.useState)([]),[A,C]=(0,r.useState)(d),[E,k]=(0,r.useState)([]),[L,P]=(0,r.useState)(g),[M,D]=(0,r.useState)(e.about),[I,O]=(0,r.useState)({isError:!1,msg:""});async function R(){if(s.loading){O({isError:!0,msg:"Please wait, loading"});return}t((0,T.vL)()),(p!==c||A!==d||L!==g)&&await U(),M!==e.about&&await F(),t((0,T.xv)())}async function U(){if(O({isError:!1,msg:""}),p===c&&A===d&&L===g){O({isError:!0,msg:"Nothing changed"});return}if(p.length>5){O({isError:!0,msg:"Too many label tags. Please remove some"});return}if(A.length>15){O({isError:!0,msg:"Too many service tags. Please remove some"});return}if(L.length>40){O({isError:!0,msg:"Too many skill tags. Please remove some"});return}let e=e=>e.some(s=>s.value&&("label"===s.type||"service"===s.type||"skill"===s.type)?s.value.length<1?(O({isError:!0,msg:`Tag ${s.value} is too short`}),!0):s.value.length>25?(O({isError:!0,msg:`Tag ${s.value} is too long`}),!0):e.filter(e=>s.value.toLowerCase()===e.value.toLowerCase()&&s.id!==e.id).length>0&&(O({isError:!0,msg:`${s.value} is repeated multiple times`}),!0):(O({isError:!0,msg:"Invalid data"}),!0));if(e(p)||e(A)||e(L))return;let s=await $([...p,...A,...L]);if(console.log(s),!s.success){O({isError:!0,msg:s.msg});return}t((0,S.TK)({tags:[...p.map(e=>({...e,createdAt:""})),...A.map(e=>({...e,createdAt:""})),...L.map(e=>({...e,createdAt:""}))]}))}async function F(){if(O({isError:!1,msg:""}),M===e.about)return;let s=await N(M,e.about);if(!s.success){O({isError:!0,msg:s.msg});return}t((0,S.TK)({about:M}))}return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("header",{className:`container ${f().container} relative`,children:[I.isError&&(0,a.jsxs)("div",{className:"widget red mb-4",children:[(0,a.jsx)("p",{className:"text-primary-red text-lg font-semibold",children:"An error occurred"}),(0,a.jsxs)("p",{className:"text-white",children:[" ",I.msg," "]})]}),l&&(0,a.jsxs)("div",{className:"mb-4 widget yellow dashed flex justify-between items-center",children:[(0,a.jsx)("p",{className:"flex-grow",children:" You have unsaved changes! "}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"mr-2 text-primary-yellow",onClick:()=>{o(!0),i(!1)},children:" cancel "}),(0,a.jsx)("button",{className:"button yellow",onClick:R,children:"Save"})]})]}),(0,a.jsx)("div",{className:"grid md:grid-cols-[35%_65%]",children:(0,a.jsx)("div",{children:(0,a.jsx)(w,{user:e,editMode:l,setEditMode:i,canceled:n,tagLabels:c,setTagLabels:u,tagServices:d,setTagServices:m,tagSkills:g,setTagSkills:x,editedLabelTags:h,setEditedLabelTags:v,newLabelTags:p,setNewLabelTags:b,editedServiceTags:j,setEditedServiceTags:y,newServiceTags:A,setNewServiceTags:C,editedSkillTags:E,setEditedSkillTags:k,newSkillTags:L,setNewSkillTags:P,about:M,setAbout:D})})})]})})}},86114:(e,s,t)=>{"use strict";t.d(s,{default:()=>u});var a=t(45512),r=t(58009),l=t(79334),i=t(28531),n=t.n(i),o=t(79886),c=t.n(o);function u({className:e,links:s}){(0,l.usePathname)();let[t,i]=(0,r.useState)(0);return(0,a.jsxs)("nav",{className:`wrapper ${e} ${c().tabs}`,children:[(0,a.jsx)("div",{className:"max-w-[800px] w-[100%] flex justify-between",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-col",onClick:()=>i(s),children:[(0,a.jsxs)(n(),{className:`pb-1 pt-8 ${c().link} ${t==s?c().active:""}`,href:e.href,children:[" ",e.text," "]}),(0,a.jsx)("div",{className:`${c().linkBottom} ${t==s?c().active:""}`})]},s))}),(0,a.jsx)("div",{className:`${c().bottom}`,children:" "})]})}},86987:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(45512);t(79498);var r=t(52414);function l({data:e,children:s,className:t}){let l=`
    ${e?.value?.trim()} 
    ${e?.value?.trim().toLowerCase()} 
    ${e?.value?.replaceAll("-"," ").trim().toLowerCase()}
    ${e?.value?.replaceAll("_"," ").trim().toLowerCase()}
    ${e?.value?.replaceAll("-","").trim().toLowerCase()}
    ${e?.value?.replaceAll("_"," ").trim().toLowerCase()}
    ${`${s}`.trim()} 
    ${`${s}`.trim().toLowerCase()} 
    ${`${s}`.replaceAll("-"," ").trim().toLowerCase()}
    ${`${s}`.replaceAll("."," ").trim().toLowerCase()}
    ${`${s}`.replaceAll("_"," ").trim().toLowerCase()}
    ${`${s}`.replaceAll("-","").trim().toLowerCase()}
    ${`${s}`.replaceAll("_"," ").trim().toLowerCase()}
    `.trim().replaceAll(","," ");return(0,a.jsxs)("div",{className:`Tag ${t} ${l} relative`,children:[s,(0,a.jsxs)("div",{className:"manage-buttons flex flex-col gap-[1px]",children:[t?.includes("deletable")&&(0,a.jsxs)("div",{className:"delete-button",children:[" ",(0,a.jsx)(r.RCe,{})," "]}),t?.includes("editable")&&(0,a.jsxs)("div",{className:"edit-button",children:[" ",(0,a.jsx)(r.F7,{})," "]})]})]})}},64398:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(45512),r=t(49850),l=t(49278),i=t(72650),n=t.n(i);function o({children:e,title:s,description:t,setShow:i,noOverlayClickOff:o}){return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.A,{onClick:o?()=>null:()=>i(!1)}),(0,a.jsxs)("div",{className:`${n().modal}`,children:[(s||t)&&(0,a.jsxs)("div",{className:`${n().top} flex justify-between items-center`,children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"subtitle grey",children:[" ",s," "]}),t&&(0,a.jsxs)("p",{className:"grey",children:[" ",t," "]})]}),(0,a.jsxs)("button",{onClick:()=>i(!1),className:"hover:bg-tertiary-bg rounded-full p-[6px]",children:[" ",(0,a.jsx)(r.GWt,{className:"grey text-[15px]"})," "]})]}),e]})]})}},96069:e=>{e.exports={container:"user_container__OfGsf",userWidget:"user_userWidget___OmYM",avatar:"user_avatar__fhtdu"}},6341:e=>{e.exports={container:"user_container__OfGsf",userWidget:"user_userWidget___OmYM",avatar:"user_avatar__fhtdu"}},79886:e=>{e.exports={tabs:"Tabs_tabs__j3MYD",bottom:"Tabs_bottom__PvLkq",link:"Tabs_link__upRB_",active:"Tabs_active__dTqxD",linkBottom:"Tabs_linkBottom__MZtRU"}},81317:e=>{e.exports={button:"HorizontalAdd_button__OsT7p"}},72650:e=>{e.exports={modal:"Modal_modal__JUQ5R",top:"Modal_top__P5m7x"}},38083:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/profile/components/ProfileTop.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/profile/components/ProfileTop.tsx","default")},18576:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c,metadata:()=>o});var a=t(62740),r=t(34390),l=t(38083),i=t(96069),n=t.n(i);let o={title:"Profile",description:"Welcome to Seagull"};function c({children:e}){return(0,a.jsxs)("div",{className:"wrapper relative",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:`container ${n().container} mb-[30px]`,children:[(0,a.jsx)(r.default,{className:"pb-8",links:[{href:"/profile/experience",text:"Experience"},{href:"/profile/blogs",text:"Blogs"},{href:"/profile/organizations",text:"Organizations"},{href:"/profile/teams",text:"Teams"}]}),e]})]})}},34390:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/components/Tabs/Tabs.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/components/Tabs/Tabs.tsx","default")},90559:(e,s,t)=>{"use strict";t.d(s,{q:()=>m});var a=t(21590);t(70376);var r=t(42385),l=t(23346),i=t(13362),n=t(64230),o=t(57647),c=t(71082),u=t(99344);async function d(e){let s=(0,n.tO)((0,o.sc)(new TextEncoder().encode(e))),t=await (0,i.P)(`
        SELECT 
            s.id AS session_id, 
            s.user_id, 
            s.created_at AS session_created_at, 
            s.expires_at,
            u.slug
        FROM user_sessions s
        INNER JOIN users u
            ON u.id = s.user_id 
        WHERE s.id = $1`,[s]);if(!t||0===t.rowCount)return{session:null,user:null};let a=t.rows[0],r=await (0,c.A)(a.slug,!0);if(!r.success||!r.user)return{session:null,user:null};let l={id:a.session_id,userId:a.user_id,createdAt:new Date(a.session_created_at.toISOString()),expiresAt:new Date(a.expires_at.toISOString())},u=new Date(l.expiresAt);return Date.now()>=u.getTime()?(await (0,i.P)("DELETE FROM user_sessions WHERE id = $1",[l.id]),{session:null,user:null}):(Date.now()>=u.getTime()-2592e6&&(l.expiresAt=new Date(Date.now()+2592e6),await (0,i.P)("UPDATE user_sessions SET expires_at = $1 WHERE id = $2",[l.expiresAt,l.id])),{session:l,user:r.user})}(0,u.D)([d]),(0,a.A)(d,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a",null);let m=(0,l.cache)(async()=>{let e=await (0,r.UL)(),s=e.get("session")?.value??null;return null===s?{session:null,user:null}:await d(s)});(0,u.D)([m]),(0,a.A)(m,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6",null)},70440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(88077);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79498:()=>{}};