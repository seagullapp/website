(()=>{var e={};e.id=750,e.ids=[750],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},42449:e=>{"use strict";e.exports=require("pg")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},94406:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>f,tree:()=>l});var n=r(70260),s=r(28203),o=r(25155),i=r.n(o),a=r(67292),u={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>a[e]);r.d(t,u);let l=["",{children:["(pages)",{children:["settings",{children:["(pages)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,17041)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/(pages)/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,44422)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/(pages)/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(pages)/settings/(pages)/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},28021:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"00651b01fd9fc89449a0b25c6d0d425752e51f3bc3":()=>l,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6":()=>n.q});var n=r(90559),s=r(21590);r(70376);var o=r(42385),i=r(99344);async function a(){(await (0,o.UL)()).set("session","",{httpOnly:!0,sameSite:"lax",secure:!0,maxAge:0,path:"/"})}(0,i.D)([a]),(0,s.A)(a,"00b92c441b813e392fbf67a4f29f45344550ff3e5d",null);var u=r(13362);async function l(){let e=await (0,n.q)();if(!e)return{success:!1,msg:"No session found",status:400};if(!e.session&&!e.user)return{success:!1,msg:"Not authenticated",status:403};try{let t=[e.session.id],r=await (0,u.P)("DELETE FROM user_sessions WHERE id = $1",t);if(!r)return{success:!1,msg:"Could not delete session",status:400};if(1!==r.rowCount)return{success:!1,msg:"An error occurred when deleting session",status:400};return await a(),{success:!0,msg:"Successfully logged out",status:200}}catch(e){return console.log(e),{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:400}}}(0,i.D)([l]),(0,s.A)(l,"00651b01fd9fc89449a0b25c6d0d425752e51f3bc3",null)},92811:(e,t,r)=>{Promise.resolve().then(r.bind(r,79771))},52483:(e,t,r)=>{Promise.resolve().then(r.bind(r,70901))},35303:(e,t,r)=>{Promise.resolve().then(r.bind(r,91015))},65567:(e,t,r)=>{Promise.resolve().then(r.bind(r,46131))},79334:(e,t,r)=>{"use strict";var n=r(58686);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},70901:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(45512),s=r(26248);let o=(0,s.createServerReference)("00651b01fd9fc89449a0b25c6d0d425752e51f3bc3",s.callServer,void 0,s.findSourceMapURL,"default");var i=r(72060),a=r(79334),u=r(58009),l=r(92273),d=r(50520),c=r(88864);function f(){let e=(0,a.useRouter)(),t=(0,l.wA)(),[r,s]=(0,u.useState)({isError:!1,msg:"An error occurred"}),f=(0,l.d4)(e=>e.user);async function p(){s({isError:!1,msg:"Loading"});let r=await o();if(!r){s({isError:!0,msg:"Please try again"});return}if(!r.success){s({isError:!0,msg:r.msg||"An error occurred"});return}t((0,d.lM)()),e.push("/login")}return(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("form",{className:"",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col flex-grow max-w-[400px]",children:[(0,n.jsx)("label",{htmlFor:"first-name",className:"",children:" First name "}),(0,n.jsx)("input",{name:"first-name",type:"text",placeholder:(0,i.A)(f.firstName)}),(0,n.jsx)("label",{htmlFor:"last-name",className:"mt-3",children:" Last name "}),(0,n.jsx)("input",{name:"last-name",type:"text",placeholder:(0,i.A)(f.lastName)})]}),(0,n.jsx)(c.A,{avatar_url:f.avatar_url,avatar:f.avatar,size:100})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h3",{className:"text-[20px] grey font-semibold mb-1",children:" Danger Zone "}),(0,n.jsx)("button",{onClick:p,children:" Log out "}),r.isError&&(0,n.jsxs)("div",{children:["Error!",(0,n.jsxs)("p",{children:[" ",r.msg," "]})]})]})]})})}},46131:(e,t,r)=>{"use strict";r.d(t,{Container:()=>l});var n=r(45512),s=r(79334),o=r(28531),i=r.n(o);function a({links:e,page:t,setPage:r}){return(0,n.jsx)("div",{children:(0,n.jsx)("div",{className:"bg-[rgba(255,255,255,.03)] rounded-lg p-2",children:(0,n.jsx)("ul",{children:e.map((s,o)=>(console.log("url",t,s.href),(0,n.jsx)("li",{children:(0,n.jsx)(i(),{onClick:()=>r(s.name),href:s.href,className:`block rounded-lg p-2 hover:bg-[rgba(255,255,255,0.03)] ${s.href==t?"bg-white/5":""} ${o!==e.length-1&&"mb-1"}`,children:s.name})},o)))})})})}var u=r(58009);function l({children:e}){(0,s.usePathname)();let[t,r]=(0,u.useState)(""),o=[{href:"/settings",name:"Profile"},{href:"/settings/notifications",name:"Notifications"}];return(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("h1",{className:"mb-2",children:[" Settings ",(0,n.jsxs)("span",{className:"grey",children:[" / ",o.filter(e=>e.href===t)[0]?.name," "]})," "]}),(0,n.jsxs)("div",{className:"grid grid-cols-[20%_80%]",children:[(0,n.jsx)(a,{links:o,page:t,setPage:r}),(0,n.jsx)("div",{className:"pl-4",children:e})]})]})}},31831:(e,t,r)=>{"use strict";var n=r(67359);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}})},46347:(e,t,r)=>{"use strict";function n(){throw Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let n=r(26003),s=r(23543);function o(e){return(0,s.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return d},RedirectType:function(){return s.RedirectType},forbidden:function(){return i.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return a.unauthorized},unstable_rethrow:function(){return u.unstable_rethrow}});let n=r(26552),s=r(23543),o=r(39274),i=r(46347),a=r(10590),u=r(51370);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class d extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return s}});let n=""+r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function s(){let e=Error(n);throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return s},RedirectType:function(){return o},isRedirectError:function(){return i}});let n=r(11541),s="NEXT_REDIRECT";var o=function(e){return e.push="push",e.replace="replace",e}({});function i(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,i=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===s&&("replace"===o||"push"===o)&&"string"==typeof i&&!isNaN(a)&&a in n.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return d},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return u},redirect:function(){return a}});let n=r(19121),s=r(11541),o=r(23543);function i(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let n=Error(o.REDIRECT_ERROR_CODE);return n.digest=o.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",n}function a(e,t){let r=n.actionAsyncStorage.getStore();throw i(e,t||((null==r?void 0:r.isAction)?o.RedirectType.push:o.RedirectType.replace),s.RedirectStatusCode.TemporaryRedirect)}function u(e,t){throw void 0===t&&(t=o.RedirectType.replace),i(e,t,s.RedirectStatusCode.PermanentRedirect)}function l(e){return(0,o.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function d(e){if(!(0,o.isRedirectError)(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function c(e){if(!(0,o.isRedirectError)(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10590:(e,t,r)=>{"use strict";function n(){throw Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,n.isDynamicUsageError)(t)||(0,s.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(62349),s=r(67418),o=r(40627),i=r(11271);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return a}});let n=r(42490),s=r(40627),o=r(11271),i=r(10436),a=e=>(0,n.isDynamicServerError)(e)||(0,s.isBailoutToCSRError)(e)||(0,o.isNextRouterError)(e)||(0,i.isDynamicPostpone)(e)},67418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return n}});let r=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},40627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return s}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},79771:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/(pages)/Container.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/(pages)/Container.tsx","default")},17041:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(62740),s=r(79771);async function o(){return(0,n.jsx)("div",{children:(0,n.jsx)(s.default,{})})}},91015:(e,t,r)=>{"use strict";r.d(t,{Container:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call Container() from the server but Container is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/settings/Container.tsx","Container")},44422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(62740),s=r(44512),o=r(31831),i=r(91015);async function a({children:e}){return(await (0,s.UL)()).get("session")?(0,n.jsx)("div",{className:"wrapper py-4",children:(0,n.jsxs)(i.Container,{children:[" ",e," "]})}):(0,o.redirect)("/login")}},90559:(e,t,r)=>{"use strict";r.d(t,{q:()=>f});var n=r(21590);r(70376);var s=r(42385),o=r(23346),i=r(13362),a=r(64230),u=r(57647),l=r(71082),d=r(99344);async function c(e){let t=(0,a.tO)((0,u.sc)(new TextEncoder().encode(e))),r=await (0,i.P)(`
        SELECT 
            s.id AS session_id, 
            s.user_id, 
            s.created_at AS session_created_at, 
            s.expires_at,
            u.slug
        FROM user_sessions s
        INNER JOIN users u
            ON u.id = s.user_id 
        WHERE s.id = $1`,[t]);if(!r||0===r.rowCount)return{session:null,user:null};let n=r.rows[0],s=await (0,l.A)(n.slug,!0);if(!s.success||!s.user)return{session:null,user:null};let o={id:n.session_id,userId:n.user_id,createdAt:new Date(n.session_created_at.toISOString()),expiresAt:new Date(n.expires_at.toISOString())},d=new Date(o.expiresAt);return Date.now()>=d.getTime()?(await (0,i.P)("DELETE FROM user_sessions WHERE id = $1",[o.id]),{session:null,user:null}):(Date.now()>=d.getTime()-2592e6&&(o.expiresAt=new Date(Date.now()+2592e6),await (0,i.P)("UPDATE user_sessions SET expires_at = $1 WHERE id = $2",[o.expiresAt,o.id])),{session:o,user:s.user})}(0,d.D)([c]),(0,n.A)(c,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a",null);let f=(0,o.cache)(async()=>{let e=await (0,s.UL)(),t=e.get("session")?.value??null;return null===t?{session:null,user:null}:await c(t)});(0,d.D)([f]),(0,n.A)(f,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6",null)},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,246,825,77,512,436,82],()=>r(94406));module.exports=n})();