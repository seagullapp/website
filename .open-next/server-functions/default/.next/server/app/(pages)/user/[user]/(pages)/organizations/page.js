(()=>{var e={};e.id=719,e.ids=[719],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},42449:e=>{"use strict";e.exports=require("pg")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},2978:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>g,tree:()=>c});var a=r(70260),t=r(28203),n=r(25155),i=r.n(n),o=r(67292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(s,d);let c=["",{children:["(pages)",{children:["user",{children:["[user]",{children:["(pages)",{children:["organizations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59704)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/user/[user]/(pages)/organizations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,45871)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/user/[user]/(pages)/layout.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/user/[user]/(pages)/organizations/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/(pages)/user/[user]/(pages)/organizations/page",pathname:"/user/[user]/organizations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},79485:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"4013764e7b855cccaa7cda414c7a370b4c1903e7bf":()=>a.A,"402a7edfca58b4630a014ba0800c40be42ffeda737":()=>t.A});var a=r(98910),t=r(64779)},29275:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"001ceca995e446d8feebb36954bff66df1af521413":()=>t.m,"401af72ff7f7d55f51261b404620916ec184026e28":()=>c.A,"401c375d175b3bc04c185da96fc99497d2f03fc5ff":()=>d.A,"404d2a60c440802fda175063cb62a4ab50ddfb22da":()=>n.A,"408ca83da2a7494c7a7781ffd9ab611ba56ee51811":()=>o.A,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a":()=>p.d,"40f8f2f090ca352e6b95c38277e385fc1dd79b6b94":()=>i.A,"6098242062054845d9c23bff0445dbf4ba7b3e57ee":()=>t.P,"60c448cf360e41d7f8ac8c944614f59edb8e5c9841":()=>l.A,"60d1f6e8477b5a8c6b0fdcae07b94e02c8d4cb1269":()=>u.A,"60e17cb2baeee781bd9da0356c33ad975f46aaf1c0":()=>a.A,"60f9e4af765dce8861bdebd6eace82ac2309e3f690":()=>g.A,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6":()=>f.q});var a=r(71807),t=r(76109),n=r(42734),i=r(50679),o=r(18251),d=r(89321),c=r(91278),l=r(49695),u=r(81790),g=r(18383),f=r(18482),p=r(21337)},64649:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,59607,23))},6505:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,28531,23))},61860:e=>{e.exports={logo:"Logo_logo__csV_j"}},59704:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var a=r(62740),t=r(18383),n=r(63280),i=r(59607),o=r.n(i);function d({organization:e,className:s}){return(0,a.jsx)(o(),{href:`/organization/${e.slug}`,className:`widget block ${s&&s}`,children:(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,a.jsx)(n.A,{logo:e.logo_id,logo_url:e.logo_url,size:70}),(0,a.jsx)("div",{children:(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:[" ",e.name," "]})})]})})}var c=r(31831),l=r(44512);async function u({params:e}){let s=(await e).user,r=!!(await (0,l.UL)()).get("session"),n=await (0,t.A)(s);n&&n.success||(0,c.notFound)();let i=n.data;return(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"top mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:" Organizations "}),i&&i.length>0&&(0,a.jsx)("p",{className:"grey",children:" Owned by the user "})]}),i&&i.length>0?(0,a.jsx)(a.Fragment,{children:i.map((e,s)=>(0,a.jsx)("div",{children:(0,a.jsx)(d,{organization:e,className:"my-2"})},s))}):(0,a.jsx)("div",{className:"flex flex-col justify-center text-center items-center min-h-[300px] w-full mt-4",children:r?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("p",{children:" This user has no organizations "})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o(),{href:`/signup?redirect=/user/${s}/organizations`,children:" Signup to view organizations "})})})]})}},63280:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(62740),t=r(61860),n=r.n(t);function i({logo:e,logo_url:s,size:r,className:t}){return(0,a.jsx)("img",{src:function(){let r=s;if(e<=6)switch(e){case 1:r="/images/public/yellow.svg";break;case 2:r="/images/public/blue.svg";break;case 3:r="/images/public/cyan.svg";break;case 4:r="/images/public/purple.svg";break;case 5:r="/images/public/green.svg";break;case 6:r="/images/public/orange.svg"}return r}(),alt:"Logo",className:`${n().logo} ${t&&t}`,width:r,height:r,style:{width:`${r}px`,height:`${r}px`}})}},18482:(e,s,r)=>{"use strict";r.d(s,{q:()=>d});var a=r(88977);r(98063);var t=r(44512),n=r(76301),i=r(21337),o=r(56215);let d=(0,n.cache)(async()=>{let e=await (0,t.UL)(),s=e.get("session")?.value??null;return null===s?{session:null,user:null}:await (0,i.d)(s)});(0,o.D)([d]),(0,a.A)(d,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6",null)},21337:(e,s,r)=>{"use strict";r.d(s,{d:()=>d});var a=r(88977);r(98063);var t=r(76109),n=r(64397),i=r(8147),o=r(71807);async function d(e){let s=(0,n.tO)((0,i.sc)(new TextEncoder().encode(e))),r=await (0,t.P)(`
        SELECT 
            s.id AS session_id, 
            s.user_id, 
            s.created_at AS session_created_at, 
            s.expires_at,
            u.slug
        FROM user_sessions s
        INNER JOIN users u
            ON u.id = s.user_id 
        WHERE s.id = $1`,[s]);if(!r||0===r.rowCount)return{session:null,user:null};let a=r.rows[0],d=await (0,o.A)(a.slug,!0);if(!d.success||!d.user)return{session:null,user:null};let c={id:a.session_id,userId:a.user_id,createdAt:new Date(a.session_created_at.toISOString()),expiresAt:new Date(a.expires_at.toISOString())},l=new Date(c.expiresAt);return Date.now()>=l.getTime()?(await (0,t.P)("DELETE FROM user_sessions WHERE id = $1",[c.id]),{session:null,user:null}):(Date.now()>=l.getTime()-2592e6&&(c.expiresAt=new Date(Date.now()+2592e6),await (0,t.P)("UPDATE user_sessions SET expires_at = $1 WHERE id = $2",[c.expiresAt,c.id])),{session:c,user:d.user})}(0,r(56215).D)([d]),(0,a.A)(d,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a",null)},18383:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var a=r(88977);r(98063);var t=r(76109),n=r(18482);async function i(e,s){if(!e||"string"!=typeof e)return{success:!1,msg:"Invalid user id",status:400};let r=await (0,n.q)();if(!r.user||!r.session)return{success:!0,msg:"Not authenticated",status:403,data:[]};try{let s=await (0,t.P)(`
            SELECT
                o.id,
                o.owner_id,
                    u.slug AS owner_slug,
                    u.first_name AS owner_first_name,
                    u.last_name AS owner_last_name,
                o.name,
                o.slug,
                o.logo_id,
                    i.url AS logo_url,
                o.created_at,
                o.about
            FROM organizations o
            INNER JOIN users u
                ON o.owner_id = u.id
            INNER JOIN images i
                ON o.logo_id = i.id
            WHERE u.slug = $1
            LIMIT 10
        `,[e]);if(!s||!s.rowCount)throw"A database error occurred";if(s.rowCount<=0||s.rows.length<=0)return{success:!0,msg:"No organizations found",status:404,data:[]};return{success:!0,msg:"Organizations found",status:200,data:s.rows.map(e=>({id:e.id,owner_id:e.owner_id,owner_slug:e.owner_slug,owner_first_name:e.owner_first_name,owner_last_name:e.owner_last_name,name:e.name,slug:e.slug,logo_id:e.logo_id,logo_url:e.logo_url,created_at:e.created_at?new Date(e.created_at).toISOString():null,about:e.about}))}}catch(e){return{success:!1,status:400,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred"}}}(0,r(56215).D)([i]),(0,a.A)(i,"60f9e4af765dce8861bdebd6eace82ac2309e3f690",null)}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[638,246,825,77,635,885,512,819,436,82,382,928],()=>r(2978));module.exports=a})();