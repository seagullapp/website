(()=>{var e={};e.id=769,e.ids=[769],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},42449:e=>{"use strict";e.exports=require("pg")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},50706:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,pages:()=>u,routeModule:()=>h,tree:()=>c});var n=i(70260),r=i(28203),a=i(25155),s=i.n(a),o=i(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);i.d(t,l);let c=["",{children:["(pages)",{children:["organization",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,91394)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/new/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(i.t.bind(i,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,71354)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/new/page.tsx"],p={require:i,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(pages)/organization/new/page",pathname:"/organization/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43944:(e,t,i)=>{"use strict";let n,r,a,s,o,l,c,u,p,h,d,f,m,g,x,b,v,y,w,_,S,k,O;i.r(t),i.d(t,{"403814d4b61d66b97e0e15b47472217cd272008abf":()=>qc,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6":()=>F.q});var E={};i.r(E),i.d(E,{LoggerTypeId:()=>$r,add:()=>$s,addEffect:()=>$o,addScoped:()=>$l,batched:()=>$d,defaultLogger:()=>$R,filterLogLevel:()=>$p,isLogger:()=>$J,json:()=>$L,jsonLogger:()=>$T,logFmt:()=>$$,logfmtLogger:()=>$N,make:()=>$a,map:()=>$h,mapInput:()=>$c,mapInputOptions:()=>$u,minimumLogLevel:()=>$B,none:()=>$x,pretty:()=>$q,prettyLogger:()=>$A,prettyLoggerDefault:()=>$M,remove:()=>$b,replace:()=>$v,replaceEffect:()=>$y,replaceScoped:()=>$w,simple:()=>$_,stringLogger:()=>$z,structured:()=>$U,structuredLogger:()=>$D,succeed:()=>$S,sync:()=>$k,test:()=>$O,tracerLogger:()=>$P,withConsoleError:()=>$g,withConsoleLog:()=>$f,withLeveledConsole:()=>$m,withMinimumLogLevel:()=>$E,withSpanAnnotations:()=>$F,zip:()=>$j,zipLeft:()=>$I,zipRight:()=>$C});var F=i(90559),j=i(21590);i(70376);var I=i(13362);let C=function(e,t){if("function"==typeof e)return function(){return e(arguments)?t.apply(this,arguments):e=>t(e,...arguments)};switch(e){case 0:case 1:throw RangeError(`Invalid arity ${e}`);case 2:return function(e,i){return arguments.length>=2?t(e,i):function(i){return t(i,e)}};case 3:return function(e,i,n){return arguments.length>=3?t(e,i,n):function(n){return t(n,e,i)}};case 4:return function(e,i,n,r){return arguments.length>=4?t(e,i,n,r):function(r){return t(r,e,i,n)}};case 5:return function(e,i,n,r,a){return arguments.length>=5?t(e,i,n,r,a):function(a){return t(a,e,i,n,r)}};default:return function(){if(arguments.length>=e)return t.apply(this,arguments);let i=arguments;return function(e){return t(e,...i)}}}},R=e=>e,T=e=>()=>e,N=T(!0),z=T(!1),A=T(void 0);function M(e,t,i,n,r,a,s,o,l){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return i(t(e));case 4:return n(i(t(e)));case 5:return r(n(i(t(e))));case 6:return a(r(n(i(t(e)))));case 7:return s(a(r(n(i(t(e))))));case 8:return o(s(a(r(n(i(t(e)))))));case 9:return l(o(s(a(r(n(i(t(e))))))));default:{let e=arguments[0];for(let t=1;t<arguments.length;t++)e=arguments[t](e);return e}}}let D=()=>"3.12.0",P=Symbol.for(`effect/GlobalValue/globalStoreId/${D()}`);P in globalThis||(globalThis[P]=new Map);let L=globalThis[P],$=(e,t)=>(L.has(e)||L.set(e,t()),L.get(e)),q=e=>"string"==typeof e,U=e=>"number"==typeof e,B=e=>"boolean"==typeof e,J=e=>"bigint"==typeof e,H=e=>"symbol"==typeof e,K=e=>"function"==typeof e,W=e=>void 0===e,V=e=>void 0!==e,G=e=>null!==e,Q=e=>!1,Y=e=>"object"==typeof e&&null!==e,Z=e=>Y(e)||K(e),X=C(2,(e,t)=>Z(e)&&t in e),ee=C(2,(e,t)=>X(e,"_tag")&&e._tag===t),et=e=>null==e,ei=e=>null!=e,en=e=>e instanceof Date,er=e=>X(e,Symbol.iterator),ea=e=>Y(e)&&!Array.isArray(e),es=e=>X(e,"then")&&K(e.then),eo=((e,t)=>i=>e(i)||t(i),e=>`BUG: ${e} - please report an issue at https://github.com/Effect-TS/effect/issues`);Symbol.iterator;class el{constructor(e){this.called=!1,this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new el(this.self)}}class ec{constructor(e,t,i,n){return et(t)&&et(e)?(t=0xffffffff*Math.random()>>>0,e=0):et(t)&&(t=e,e=0),et(n)&&et(i)?(n=this._state?this._state[3]:0xf767814f,i=this._state?this._state[2]:0x14057b7e):et(n)&&(n=i,i=0),this._state=new Int32Array([0,0,i>>>0,(1|(n||0))>>>0]),this._next(),eu(this._state,this._state[0],this._state[1],e>>>0,t>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=1|e[3]}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){return(0x8000000*((0x3ffffff&this._next())*1)+(0x7ffffff&this._next())*1)/0x20000000000000}_next(){var e;let t,i,n,r;let a=this._state[0]>>>0,s=this._state[1]>>>0;e=this._state,t=(s>>>16)*32557>>>0,i=(65535&s)*19605>>>0,n=(65535&s)*32557>>>0,r=(s>>>16)*19605+((i>>>16)+(t>>>16))>>>0,(n=n+(i=i<<16>>>0)>>>0)>>>0<i>>>0&&(r=r+1>>>0),(n=n+(t=t<<16>>>0)>>>0)>>>0<t>>>0&&(r=r+1>>>0),r=(r=r+Math.imul(s,0x5851f42d)>>>0)+Math.imul(a,0x4c957f2d)>>>0,e[0]=r,e[1]=n,eu(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let o=a>>>18,l=(s>>>18|a<<14)>>>0;o=(o^a)>>>0;let c=((l=(l^s)>>>0)>>>27|o<<5)>>>0,u=a>>>27;return(c>>>u|c<<((-u>>>0&31)>>>0))>>>0}}function eu(e,t,i,n,r){let a=t+n>>>0,s=i+r>>>0;s>>>0<i>>>0&&(a=a+1|0),e[0]=a,e[1]=s}let ep=Symbol.for("effect/Utils/YieldWrap");class eh{#e;constructor(e){this.#e=e}[ep](){return this.#e}}function ed(e){if("object"==typeof e&&null!==e&&ep in e)return e[ep]();throw Error(eo("yieldWrapGet"))}let ef=$("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0})),em=(e=>{let t={[e]:e=>e()};return function(i){return t[e](i)}})("effect_internal_function"),eg=$(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),ex=Symbol.for("effect/Hash"),eb=e=>{if(!0===ef.enabled)return 0;switch(typeof e){case"number":return eS(e);case"bigint":return ek(e.toString(10));case"boolean":case"symbol":return ek(String(e));case"string":return ek(e);case"undefined":return ek("undefined");case"function":case"object":if(null===e)return ek("null");if(e instanceof Date)return eb(e.toISOString());if(e_(e))return e[ex]();return ev(e);default:throw Error(`BUG: unhandled typeof ${typeof e} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},ev=e=>(eg.has(e)||eg.set(e,eS(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),eg.get(e)),ey=e=>t=>53*t^e,ew=e=>0xbfffffff&e|e>>>1&0x40000000,e_=e=>X(e,ex),eS=e=>{if(e!=e||e===1/0)return 0;let t=0|e;for(t!==e&&(t^=0xffffffff*e);e>0xffffffff;)t^=e/=0xffffffff;return ew(t)},ek=e=>{let t=5381,i=e.length;for(;i;)t=33*t^e.charCodeAt(--i);return ew(t)},eO=(e,t)=>{let i=12289;for(let n=0;n<t.length;n++)i^=M(ek(t[n]),ey(eb(e[t[n]])));return ew(i)},eE=e=>eO(e,Object.keys(e)),eF=e=>{let t=6151;for(let i=0;i<e.length;i++)t=M(t,ey(eb(e[i])));return ew(t)},ej=function(){if(1==arguments.length){let e=arguments[0];return function(t){return Object.defineProperty(e,ex,{value:()=>t,enumerable:!1}),t}}let e=arguments[0],t=arguments[1];return Object.defineProperty(e,ex,{value:()=>t,enumerable:!1}),t},eI=Symbol.for("effect/Equal");function eC(){return 1==arguments.length?e=>eR(e,arguments[0]):eR(arguments[0],arguments[1])}function eR(e,t){if(e===t)return!0;let i=typeof e;if(i!==typeof t)return!1;if("object"===i||"function"===i){if(null!==e&&null!==t){if(eT(e)&&eT(t))return!!(eb(e)===eb(t)&&e[eI](t))||!!ef.enabled&&!!ef.tester&&ef.tester(e,t);if(e instanceof Date&&t instanceof Date)return e.toISOString()===t.toISOString()}if(ef.enabled){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,i)=>eR(e,t[i]));if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let i=Object.keys(e),n=Object.keys(t);if(i.length===n.length){for(let n of i)if(!(n in t&&eR(e[n],t[n])))return!!ef.tester&&ef.tester(e,t);return!0}}return!!ef.tester&&ef.tester(e,t)}}return!!ef.enabled&&!!ef.tester&&ef.tester(e,t)}let eT=e=>X(e,eI),eN=()=>eC,ez=Symbol.for("nodejs.util.inspect.custom"),eA=e=>{try{if(X(e,"toJSON")&&K(e.toJSON)&&0===e.toJSON.length)return e.toJSON();if(Array.isArray(e))return e.map(eA)}catch(e){return{}}return eH(e)},eM=e=>JSON.stringify(e,null,2),eD={toJSON(){return eA(this)},[ez](){return this.toJSON()},toString(){return eM(this.toJSON())}};class eP{[ez](){return this.toJSON()}toString(){return eM(this.toJSON())}}let eL=(e,t=2)=>{if("string"==typeof e)return e;try{return"object"==typeof e?e$(e,t):String(e)}catch(t){return String(e)}},e$=(e,t)=>{let i=[],n=JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t?i.includes(t)?void 0:i.push(t)&&(void 0!==eB.fiberRefs&&eU(t)?t[eq](eB.fiberRefs):t):t,t);return i=void 0,n},eq=Symbol.for("effect/Inspectable/Redactable"),eU=e=>"object"==typeof e&&null!==e&&eq in e,eB=$("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),eJ=(e,t)=>{let i=eB.fiberRefs;eB.fiberRefs=e;try{return t()}finally{eB.fiberRefs=i}},eH=e=>eU(e)&&void 0!==eB.fiberRefs?e[eq](eB.fiberRefs):e,eK=(e,t)=>{switch(t.length){case 0:return e;case 1:return t[0](e);case 2:return t[1](t[0](e));case 3:return t[2](t[1](t[0](e)));case 4:return t[3](t[2](t[1](t[0](e))));case 5:return t[4](t[3](t[2](t[1](t[0](e)))));case 6:return t[5](t[4](t[3](t[2](t[1](t[0](e))))));case 7:return t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))));case 8:return t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e))))))));case 9:return t[8](t[7](t[6](t[5](t[4](t[3](t[2](t[1](t[0](e)))))))));default:{let i=e;for(let e=0,n=t.length;e<n;e++)i=t[e](i);return i}}},eW="Async",eV="Commit",eG="Failure",eQ="OnFailure",eY="OnSuccess",eZ="OnSuccessAndFailure",eX="Success",e0="Sync",e1="UpdateRuntimeFlags",e2="While",e3="Iterator",e5="WithRuntime",e4="Yield",e6="RevertFlags",e7=Symbol.for("effect/Effect"),e8=Symbol.for("effect/Stream"),e9=Symbol.for("effect/Sink"),te=Symbol.for("effect/Channel"),tt={_R:e=>e,_E:e=>e,_A:e=>e,_V:D()},ti={[e7]:tt,[e8]:tt,[e9]:{_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e},[te]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},[eI](e){return this===e},[ex](){return ej(this,ev(this))},[Symbol.iterator](){return new el(new eh(this))},pipe(){return eK(this,arguments)}},tn={[ex](){return ej(this,eE(this))},[eI](e){let t=Object.keys(this),i=Object.keys(e);if(t.length!==i.length)return!1;for(let i of t)if(!(i in e&&eC(this[i],e[i])))return!1;return!0}},tr={...ti,_op:eV},ta={...tr,...tn},ts=function(){function e(){}return e.prototype=tr,e}(),to=Symbol.for("effect/Option"),tl={...ti,[to]:{_A:e=>e},[ez](){return this.toJSON()},toString(){return eM(this.toJSON())}},tc=Object.assign(Object.create(tl),{_tag:"Some",_op:"Some",[eI](e){return th(e)&&tf(e)&&eC(this.value,e.value)},[ex](){return ej(this,ey(eb(this._tag))(eb(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:eA(this.value)}}}),tu=eb("None"),tp=Object.assign(Object.create(tl),{_tag:"None",_op:"None",[eI]:e=>th(e)&&td(e),[ex]:()=>tu,toJSON(){return{_id:"Option",_tag:this._tag}}}),th=e=>X(e,to),td=e=>"None"===e._tag,tf=e=>"Some"===e._tag,tm=Object.create(tp),tg=e=>{let t=Object.create(tc);return t.value=e,t},tx=Symbol.for("effect/Context/Tag"),tb=Symbol.for("effect/Context/Reference"),tv=Symbol.for("effect/STM"),ty={...ti,_op:"Tag",[tv]:tt,[tx]:{_Service:e=>e,_Identifier:e=>e},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ez](){return this.toJSON()},of:e=>e,context(e){return tI(this,e)}},tw={...ty,[tb]:tb},t_=Symbol.for("effect/Context"),tS={[t_]:{_Services:e=>e},[eI](e){if(tE(e)&&this.unsafeMap.size===e.unsafeMap.size){for(let t of this.unsafeMap.keys())if(!e.unsafeMap.has(t)||!eC(this.unsafeMap.get(t),e.unsafeMap.get(t)))return!1;return!0}return!1},[ex](){return ej(this,eS(this.unsafeMap.size))},pipe(){return eK(this,arguments)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(eA)}},[ez](){return this.toJSON()}},tk=e=>{let t=Object.create(tS);return t.unsafeMap=e,t},tO=e=>{let t=Error(`Service not found${e.key?`: ${String(e.key)}`:""}`);if(e.stack){let i=e.stack.split("\n");if(i.length>2){let e=i[2].match(/at (.*)/);e&&(t.message=t.message+` (defined at ${e[1]})`)}}if(t.stack){let e=t.stack.split("\n");e.splice(1,3),t.stack=e.join("\n")}return t},tE=e=>X(e,t_),tF=e=>X(e,tb),tj=tk(new Map),tI=(e,t)=>tk(new Map([[e.key,t]])),tC=C(3,(e,t,i)=>{let n=new Map(e.unsafeMap);return n.set(t.key,i),tk(n)}),tR=$("effect/Context/defaultValueCache",()=>new Map),tT=e=>{if(tR.has(e.key))return tR.get(e.key);let t=e.defaultValue();return tR.set(e.key,t),t},tN=(e,t)=>e.unsafeMap.has(t.key)?e.unsafeMap.get(t.key):tT(t),tz=C(2,(e,t)=>{if(!e.unsafeMap.has(t.key)){if(tb in t)return tT(t);throw tO(t)}return e.unsafeMap.get(t.key)}),tA=C(2,(e,t)=>e.unsafeMap.has(t.key)?tg(e.unsafeMap.get(t.key)):tF(t)?tg(tT(t)):tm),tM=C(2,(e,t)=>{let i=new Map(e.unsafeMap);for(let[e,n]of t.unsafeMap)i.set(e,n);return tk(i)}),tD=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let i=Error();Error.stackTraceLimit=t;let n=Object.create(ty);return Object.defineProperty(n,"stack",{get:()=>i.stack}),n.key=e,n},tP=e=>X(e,tx),tL=()=>tj,t$=e=>()=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=2;let i=Error();function n(){}return Error.stackTraceLimit=t,Object.setPrototypeOf(n,ty),n.key=e,Object.defineProperty(n,"stack",{get:()=>i.stack}),n},tq=()=>(e,t)=>{let i=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=Error();function r(){}return Error.stackTraceLimit=i,Object.setPrototypeOf(r,tw),r.key=e,r.defaultValue=t.defaultValue,Object.defineProperty(r,"stack",{get:()=>n.stack}),r},tU=Symbol.for("effect/Either"),tB={...ti,[tU]:{_R:e=>e},[ez](){return this.toJSON()},toString(){return eM(this.toJSON())}},tJ=Object.assign(Object.create(tB),{_tag:"Right",_op:"Right",[eI](e){return tK(e)&&tV(e)&&eC(this.right,e.right)},[ex](){return ey(eb(this._tag))(eb(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:eA(this.right)}}}),tH=Object.assign(Object.create(tB),{_tag:"Left",_op:"Left",[eI](e){return tK(e)&&tW(e)&&eC(this.left,e.left)},[ex](){return ey(eb(this._tag))(eb(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:eA(this.left)}}}),tK=e=>X(e,tU),tW=e=>"Left"===e._tag,tV=e=>"Right"===e._tag,tG=e=>{let t=Object.create(tH);return t.left=e,t},tQ=e=>{let t=Object.create(tJ);return t.right=e,t},tY=C(2,(e,t)=>td(e)?tG(t()):tQ(e.value)),tZ=e=>{if(K(e))try{return tQ(e())}catch(e){return tG(e)}else try{return tQ(e.try())}catch(t){return tG(e.catch(t))}},tX=C(2,(e,t)=>tW(e)?tG(t(e.left)):tQ(e.right)),t0=((e,t)=>tV(e)?tQ(t(e.right)):tG(e.left),C(2,(e,{onLeft:t,onRight:i})=>tW(e)?t(e.left):i(e.right))),t1=t0({onLeft:R,onRight:R}),t2=C(2,(e,t)=>{if(tV(e))return e.right;throw t(e.left)}),t3=e=>(t,i)=>t===i||e(t,i),t5=C(2,(e,t)=>t3((i,n)=>e(t(i),t(n)))),t4=e=>t3((t,i)=>{if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],i[n]))return!1;return!0}),t6=e=>e.length>0,t7=()=>tm,t8=C(2,(e,{onNone:t,onSome:i})=>td(e)?t():i(e.value)),t9=C(2,(e,t)=>td(e)?t():e.value),ie=C(2,(e,t)=>td(e)?t():e),it=C(2,(e,t)=>td(e)?tg(t()):e),ii=e=>null==e?t7():tg(e),ir=t9(A),ia=e=>(...t)=>{try{return tg(e(...t))}catch(e){return t7()}},is=C(2,(e,t)=>{if(tf(e))return e.value;throw t()})(()=>Error("getOrThrow called on a None")),io=C(2,(e,t)=>td(e)?t7():tg(t(e.value))),il=C(2,(e,t)=>td(e)?t7():t(e.value)),ic=e=>{if(Symbol.iterator in e){let t=[];for(let i of e){if(td(i))return t7();t.push(i.value)}return tg(t)}let t={};for(let i of Object.keys(e)){let n=e[i];if(td(n))return t7();t[i]=n.value}return tg(t)},iu=C(2,(e,t)=>td(e)?t7():t(e.value)),ip=C(2,(e,t)=>iu(e,e=>t(e)?tg(e):tm)),ih=e=>t3((t,i)=>td(t)?td(i):!td(i)&&e(t.value,i.value)),id=(m=eN(),C(2,(e,t)=>!td(e)&&m(e.value,t))),im=C(2,(e,t)=>!td(e)&&t(e.value));Symbol.iterator,()=>ig;let ig={next:()=>({done:!0,value:void 0})},ix=e=>(t,i)=>t===i?0:e(t,i),ib=ix((e,t)=>e<t?-1:1),iv=((e,t)=>e<t?-1:1,C(2,(e,t)=>ix((i,n)=>e(t(i),t(n)))));Object.fromEntries,(e,t)=>{let i=[];for(let n of i_(e))i.push(t(n,e[n]));return i};let iy=C(2,(e,t)=>Object.prototype.hasOwnProperty.call(e,t)),iw=C(2,(e,t)=>{let i={...e};for(let n of i_(e))i[n]=t(e[n],n);return i}),i_=e=>Object.keys(e),iS=(...e)=>e,ik=(...e)=>e,iO=e=>Array(e),iE=(e,t)=>{let i=Math.max(1,Math.floor(e)),n=Array(i);for(let e=0;e<i;e++)n[e]=t(e);return n},iF=e=>Array.isArray(e)?e:Array.from(e),ij=e=>Array.isArray(e)?e:[e],iI=C(2,(e,{onEmpty:t,onNonEmpty:i})=>iM(e)?i(e):t()),iC=C(2,(e,{onEmpty:t,onNonEmpty:i})=>iM(e)?i(iU(e),iH(e)):t()),iR=C(2,(e,t)=>[t,...e]),iT=C(2,(e,t)=>[...e,t]),iN=C(2,(e,t)=>iF(e).concat(iF(t))),iz=Array.isArray,iA=e=>0===e.length,iM=t6,iD=(e,t)=>e<0||e>=t.length,iP=(e,t)=>Math.floor(Math.min(Math.max(0,e),t.length)),iL=C(2,(e,t)=>{let i=Math.floor(t);return iD(i,e)?t7():tg(e[i])}),i$=C(2,(e,t)=>{let i=Math.floor(t);if(iD(i,e))throw Error(`Index ${i} out of bounds`);return e[i]}),iq=iL(0),iU=i$(0),iB=e=>iM(e)?tg(iJ(e)):t7(),iJ=e=>e[e.length-1],iH=e=>e.slice(1),iK=(e,t)=>{let i=0;for(let n of e){if(!t(n,i))break;i++}return i},iW=C(2,(e,t)=>i0(e,iK(e,t))),iV=C(2,(e,t)=>{let i=iF(e);return i.slice(iP(t,i),i.length)}),iG=e=>Array.from(e).reverse(),iQ=C(2,(e,t)=>{let i=Array.from(e);return i.sort(t),i}),iY=C(2,(e,t)=>iZ(e,t,iS)),iZ=C(3,(e,t,i)=>{let n=iF(e),r=iF(t);if(iM(n)&&iM(r)){let e=[i(iU(n),iU(r))],t=Math.min(n.length,r.length);for(let a=1;a<t;a++)e[a]=i(n[a],r[a]);return e}return[]}),iX=eN(),i0=C(2,(e,t)=>{let i=Array.from(e),n=Math.floor(t);return iM(i)?n>=1?i1(i,n):[[],i]:[i,[]]}),i1=C(2,(e,t)=>{let i=Math.max(1,Math.floor(t));return i>=e.length?[i2(e),[]]:[iR(e.slice(1,i),iU(e)),e.slice(i)]}),i2=e=>e.slice(),i3=C(3,(e,t,i)=>{let n=iF(e),r=iF(t);return iM(n)?iM(r)?nc(i)(iN(n,r)):n:r}),i5=C(2,(e,t)=>i3(e,t,iX)),i4=()=>[],i6=e=>[e],i7=C(2,(e,t)=>e.map(t)),i8=C(2,(e,t)=>{if(iA(e))return[];let i=[];for(let n=0;n<e.length;n++){let r=t(e[n],n);for(let e=0;e<r.length;e++)i.push(r[e])}return i}),i9=i8(R),ne=C(2,(e,t)=>{let i=iF(e),n=[];for(let e=0;e<i.length;e++){let r=t(i[e],e);tf(r)&&n.push(r.value)}return n}),nt=C(2,(e,t)=>{let i=0,n=[];for(let r of e){let e=t(r,i);if(tf(e))n.push(e.value);else break;i++}return n}),ni=C(2,(e,t)=>{let i=[],n=[],r=iF(e);for(let e=0;e<r.length;e++){let a=t(r[e],e);tW(a)?i.push(a.left):n.push(a.right)}return[i,n]}),nn=ne(R),nr=C(2,(e,t)=>{let i=iF(e),n=[];for(let e=0;e<i.length;e++)t(i[e],e)&&n.push(i[e]);return n}),na=C(3,(e,t,i)=>iF(e).reduce((e,t,n)=>i(e,t,n),t)),ns=C(3,(e,t,i)=>iF(e).reduceRight((e,t,n)=>i(e,t,n),t)),no=C(2,(e,t)=>e.every(t)),nl=(e,t)=>{let i;let n=[],r=e;for(;tf(i=t(r));){let[e,t]=i.value;n.push(e),r=t}return n},nc=C(2,(e,t)=>{let i=iF(e);if(iM(i)){let e=[iU(i)];for(let n of iH(i))e.every(e=>!t(n,e))&&e.push(n);return e}return[]}),nu=e=>nc(e,eN()),np=C(2,(e,t)=>iF(e).join(t)),nh=C(3,(e,t,i)=>{let n=0,r=t,a=[];for(let t of e){let e=i(r,t,n);r=e[0],a.push(e[1]),n++}return[r,a]}),nd=Symbol.for("effect/Chunk"),nf=[],nm=t3((e,t)=>e.length===t.length&&nO(e).every((e,i)=>eC(e,nC(t,i)))),ng={[nd]:{_A:e=>e},toString(){return eM(this.toJSON())},toJSON(){return{_id:"Chunk",values:nO(this).map(eA)}},[ez](){return this.toJSON()},[eI](e){return nb(e)&&nm(this,e)},[ex](){return ej(this,eF(nO(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return nf[Symbol.iterator]();default:return nO(this)[Symbol.iterator]()}},pipe(){return eK(this,arguments)}},nx=e=>{let t=Object.create(ng);switch(t.backing=e,e._tag){case"IEmpty":t.length=0,t.depth=0,t.left=t,t.right=t;break;case"IConcat":t.length=e.left.length+e.right.length,t.depth=1+Math.max(e.left.depth,e.right.depth),t.left=e.left,t.right=e.right;break;case"IArray":t.length=e.array.length,t.depth=0,t.left=nv,t.right=nv;break;case"ISingleton":t.length=1,t.depth=0,t.left=nv,t.right=nv;break;case"ISlice":t.length=e.length,t.depth=e.chunk.depth+1,t.left=nv,t.right=nv}return t},nb=e=>X(e,nd),nv=nx({_tag:"IEmpty"}),ny=()=>nv,nw=(...e)=>1===e.length?n_(e[0]):nI(e),n_=e=>nx({_tag:"ISingleton",a:e}),nS=e=>nb(e)?e:nx({_tag:"IArray",array:iF(e)}),nk=(e,t,i)=>{switch(e.backing._tag){case"IArray":!function(e,t,i,n,r){for(let t=0;t<Math.min(e.length,0+r);t++)i[n+t-0]=e[t]}(e.backing.array,0,t,i,e.length);break;case"IConcat":nk(e.left,t,i),nk(e.right,t,i+e.left.length);break;case"ISingleton":t[i]=e.backing.a;break;case"ISlice":{let n=0,r=i;for(;n<e.length;)t[r]=nC(e,n),n+=1,r+=1}}},nO=e=>{switch(e.backing._tag){case"IEmpty":return nf;case"IArray":return e.backing.array;default:{let t=Array(e.length);return nk(e,t,0),e.backing={_tag:"IArray",array:t},e.left=nv,e.right=nv,e.depth=0,t}}},nE=e=>{switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return nx({_tag:"IArray",array:iG(e.backing.array)});case"IConcat":return nx({_tag:"IConcat",left:nE(e.backing.right),right:nE(e.backing.left)});case"ISlice":return nj(iG(nO(e)))}},nF=C(2,(e,t)=>t<0||t>=e.length?t7():tg(nC(e,t))),nj=e=>nx({_tag:"IArray",array:e}),nI=e=>nj(e),nC=C(2,(e,t)=>{switch(e.backing._tag){case"IEmpty":throw Error("Index out of bounds");case"ISingleton":if(0!==t)throw Error("Index out of bounds");return e.backing.a;case"IArray":if(t>=e.length||t<0)throw Error("Index out of bounds");return e.backing.array[t];case"IConcat":return t<e.left.length?nC(e.left,t):nC(e.right,t-e.left.length);case"ISlice":return nC(e.backing.chunk,t+e.backing.offset)}}),nR=C(2,(e,t)=>nM(e,n_(t))),nT=C(2,(e,t)=>nM(n_(t),e)),nN=C(2,(e,t)=>{if(t<=0)return nv;if(t>=e.length)return e;switch(e.backing._tag){case"ISlice":return nx({_tag:"ISlice",chunk:e.backing.chunk,length:t,offset:e.backing.offset});case"IConcat":if(t>e.left.length)return nx({_tag:"IConcat",left:e.left,right:nN(e.right,t-e.left.length)});return nN(e.left,t);default:return nx({_tag:"ISlice",chunk:e,offset:0,length:t})}}),nz=C(2,(e,t)=>{if(t<=0)return e;if(t>=e.length)return nv;switch(e.backing._tag){case"ISlice":return nx({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+t,length:e.backing.length-t});case"IConcat":if(t>e.left.length)return nz(e.right,t-e.left.length);return nx({_tag:"IConcat",left:nz(e.left,t),right:e.right});default:return nx({_tag:"ISlice",chunk:e,offset:t,length:e.length-t})}}),nA=C(2,(e,t)=>{let i=nO(e),n=i.length,r=0;for(;r<n&&t(i[r]);)r++;return nz(e,r)}),nM=C(2,(e,t)=>{if("IEmpty"===e.backing._tag)return t;if("IEmpty"===t.backing._tag)return e;let i=t.depth-e.depth;if(1>=Math.abs(i))return nx({_tag:"IConcat",left:e,right:t});if(i<-1){if(e.left.depth>=e.right.depth){let i=nM(e.right,t);return nx({_tag:"IConcat",left:e.left,right:i})}{let i=nM(e.right.right,t);if(i.depth===e.depth-3){let t=nx({_tag:"IConcat",left:e.right.left,right:i});return nx({_tag:"IConcat",left:e.left,right:t})}{let t=nx({_tag:"IConcat",left:e.left,right:e.right.left});return nx({_tag:"IConcat",left:t,right:i})}}}if(t.right.depth>=t.left.depth)return nx({_tag:"IConcat",left:nM(e,t.left),right:t.right});{let i=nM(e,t.left.left);if(i.depth===t.depth-3){let e=nx({_tag:"IConcat",left:i,right:t.left.right});return nx({_tag:"IConcat",left:e,right:t.right})}{let e=nx({_tag:"IConcat",left:t.left.right,right:t.right});return nx({_tag:"IConcat",left:i,right:e})}}}),nD=C(2,(e,t)=>nj(ne(e,t))),nP=C(2,(e,t)=>nj(nr(e,t))),nL=((e,t)=>nj(nt(e,t)),C(2,(e,t)=>{if("ISingleton"===e.backing._tag)return t(e.backing.a,0);let i=nv,n=0;for(let r of e)i=nM(i,t(r,n++));return i})),n$=nL(R),nq=e=>0===e.length,nU=e=>e.length>0,nB=nF(0),nJ=e=>nC(e,0),nH=e=>nC(e,e.length-1),nK=C(2,(e,t)=>"ISingleton"===e.backing._tag?n_(t(e.backing.a,0)):nj(M(nO(e),i7((e,i)=>t(e,i))))),nW=((e,t,i)=>{let[n,r]=nh(e,t,i);return[n,nj(r)]},C(2,(e,t)=>[nN(e,t),nz(e,t)])),nV=C(2,(e,t)=>{let i=0;for(let n of nO(e)){if(t(n))break;i++}return nW(e,i)}),nG=e=>nz(e,1),nQ=C(2,(e,t)=>nz(e,e.length-t)),nY=C(2,(e,t)=>{let i=[];for(let n of nO(e))if(t(n))i.push(n);else break;return nj(i)}),nZ=C(3,(e,t,i)=>nj(iZ(e,t,i))),nX=C(2,(e,t)=>nS(iE(e,t))),n0=(e,t)=>e<=t?nX(t-e+1,t=>e+t):n_(e),n1=Symbol.for("effect/Duration"),n2=BigInt(0),n3=BigInt(24),n5=BigInt(60),n4=BigInt(1e3),n6=BigInt(1e6),n7=BigInt(1e9),n8=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,n9=e=>{if(rr(e))return e;if(U(e))return rl(e);if(J(e))return rs(e);if(Array.isArray(e)){if(2===e.length&&U(e[0])&&U(e[1]))return rs(BigInt(e[0])*n7+BigInt(e[1]))}else if(q(e)){n8.lastIndex=0;let t=n8.exec(e);if(t){let[e,i,n]=t,r=Number(i);switch(n){case"nano":case"nanos":return rs(BigInt(i));case"micro":case"micros":return ro(BigInt(i));case"milli":case"millis":return rl(r);case"second":case"seconds":return rc(r);case"minute":case"minutes":return ru(r);case"hour":case"hours":return rp(r);case"day":case"days":return rh(r);case"week":case"weeks":return rd(r)}}}throw Error("Invalid DurationInput")},re={_tag:"Millis",millis:0},rt={_tag:"Infinity"},ri={[n1]:n1,[ex](){return ej(this,eE(this.value))},[eI](e){return rr(e)&&rS(this,e)},toString(){return`Duration(${rO(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:rg(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},rn=e=>{let t=Object.create(ri);return U(e)?isNaN(e)||e<=0?t.value=re:Number.isFinite(e)?Number.isInteger(e)?t.value={_tag:"Millis",millis:e}:t.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*e))}:t.value=rt:e<=n2?t.value=re:t.value={_tag:"Nanos",nanos:e},t},rr=e=>X(e,n1),ra=rn(0),rs=e=>rn(e),ro=e=>rn(e*n4),rl=e=>rn(e),rc=e=>rn(1e3*e),ru=e=>rn(6e4*e),rp=e=>rn(36e5*e),rh=e=>rn(864e5*e),rd=e=>rn(6048e5*e),rf=e=>rx(e,{onMillis:e=>e,onNanos:e=>Number(e)/1e6}),rm=e=>{let t=n9(e);switch(t.value._tag){case"Infinity":throw Error("Cannot convert infinite duration to nanos");case"Nanos":return t.value.nanos;case"Millis":return BigInt(Math.round(1e6*t.value.millis))}},rg=e=>{let t=n9(e);switch(t.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(t.value.nanos/n7),Number(t.value.nanos%n7)];case"Millis":return[Math.floor(t.value.millis/1e3),Math.round(t.value.millis%1e3*1e6)]}},rx=C(2,(e,t)=>{let i=n9(e);switch(i.value._tag){case"Nanos":return t.onNanos(i.value.nanos);case"Infinity":return t.onMillis(1/0);case"Millis":return t.onMillis(i.value.millis)}}),rb=C(3,(e,t,i)=>{let n=n9(e),r=n9(t);if("Infinity"===n.value._tag||"Infinity"===r.value._tag)return i.onMillis(rf(n),rf(r));if("Nanos"===n.value._tag||"Nanos"===r.value._tag){let e="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),t="Nanos"===r.value._tag?r.value.nanos:BigInt(Math.round(1e6*r.value.millis));return i.onNanos(e,t)}return i.onMillis(n.value.millis,r.value.millis)}),rv=(e,t)=>rb(e,t,{onMillis:(e,t)=>e===t,onNanos:(e,t)=>e===t}),ry=C(2,(e,t)=>rb(e,t,{onMillis:(e,t)=>rn(e+t),onNanos:(e,t)=>rn(e+t)})),rw=((e,t)=>rb(e,t,{onMillis:(e,t)=>e<t,onNanos:(e,t)=>e<t}),C(2,(e,t)=>rb(e,t,{onMillis:(e,t)=>e>t,onNanos:(e,t)=>e>t}))),r_=C(2,(e,t)=>rb(e,t,{onMillis:(e,t)=>e>=t,onNanos:(e,t)=>e>=t})),rS=C(2,(e,t)=>rv(n9(e),n9(t))),rk=e=>{let t=n9(e);if("Infinity"===t.value._tag)return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};let i=rm(t),n=i/n6,r=n/n4,a=r/n5,s=a/n5;return{days:Number(s/n3),hours:Number(s%n3),minutes:Number(a%n5),seconds:Number(r%n5),millis:Number(n%n4),nanos:Number(i%n6)}},rO=e=>{let t=n9(e);if("Infinity"===t.value._tag)return"Infinity";let i=rk(t),n=[];return 0!==i.days&&n.push(`${i.days}d`),0!==i.hours&&n.push(`${i.hours}h`),0!==i.minutes&&n.push(`${i.minutes}m`),0!==i.seconds&&n.push(`${i.seconds}s`),0!==i.millis&&n.push(`${i.millis}ms`),0!==i.nanos&&n.push(`${i.nanos}ns`),n.join(" ")};function rE(e,t){var i;return i=e&t-1,i-=i>>1&0x55555555,i=(i=(0x33333333&i)+(i>>2&0x33333333))+(i>>4)&0xf0f0f0f,i+=i>>8,127&(i+=i>>16)}let rF=(e,t)=>({value:e,previous:t});function rj(e,t,i,n){let r=n;if(!e){let e=n.length;r=Array(e);for(let t=0;t<e;++t)r[t]=n[t]}return r[t]=i,r}function rI(e,t,i){let n=i.length-1,r=0,a=0,s=i;if(e)r=a=t;else for(s=Array(n);r<t;)s[a++]=i[r++];for(++r;r<=n;)s[a++]=i[r++];return e&&(s.length=n),s}class rC{modify(e,t,i,n,r,a){let s=i(t7());return td(s)?new rC:(++a.value,new rN(e,n,r,s))}constructor(){this._tag="EmptyNode"}}function rR(e){return ee(e,"EmptyNode")}function rT(e,t){return!rR(e)&&t===e.edit}class rN{constructor(e,t,i,n){this._tag="LeafNode",this.edit=e,this.hash=t,this.key=i,this.value=n}modify(e,t,i,n,r,a){if(eC(r,this.key)){let t=i(this.value);return t===this.value?this:td(t)?(--a.value,new rC):rT(this,e)?(this.value=t,this):new rN(e,n,r,t)}let s=i(t7());return td(s)?this:(++a.value,rD(e,t,this.hash,this,n,new rN(e,n,r,s)))}}class rz{constructor(e,t,i){this._tag="CollisionNode",this.edit=e,this.hash=t,this.children=i}modify(e,t,i,n,r,a){if(n===this.hash){let t=rT(this,e),n=this.updateCollisionList(t,e,this.hash,this.children,i,r,a);return n===this.children?this:n.length>1?new rz(e,this.hash,n):n[0]}let s=i(t7());return td(s)?this:(++a.value,rD(e,t,this.hash,this,n,new rN(e,n,r,s)))}updateCollisionList(e,t,i,n,r,a,s){let o=n.length;for(let l=0;l<o;++l){let o=n[l];if("key"in o&&eC(a,o.key)){let c=o.value,u=r(c);if(u===c)return n;if(td(u))return--s.value,rI(e,l,n);return rj(e,l,new rN(t,i,a,u),n)}}let l=r(t7());return td(l)?n:(++s.value,rj(e,o,new rN(t,i,a,l),n))}}class rA{constructor(e,t,i){this._tag="IndexedNode",this.edit=e,this.mask=t,this.children=i}modify(e,t,i,n,r,a){let s;let o=this.mask,l=this.children,c=n>>>t&31,u=1<<c,p=rE(o,u),h=o&u,d=rT(this,e);if(!h){let s=new rC().modify(e,t+5,i,n,r,a);return s?l.length>=16?function(e,t,i,n,r){let a=[],s=n,o=0;for(let e=0;s;++e)1&s&&(a[e]=r[o++]),s>>>=1;return a[t]=i,new rM(e,o+1,a)}(e,c,s,o,l):new rA(e,o|u,function(e,t,i,n){let r=n.length;if(e){let e=r;for(;e>=t;)n[e--]=n[e];return n[t]=i,n}let a=0,s=0,o=Array(r+1);for(;a<t;)o[s++]=n[a++];for(o[t]=i;a<r;)o[++s]=n[a++];return o}(d,p,s,l)):this}let f=l[p],m=f.modify(e,t+5,i,n,r,a);if(f===m)return this;let g=o;if(rR(m)){var x;if(!(g&=~u))return new rC;if(l.length<=2&&(rR(x=l[1^p])||"LeafNode"===x._tag||"CollisionNode"===x._tag))return l[1^p];s=rI(d,p,l)}else s=rj(d,p,m,l);return d?(this.mask=g,this.children=s,this):new rA(e,g,s)}}class rM{constructor(e,t,i){this._tag="ArrayNode",this.edit=e,this.size=t,this.children=i}modify(e,t,i,n,r,a){let s,o=this.size,l=this.children,c=n>>>t&31,u=l[c],p=(u||new rC).modify(e,t+5,i,n,r,a);if(u===p)return this;let h=rT(this,e);if(rR(u)&&!rR(p))++o,s=rj(h,c,p,l);else if(!rR(u)&&rR(p)){if(--o<=8)return function(e,t,i,n){let r=Array(t-1),a=0,s=0;for(let e=0,t=n.length;e<t;++e)if(e!==i){let t=n[e];t&&!rR(t)&&(r[a++]=t,s|=1<<e)}return new rA(e,s,r)}(e,o,c,l);s=rj(h,c,new rC,l)}else s=rj(h,c,p,l);return h?(this.size=o,this.children=s,this):new rM(e,o,s)}}function rD(e,t,i,n,r,a){let s;let o=t;for(;;){let t=function(e,t,i,n,r,a){if(i===r)return new rz(e,i,[a,n]);let s=i>>>t&31,o=r>>>t&31;return s===o?t=>new rA(e,1<<s|1<<o,[t]):new rA(e,1<<s|1<<o,s<o?[n,a]:[a,n])}(e,o,i,n,r,a);if("function"==typeof t)s=rF(t,s),o+=5;else{let e=t;for(;null!=s;)e=s.value(e),s=s.previous;return e}}}let rP="effect/HashMap",rL=Symbol.for(rP),r$={[rL]:rL,[Symbol.iterator](){return new rU(this,(e,t)=>[e,t])},[ex](){let e=eb(rP);for(let t of this)e^=M(eb(t[0]),ey(eb(t[1])));return ej(this,e)},[eI](e){if(rV(e)){if(e._size!==this._size)return!1;for(let t of this){let i=M(e,rQ(t[0],eb(t[0])));if(td(i)||!eC(t[1],i.value))return!1}return!0}return!1},toString(){return eM(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(eA)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},rq=(e,t,i,n)=>{let r=Object.create(r$);return r._editable=e,r._edit=t,r._root=i,r._size=n,r};class rU{constructor(e,t){this.map=e,this.f=t,this.v=rJ(this.map._root,this.f,void 0)}next(){if(td(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=rB(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new rU(this.map,this.f)}}let rB=e=>e?rH(e[0],e[1],e[2],e[3],e[4]):t7(),rJ=(e,t,i)=>{switch(e._tag){case"LeafNode":if(tf(e.value))return tg({value:t(e.key,e.value.value),cont:i});return rB(i);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=e.children;return rH(n.length,n,0,t,i)}default:return rB(i)}},rH=(e,t,i,n,r)=>{for(;i<e;){let a=t[i++];if(a&&!rR(a))return rJ(a,n,[e,t,i,n,r])}return rB(r)},rK=rq(!1,0,new rC,0),rW=()=>rK,rV=e=>X(e,rL),rG=C(2,(e,t)=>rQ(e,t,eb(t))),rQ=C(3,(e,t,i)=>{let n=e._root,r=0;for(;;)switch(n._tag){case"LeafNode":return eC(t,n.key)?n.value:t7();case"CollisionNode":if(i===n.hash){let e=n.children;for(let i=0,n=e.length;i<n;++i){let n=e[i];if("key"in n&&eC(t,n.key))return n.value}}return t7();case"IndexedNode":{let e=1<<(i>>>r&31);if(n.mask&e){n=n.children[rE(n.mask,e)],r+=5;break}return t7()}case"ArrayNode":if(n=n.children[i>>>r&31]){r+=5;break}return t7();default:return t7()}}),rY=C(2,(e,t)=>tf(rQ(e,t,eb(t)))),rZ=C(3,(e,t,i)=>r5(e,t,()=>tg(i))),rX=C(3,(e,t,i)=>e._editable?(e._root=t,e._size=i,e):t===e._root?e:rq(e._editable,e._edit,t,i)),r0=e=>new rU(e,e=>e),r1=e=>e._size,r2=e=>rq(!0,e._edit+1,e._root,e._size),r3=e=>(e._editable=!1,e),r5=((e,t)=>{let i=r2(e);return t(i),r3(i)},C(3,(e,t,i)=>r4(e,t,eb(t),i))),r4=C(4,(e,t,i,n)=>{let r={value:e._size},a=e._root.modify(e._editable?e._edit:NaN,0,n,i,t,r);return M(e,rX(a,r.value))}),r6=C(2,(e,t)=>r5(e,t,t7)),r7=C(2,(e,t)=>r9(e,rW(),(e,i,n)=>rZ(e,n,t(i,n)))),r8=C(2,(e,t)=>r9(e,void 0,(e,i,n)=>t(i,n))),r9=C(3,(e,t,i)=>{let n;let r=e._root;if("LeafNode"===r._tag)return tf(r.value)?i(t,r.value.value,r.key):t;if("EmptyNode"===r._tag)return t;let a=[r.children];for(;n=a.pop();)for(let e=0,r=n.length;e<r;){let r=n[e++];r&&!rR(r)&&("LeafNode"===r._tag?tf(r.value)&&(t=i(t,r.value.value,r.key)):a.push(r.children))}return t}),ae="effect/HashSet",at=Symbol.for(ae),ai={[at]:at,[Symbol.iterator](){return r0(this._keyMap)},[ex](){return ej(this,ey(eb(this._keyMap))(eb(ae)))},[eI](e){return!!ar(e)&&r1(this._keyMap)===r1(e._keyMap)&&eC(this._keyMap,e._keyMap)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(eA)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},an=e=>{let t=Object.create(ai);return t._keyMap=e,t},ar=e=>X(e,at),aa=an(rW()),as=()=>aa,ao=C(2,(e,t)=>rY(e._keyMap,t)),al=C(2,(e,t)=>{let i=!1;for(let n of e)if(i=t(n))break;return i}),ac=C(2,(e,t)=>!al(e,e=>!t(e))),au=e=>an(r2(e._keyMap)),ap=e=>(e._keyMap._editable=!1,e),ah=C(2,(e,t)=>{let i=au(e);return t(i),ap(i)}),ad=C(2,(e,t)=>e._keyMap._editable?(rZ(t,!0)(e._keyMap),e):an(rZ(t,!0)(e._keyMap))),af=C(2,(e,t)=>e._keyMap._editable?(r6(t)(e._keyMap),e):an(r6(t)(e._keyMap))),am=C(2,(e,t)=>ah(e,e=>{for(let i of t)af(e,i)})),ag=C(2,(e,t)=>ah(as(),i=>{for(let n of(ax(e,e=>ad(i,e)),t))ad(i,n)})),ax=C(2,(e,t)=>r8(e._keyMap,(e,i)=>t(i))),ab=C(3,(e,t,i)=>r9(e._keyMap,t,(e,t,n)=>i(e,n))),av=e=>{let t=au(as());for(let i of e)ad(t,i);return ap(t)},ay=(...e)=>{let t=au(as());for(let i of e)ad(t,i);return ap(t)},aw=e=>r1(e._keyMap),a_=Symbol.for("effect/MutableRef"),aS={[a_]:a_,toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableRef",current:eA(this.current)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},ak=e=>{let t=Object.create(aS);return t.current=e,t},aO=C(3,(e,t,i)=>!!eC(t,e.current)&&(e.current=i,!0)),aE=e=>e.current,aF=C(2,(e,t)=>(e.current=t,e)),aj="effect/FiberId",aI=Symbol.for(aj),aC="None",aR="Runtime",aT="Composite",aN=ek(`${aj}-${aC}`);class az{[ex](){return aN}[eI](e){return aP(e)&&e._tag===aC}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ez](){return this.toJSON()}constructor(){this[aI]=aI,this._tag=aC,this.id=-1,this.startTimeMillis=-1}}class aA{constructor(e,t){this[aI]=aI,this._tag=aR,this.id=e,this.startTimeMillis=t}[ex](){return ej(this,ek(`${aj}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[eI](e){return aP(e)&&e._tag===aR&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ez](){return this.toJSON()}}class aM{constructor(e,t){this[aI]=aI,this._tag=aT,this.left=e,this.right=t}[ex](){return M(ek(`${aj}-${this._tag}`),ey(eb(this.left)),ey(eb(this.right)),ej(this))}[eI](e){return aP(e)&&e._tag===aT&&eC(this.left,e.left)&&eC(this.right,e.right)}toString(){return eM(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:eA(this.left),right:eA(this.right)}}[ez](){return this.toJSON()}}let aD=new az,aP=e=>X(e,aI),aL=e=>e._tag===aC||M(aH(e),ac(e=>aL(e))),a$=C(2,(e,t)=>e._tag===aC?t:t._tag===aC?e:new aM(e,t)),aq=C(2,(e,t)=>aL(e)?t:e),aU=e=>{switch(e._tag){case aC:return as();case aR:return ay(e.id);case aT:return M(aU(e.left),ag(aU(e.right)))}},aB=$(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>ak(0)),aJ=e=>Array.from(aU(e)).map(e=>`#${e}`).join(","),aH=e=>{switch(e._tag){case aC:return as();case aR:return ay(e);case aT:return M(aH(e.left),ag(aH(e.right)))}},aK=aD,aW=(e,t)=>new aA(e,t),aV=(e,t)=>new aM(e,t),aG=()=>{let e=aE(aB);return M(aB,aF(e+1)),new aA(e,Date.now())},aQ=e=>{let t=r2(rW());for(let i of e)rZ(t,i[0],i[1]);return r3(t)},aY=e=>e&&rR(e._root),aZ=Symbol.for("effect/List"),aX=e=>iF(e),a0=t5(t4(eC),aX),a1={[aZ]:aZ,_tag:"Cons",toString(){return eM(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:aX(this).map(eA)}},[ez](){return this.toJSON()},[eI](e){return a4(e)&&this._tag===e._tag&&a0(this,e)},[ex](){return ej(this,eF(aX(this)))},[Symbol.iterator](){let e=!1,t=this;return{next(){if(e)return this.return();if("Nil"===t._tag)return e=!0,this.return();let i=t.head;return t=t.tail,{done:e,value:i}},return:t=>(e||(e=!0),{done:!0,value:t})}},pipe(){return eK(this,arguments)}},a2=(e,t)=>{let i=Object.create(a1);return i.head=e,i.tail=t,i},a3=ek("Nil"),a5=Object.create({[aZ]:aZ,_tag:"Nil",toString(){return eM(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[ez](){return this.toJSON()},[ex]:()=>a3,[eI](e){return a4(e)&&this._tag===e._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return eK(this,arguments)}}),a4=e=>X(e,aZ),a6=e=>"Nil"===e._tag,a7=e=>"Cons"===e._tag,a8=(e,t)=>a2(e,t),a9=()=>a5,se=e=>a2(e,a5),st=C(2,(e,t)=>sn(t,e)),si=C(2,(e,t)=>a8(t,e)),sn=C(2,(e,t)=>{if(a6(e))return t;if(a6(t))return e;{let i=a2(t.head,e),n=i,r=t.tail;for(;!a6(r);){let t=a2(r.head,e);n.tail=t,n=t,r=r.tail}return i}}),sr=C(3,(e,t,i)=>{let n=t,r=e;for(;!a6(r);)n=i(n,r.head),r=r.tail;return n}),sa=e=>{let t=a9(),i=e;for(;!a6(i);)t=si(t,i.head),i=i.tail;return t},ss="Expected List to be non-empty",so=e=>{if(a6(e))throw Error(ss);return e.head},sl=e=>{if(a6(e))throw Error(ss);return e.tail};Array.prototype;let sc=function(){function e(e){e&&Object.assign(this,e)}return e.prototype=tn,e}(),su=e=>Object.assign(Object.create(tn),e),sp=Symbol.for("effect/DifferChunkPatch");function sh(e){return e}({...sc.prototype,[sp]:{_Value:sh,_Patch:sh}});let sd=Symbol.for("effect/DifferContextPatch");function sf(e){return e}let sm={...sc.prototype,[sd]:{_Value:sf,_Patch:sf}},sg=Object.create(Object.assign(Object.create(sm),{_tag:"Empty"})),sx=()=>sg,sb=Object.assign(Object.create(sm),{_tag:"AndThen"}),sv=(e,t)=>{let i=Object.create(sb);return i.first=e,i.second=t,i},sy=Object.assign(Object.create(sm),{_tag:"AddService"}),sw=(e,t)=>{let i=Object.create(sy);return i.key=e,i.service=t,i},s_=Object.assign(Object.create(sm),{_tag:"RemoveService"}),sS=e=>{let t=Object.create(s_);return t.key=e,t},sk=Object.assign(Object.create(sm),{_tag:"UpdateService"}),sO=(e,t)=>{let i=Object.create(sk);return i.key=e,i.update=t,i},sE=(e,t)=>{let i=new Map(e.unsafeMap),n=sx();for(let[e,r]of t.unsafeMap.entries())if(i.has(e)){let t=i.get(e);i.delete(e),eC(t,r)||(n=sF(sO(e,()=>r))(n))}else i.delete(e),n=sF(sw(e,r))(n);for(let[e]of i.entries())n=sF(sS(e))(n);return n},sF=C(2,(e,t)=>sv(e,t)),sj=C(2,(e,t)=>{if("Empty"===e._tag)return t;let i=!1,n=n_(e),r=new Map(t.unsafeMap);for(;nU(n);){let e=nJ(n),t=nG(n);switch(e._tag){case"Empty":n=t;break;case"AddService":r.set(e.key,e.service),n=t;break;case"AndThen":n=nT(nT(t,e.second),e.first);break;case"RemoveService":r.delete(e.key),n=t;break;case"UpdateService":r.set(e.key,e.update(r.get(e.key))),i=!0,n=t}}if(!i)return tk(r);let a=new Map;for(let[e]of t.unsafeMap)r.has(e)&&(a.set(e,r.get(e)),r.delete(e));for(let[e,t]of r)a.set(e,t);return tk(a)}),sI=Symbol.for("effect/DifferHashMapPatch");function sC(e){return e}({...sc.prototype,[sI]:{_Value:sC,_Key:sC,_Patch:sC}});let sR=Symbol.for("effect/DifferHashSetPatch");function sT(e){return e}let sN={...sc.prototype,[sR]:{_Value:sT,_Key:sT,_Patch:sT}},sz=Object.create(Object.assign(Object.create(sN),{_tag:"Empty"})),sA=()=>sz,sM=Object.assign(Object.create(sN),{_tag:"AndThen"}),sD=(e,t)=>{let i=Object.create(sM);return i.first=e,i.second=t,i},sP=Object.assign(Object.create(sN),{_tag:"Add"}),sL=e=>{let t=Object.create(sP);return t.value=e,t},s$=Object.assign(Object.create(sN),{_tag:"Remove"}),sq=e=>{let t=Object.create(s$);return t.value=e,t},sU=(e,t)=>{let[i,n]=ab([e,sA()],([e,t],i)=>ao(i)(e)?[af(i)(e),t]:[e,sB(sL(i))(t)])(t);return ab(n,(e,t)=>sB(sq(t))(e))(i)},sB=C(2,(e,t)=>sD(e,t)),sJ=C(2,(e,t)=>{if("Empty"===e._tag)return t;let i=t,n=n_(e);for(;nU(n);){let e=nJ(n),t=nG(n);switch(e._tag){case"Empty":n=t;break;case"AndThen":n=nT(e.first)(nT(e.second)(t));break;case"Add":i=ad(e.value)(i),n=t;break;case"Remove":i=af(e.value)(i),n=t}}return i}),sH=Symbol.for("effect/DifferOrPatch");function sK(e){return e}let sW={...sc.prototype,[sH]:{_Value:sK,_Key:sK,_Patch:sK}},sV=Object.create(Object.assign(Object.create(sW),{_tag:"Empty"})),sG=Object.assign(Object.create(sW),{_tag:"AndThen"}),sQ=(e,t)=>{let i=Object.create(sG);return i.first=e,i.second=t,i},sY=Object.assign(Object.create(sW),{_tag:"SetLeft"}),sZ=Object.assign(Object.create(sW),{_tag:"SetRight"}),sX=Object.assign(Object.create(sW),{_tag:"UpdateLeft"}),s0=Object.assign(Object.create(sW),{_tag:"UpdateRight"}),s1=((e,t)=>sQ(e,t),Symbol.for("effect/DifferReadonlyArrayPatch"));function s2(e){return e}let s3={...sc.prototype,[s1]:{_Value:s2,_Patch:s2}},s5=Object.create(Object.assign(Object.create(s3),{_tag:"Empty"})),s4=()=>s5,s6=Object.assign(Object.create(s3),{_tag:"AndThen"}),s7=(e,t)=>{let i=Object.create(s6);return i.first=e,i.second=t,i},s8=Object.assign(Object.create(s3),{_tag:"Append"}),s9=e=>{let t=Object.create(s8);return t.values=e,t},oe=Object.assign(Object.create(s3),{_tag:"Slice"}),ot=(e,t)=>{let i=Object.create(oe);return i.from=e,i.until=t,i},oi=Object.assign(Object.create(s3),{_tag:"Update"}),on=(e,t)=>{let i=Object.create(oi);return i.index=e,i.patch=t,i},or=e=>{let t=0,i=s4();for(;t<e.oldValue.length&&t<e.newValue.length;){let n=e.oldValue[t],r=e.newValue[t],a=e.differ.diff(n,r);eC(a,e.differ.empty)||(i=oa(i,on(t,a))),t+=1}return t<e.oldValue.length&&(i=oa(i,ot(0,t))),t<e.newValue.length&&(i=oa(i,s9(iV(t)(e.newValue)))),i},oa=C(2,(e,t)=>s7(e,t)),os=C(3,(e,t,i)=>{if("Empty"===e._tag)return t;let n=t.slice(),r=i6(e);for(;t6(r);){let e=iU(r),t=iH(r);switch(e._tag){case"Empty":r=t;break;case"AndThen":t.unshift(e.first,e.second),r=t;break;case"Append":for(let t of e.values)n.push(t);r=t;break;case"Slice":n=n.slice(e.from,e.until),r=t;break;case"Update":n[e.index]=i.patch(e.patch,n[e.index]),r=t}}return n}),oo={[Symbol.for("effect/Differ")]:{_P:R,_V:R}},ol=e=>{let t=Object.create(oo);return t.empty=e.empty,t.diff=e.diff,t.combine=e.combine,t.patch=e.patch,t},oc=()=>ol({empty:sx(),combine:(e,t)=>sF(t)(e),diff:(e,t)=>sE(e,t),patch:(e,t)=>sj(t)(e)}),ou=()=>ol({empty:sA(),combine:(e,t)=>sB(t)(e),diff:(e,t)=>sU(e,t),patch:(e,t)=>sJ(t)(e)}),op=e=>ol({empty:s4(),combine:(e,t)=>oa(e,t),diff:(t,i)=>or({oldValue:t,newValue:i,differ:e}),patch:(t,i)=>os(t,i,e)}),oh=()=>od((e,t)=>t),od=e=>ol({empty:R,combine:(e,t)=>e===R?t:t===R?e:i=>t(e(i)),diff:(e,t)=>eC(e,t)?R:T(t),patch:(t,i)=>e(i,t(i))}),of=e=>255&e,om=e=>e>>8&255,og=(e,t)=>(255&e)+((t&e&255)<<8),ox=og(0,0),ob=C(2,(e,t)=>og(of(e)&~t,om(e))),ov=C(2,(e,t)=>e|t),oy=e=>~e>>>0&255,ow=e=>oO(e,32),o_=((e,t)=>e&~t,C(2,(e,t)=>e|t)),oS=e=>ok(e)&&!oI(e),ok=e=>oO(e,1),oO=C(2,(e,t)=>(e&t)!=0),oE=(...e)=>e.reduce((e,t)=>e|t,0),oF=oE(0),oj=e=>oO(e,4),oI=e=>oO(e,16),oC=C(2,(e,t)=>og(e^t,t)),oR=C(2,(e,t)=>e&(oy(of(t))|om(t))|of(t)&om(t)),oT=ol({empty:ox,diff:(e,t)=>oC(e,t),combine:(e,t)=>ov(t)(e),patch:(e,t)=>oR(t,e)}),oN=e=>og(e,e),oz=e=>og(e,0),oA="Empty",oM="Fail",oD="Interrupt",oP="Parallel",oL="Sequential",o$="effect/Cause",oq=Symbol.for(o$),oU={[oq]:{_E:e=>e},[ex](){return M(eb(o$),ey(eb(li(this))),ej(this))},[eI](e){return oG(e)&&lt(this,e)},pipe(){return eK(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:eA(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:eA(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:eA(this.left),right:eA(this.right)}}},toString(){return lh(this)},[ez](){return this.toJSON()}},oB=(()=>{let e=Object.create(oU);return e._tag=oA,e})(),oJ=e=>{let t=Object.create(oU);return t._tag=oM,t.error=e,t},oH=e=>{let t=Object.create(oU);return t._tag="Die",t.defect=e,t},oK=e=>{let t=Object.create(oU);return t._tag=oD,t.fiberId=e,t},oW=(e,t)=>{let i=Object.create(oU);return i._tag=oP,i.left=e,i.right=t,i},oV=(e,t)=>{let i=Object.create(oU);return i._tag=oL,i.left=e,i.right=t,i},oG=e=>X(e,oq),oQ=e=>"Die"===e._tag,oY=e=>e._tag===oA||lu(e,!0,(e,t)=>{switch(t._tag){case oA:return tg(e);case"Die":case oM:case oD:return tg(!1);default:return t7()}}),oZ=e=>tf(o4(e)),oX=e=>lp(void 0,ls)(e),o0=e=>nE(lu(e,ny(),(e,t)=>t._tag===oM?tg(M(e,nT(t.error))):t7())),o1=e=>nE(lu(e,ny(),(e,t)=>"Die"===t._tag?tg(M(e,nT(t.defect))):t7())),o2=e=>lu(e,as(),(e,t)=>t._tag===oD?tg(M(e,ad(t.fiberId))):t7()),o3=e=>lr(e,e=>e._tag===oM?tg(e.error):t7()),o5=e=>{let t=o3(e);switch(t._tag){case"None":return tQ(e);case"Some":return tG(t.value)}},o4=e=>lr(e,e=>e._tag===oD?tg(e.fiberId):t7()),o6=e=>lc(e,{onEmpty:t7(),onFail:e=>tg(oH(e)),onDie:e=>tg(oH(e)),onInterrupt:()=>t7(),onSequential:(e,t)=>tf(e)&&tf(t)?tg(oV(e.value,t.value)):tf(e)&&td(t)?tg(e.value):td(e)&&tf(t)?tg(t.value):t7(),onParallel:(e,t)=>tf(e)&&tf(t)?tg(oW(e.value,t.value)):tf(e)&&td(t)?tg(e.value):td(e)&&tf(t)?tg(t.value):t7()}),o7=e=>lc(e,{onEmpty:oB,onFail:()=>oB,onDie:e=>oH(e),onInterrupt:e=>oK(e),onSequential:oV,onParallel:oW}),o8=e=>lc(e,{onEmpty:oB,onFail:e=>oH(e),onDie:e=>oH(e),onInterrupt:e=>oK(e),onSequential:(e,t)=>oV(e,t),onParallel:(e,t)=>oW(e,t)}),o9=C(2,(e,t)=>le(e,e=>oJ(t(e)))),le=C(2,(e,t)=>lc(e,{onEmpty:oB,onFail:e=>t(e),onDie:e=>oH(e),onInterrupt:e=>oK(e),onSequential:(e,t)=>oV(e,t),onParallel:(e,t)=>oW(e,t)})),lt=(e,t)=>{let i=n_(e),n=n_(t);for(;nU(i)&&nU(n);){let[e,t]=M(nJ(i),lu([as(),ny()],([e,t],i)=>{let[n,r]=la(i);return tg([M(e,ag(n)),M(t,nM(r))])})),[r,a]=M(nJ(n),lu([as(),ny()],([e,t],i)=>{let[n,r]=la(i);return tg([M(e,ag(n)),M(t,nM(r))])}));if(!eC(e,r))return!1;i=t,n=a}return!0},li=e=>ln(n_(e),ny()),ln=(e,t)=>{for(;;){let[i,n]=M(e,na([as(),ny()],([e,t],i)=>{let[n,r]=la(i);return[M(e,ag(n)),M(t,nM(r))]})),r=aw(i)>0?M(t,nT(i)):t;if(nq(n))return nE(r);e=n,t=r}throw Error(eo("Cause.flattenCauseLoop"))},lr=C(2,(e,t)=>{let i=[e];for(;i.length>0;){let e=i.pop(),n=t(e);switch(n._tag){case"None":switch(e._tag){case oL:case oP:i.push(e.right),i.push(e.left)}break;case"Some":return n}}return t7()}),la=e=>{let t=e,i=[],n=as(),r=ny();for(;void 0!==t;)switch(t._tag){case oA:if(0===i.length)return[n,r];t=i.pop();break;case oM:if(n=ad(n,nw(t._tag,t.error)),0===i.length)return[n,r];t=i.pop();break;case"Die":if(n=ad(n,nw(t._tag,t.defect)),0===i.length)return[n,r];t=i.pop();break;case oD:if(n=ad(n,nw(t._tag,t.fiberId)),0===i.length)return[n,r];t=i.pop();break;case oL:switch(t.left._tag){case oA:t=t.right;break;case oL:t=oV(t.left.left,oV(t.left.right,t.right));break;case oP:t=oW(oV(t.left.left,t.right),oV(t.left.right,t.right));break;default:r=nT(r,t.right),t=t.left}break;case oP:i.push(t.right),t=t.left}throw Error(eo("Cause.evaluateCauseLoop"))},ls={emptyCase:N,failCase:z,dieCase:z,interruptCase:N,sequentialCase:(e,t,i)=>t&&i,parallelCase:(e,t,i)=>t&&i},lo="SequentialCase",ll="ParallelCase",lc=C(2,(e,{onDie:t,onEmpty:i,onFail:n,onInterrupt:r,onParallel:a,onSequential:s})=>lp(e,void 0,{emptyCase:()=>i,failCase:(e,t)=>n(t),dieCase:(e,i)=>t(i),interruptCase:(e,t)=>r(t),sequentialCase:(e,t,i)=>s(t,i),parallelCase:(e,t,i)=>a(t,i)})),lu=C(3,(e,t,i)=>{let n=t,r=e,a=[];for(;void 0!==r;){let e=i(n,r);switch(n=tf(e)?e.value:n,r._tag){case oL:case oP:a.push(r.right),r=r.left;break;default:r=void 0}void 0===r&&a.length>0&&(r=a.pop())}return n}),lp=C(3,(e,t,i)=>{let n=[e],r=[];for(;n.length>0;){let e=n.pop();switch(e._tag){case oA:r.push(tQ(i.emptyCase(t)));break;case oM:r.push(tQ(i.failCase(t,e.error)));break;case"Die":r.push(tQ(i.dieCase(t,e.defect)));break;case oD:r.push(tQ(i.interruptCase(t,e.fiberId)));break;case oL:n.push(e.right),n.push(e.left),r.push(tG({_tag:lo}));break;case oP:n.push(e.right),n.push(e.left),r.push(tG({_tag:ll}))}}let a=[];for(;r.length>0;){let e=r.pop();switch(e._tag){case"Left":switch(e.left._tag){case lo:{let e=a.pop(),n=a.pop(),r=i.sequentialCase(t,e,n);a.push(r);break}case ll:{let e=a.pop(),n=a.pop(),r=i.parallelCase(t,e,n);a.push(r)}}break;case"Right":a.push(e.right)}}if(0===a.length)throw Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return a.pop()}),lh=(e,t)=>oX(e)?"All fibers interrupted without errors.":ly(e).map(function(e){return t?.renderErrorCause!==!0||void 0===e.cause?e.stack:`${e.stack} {
${ld(e.cause,"  ")}
}`}).join("\n"),ld=(e,t)=>{let i=e.stack.split("\n"),n=`${t}[cause]: ${i[0]}`;for(let e=1,r=i.length;e<r;e++)n+=`
${t}${i[e]}`;return e.cause&&(n+=` {
${ld(e.cause,`${t}  `)}
${t}}`),n};class lf extends globalThis.Error{constructor(e){let t="object"==typeof e&&null!==e,i=Error.stackTraceLimit;Error.stackTraceLimit=1,super(lm(e),t&&"cause"in e&&void 0!==e.cause?{cause:new lf(e.cause)}:void 0),this.span=void 0,""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=i,this.name=e instanceof Error?e.name:"Error",t&&(lv in e&&(this.span=e[lv]),Object.keys(e).forEach(t=>{t in this||(this[t]=e[t])})),this.stack=lb(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}}let lm=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&e instanceof Error)return e.message;try{if(X(e,"toString")&&K(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return e$(e)},lg=/\((.*)\)/g,lx=$("effect/Tracer/spanToTrace",()=>new WeakMap),lb=(e,t,i)=>{let n=[e],r=t.startsWith(e)?t.slice(e.length).split("\n"):t.split("\n");for(let e=1;e<r.length&&!r[e].includes("Generator.next");e++){if(r[e].includes("effect_internal_function")){n.pop();break}n.push(r[e].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(i){let e=i,t=0;for(;e&&"Span"===e._tag&&t<10;){let i=lx.get(e);if("function"==typeof i){let t=i();if("string"==typeof t){let i=t.matchAll(lg),r=!1;for(let[,t]of i)r=!0,n.push(`    at ${e.name} (${t})`);r||n.push(`    at ${e.name} (${t.replace(/^at /,"")})`)}else n.push(`    at ${e.name}`)}else n.push(`    at ${e.name}`);e=ir(e.parent),t++}}return n.join("\n")},lv=Symbol.for("effect/SpanAnnotation"),ly=e=>lp(e,void 0,{emptyCase:()=>[],dieCase:(e,t)=>[new lf(t)],failCase:(e,t)=>[new lf(t)],interruptCase:()=>[],parallelCase:(e,t,i)=>[...t,...i],sequentialCase:(e,t,i)=>[...t,...i]}),lw="Pending",l_="Done",lS=Symbol.for("effect/Deferred"),lk={_E:e=>e,_A:e=>e},lO=e=>({_tag:lw,joiners:e}),lE=e=>({_tag:l_,effect:e});class lF{constructor(e){this.called=!1,this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new lF(this.self)}}let lj=Symbol.for("effect/EffectError"),lI=e=>X(e,lj),lC=e=>({[lj]:lj,_tag:"EffectError",cause:e}),lR=(e,t)=>{let i=new lA("Blocked");return i.effect_instruction_i0=e,i.effect_instruction_i1=t,i},lT=e=>{let t=new lA("RunBlocked");return t.effect_instruction_i0=e,t},lN=Symbol.for("effect/Effect");class lz{constructor(e,t){this._op=e6,this.patch=e,this.op=t}}class lA{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[lN]=tt,this._op=e}[eI](e){return this===e}[ex](){return ej(this,ev(this))}pipe(){return eK(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:eA(this.effect_instruction_i0),effect_instruction_i1:eA(this.effect_instruction_i1),effect_instruction_i2:eA(this.effect_instruction_i2)}}toString(){return eM(this.toJSON())}[ez](){return this.toJSON()}[Symbol.iterator](){return new lF(new eh(this))}}class lM{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[lN]=tt,this._op=e,this._tag=e}[eI](e){return uH(e)&&"Failure"===e._op&&eC(this.effect_instruction_i0,e.effect_instruction_i0)}[ex](){return M(ek(this._tag),ey(eb(this.effect_instruction_i0)),ej(this))}get cause(){return this.effect_instruction_i0}pipe(){return eK(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return eM(this.toJSON())}[ez](){return this.toJSON()}[Symbol.iterator](){return new lF(new eh(this))}}class lD{constructor(e){this.effect_instruction_i0=void 0,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.trace=void 0,this[lN]=tt,this._op=e,this._tag=e}[eI](e){return uH(e)&&"Success"===e._op&&eC(this.effect_instruction_i0,e.effect_instruction_i0)}[ex](){return M(ek(this._tag),ey(eb(this.effect_instruction_i0)),ej(this))}get value(){return this.effect_instruction_i0}pipe(){return eK(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:eA(this.value)}}toString(){return eM(this.toJSON())}[ez](){return this.toJSON()}[Symbol.iterator](){return new lF(new eh(this))}}let lP=e=>X(e,lN),lL=e=>{let t=new lA(e5);return t.effect_instruction_i0=e,t},l$=C(3,(e,t,i)=>cj(n=>l9(e,e=>l9(l2(c_(()=>n(t(e)))),t=>c_(()=>i(e,t)).pipe(cr({onFailure:e=>{switch(t._tag){case eG:return l4(oV(t.effect_instruction_i0,e));case eX:return l4(e)}},onSuccess:()=>t})))))),lq=C(2,(e,t)=>l9(e,()=>cw(t))),lU=e=>lq(e,void 0),lB=function(){let e=new lA(eV);switch(arguments.length){case 2:e.effect_instruction_i0=arguments[0],e.commit=arguments[1];break;case 3:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.commit=arguments[2];break;case 4:e.effect_instruction_i0=arguments[0],e.effect_instruction_i1=arguments[1],e.effect_instruction_i2=arguments[2],e.commit=arguments[3];break;default:throw Error(eo("you're not supposed to end up here"))}return e},lJ=(e,t=aK)=>{let i;let n=new lA(eW);return n.effect_instruction_i0=t=>{i=e(t)},n.effect_instruction_i1=t,cg(n,e=>lP(i)?i:cI)},lH=(e,t=aK)=>c_(()=>lJ(e,t)),lK=(e,t=aK)=>lB(e,function(){let e,i,n,r;function a(t){e?e(t):void 0===i&&(i=t)}let s=new lA(eW);return s.effect_instruction_i0=t=>{e=t,i&&t(i)},s.effect_instruction_i1=t,1!==this.effect_instruction_i0.length?(r=new AbortController,n=em(()=>this.effect_instruction_i0(a,r.signal))):n=em(()=>this.effect_instruction_i0(a)),n||r?cg(s,e=>(r&&r.abort(),n??cI)):s}),lW=C(2,(e,t)=>{let i=new lA(eQ);return i.effect_instruction_i0=e,i.effect_instruction_i1=t,i}),lV=C(2,(e,t)=>ca(e,{onFailure:t,onSuccess:cw})),lG=C(3,(e,t,i)=>lW(e,e=>{let n=o5(e);switch(n._tag){case"Left":return t(n.left)?i(n.left):l4(e);case"Right":return l4(n.right)}})),lQ=Symbol.for("effect/SpanAnnotation"),lY=Symbol.for("effect/OriginalAnnotation"),lZ=(e,t)=>tf(t)?new Proxy(e,{has:(e,t)=>t===lQ||t===lY||t in e,get:(i,n)=>n===lQ?t.value:n===lY?e:i[n]}):e,lX=e=>!Z(e)||lQ in e?l4(oH(e)):lL(t=>l4(oH(lZ(e,pv(t))))),l0=e=>l6(()=>oH(new uT(e))),l1=e=>ca(e,{onFailure:e=>cw(tG(e)),onSuccess:e=>cw(tQ(e))}),l2=e=>cn(e,{onFailure:uX,onSuccess:u6}),l3=e=>!Z(e)||lQ in e?l4(oJ(e)):lL(t=>l4(oJ(lZ(e,pv(t))))),l5=e=>l9(cS(e),l3),l4=e=>{let t=new lM(eG);return t.effect_instruction_i0=e,t},l6=e=>l9(cS(e),l4),l7=lL(e=>cw(e.id())),l8=e=>lL(t=>e(t.id())),l9=C(2,(e,t)=>{let i=new lA(eY);return i.effect_instruction_i0=e,i.effect_instruction_i1=t,i}),ce=C(2,(e,t)=>l9(e,e=>{let i="function"==typeof t?t(e):t;return lP(i)?i:es(i)?lJ(e=>{i.then(t=>e(cw(t)),t=>e(l3(new uJ(t))))}):cw(i)})),ct=e=>{let t=new lA("OnStep");return t.effect_instruction_i0=e,t},ci=e=>l9(e,R),cn=C(2,(e,t)=>cr(e,{onFailure:e=>cw(t.onFailure(e)),onSuccess:e=>cw(t.onSuccess(e))})),cr=C(2,(e,t)=>{let i=new lA(eZ);return i.effect_instruction_i0=e,i.effect_instruction_i1=t.onFailure,i.effect_instruction_i2=t.onSuccess,i}),ca=C(2,(e,t)=>cr(e,{onFailure:e=>{if(o1(e).length>0)return l4(o8(e));let i=o0(e);return i.length>0?t.onFailure(nJ(i)):l4(e)},onSuccess:t.onSuccess})),cs=C(2,(e,t)=>c_(()=>{let i=iF(e),n=iO(i.length),r=0;return lq(cT({while:()=>r<i.length,body:()=>t(i[r],r),step:e=>{n[r++]=e}}),n)})),co=C(2,(e,t)=>c_(()=>{let i=iF(e),n=0;return cT({while:()=>n<i.length,body:()=>t(i[n],n),step:()=>{n++}})})),cl=(e=>"boolean"==typeof e[0]||lP(e[0]),l9(l7,e=>cc(e))),cc=e=>l4(oK(e)),cu=e=>{let t=new lA(e1);return t.effect_instruction_i0=oN(1),t.effect_instruction_i1=()=>e,t},cp=C(2,(e,t)=>cj(i=>l9(l2(i(e)),e=>po(t,e)))),ch=C(2,(e,t)=>l9(e,e=>cS(()=>t(e)))),cd=C(2,(e,t)=>ca(e,{onFailure:e=>l5(()=>t.onFailure(e)),onSuccess:e=>cS(()=>t.onSuccess(e))})),cf=C(2,(e,t)=>cr(e,{onFailure:e=>{let i=o5(e);switch(i._tag){case"Left":return l5(()=>t(i.left));case"Right":return l4(i.right)}},onSuccess:cw})),cm=((e,t)=>cm(e,e=>uW(e)?cI:t(e.effect_instruction_i0)),C(2,(e,t)=>cj(i=>cr(i(e),{onFailure:e=>{let i=uX(e);return cr(t(i),{onFailure:t=>uX(oV(e,t)),onSuccess:()=>i})},onSuccess:e=>{let i=u6(e);return cP(t(i),i)}})))),cg=C(2,(e,t)=>cm(e,u5({onFailure:e=>oX(e)?lU(t(o2(e))):cI,onSuccess:()=>cI}))),cx=C(2,(e,t)=>cE(e,t,cw)),cb=e=>cv(e,R),cv=C(2,(e,t)=>ca(e,{onFailure:e=>lX(t(e)),onSuccess:cw})),cy=lL((e,t)=>cw(t.runtimeFlags)),cw=e=>{let t=new lD(eX);return t.effect_instruction_i0=e,t},c_=e=>{let t=new lA(eV);return t.commit=e,t},cS=e=>{let t=new lA(e0);return t.effect_instruction_i0=e,t},ck=C(e=>3===e.length||2===e.length&&!(Z(e[1])&&"onlyEffect"in e[1]),(e,t)=>l9(e,e=>{let i="function"==typeof t?t(e):t;return lP(i)?lq(i,e):es(i)?lJ(t=>{i.then(i=>t(cw(e)),e=>t(l3(new uJ(e))))}):cw(e)})),cO=e=>lL(t=>{let i=M(t.getFiberRef(ug),t9(()=>t.scope()));return e(c8(ug,tg(i)))}),cE=C(3,(e,t,i)=>cr(e,{onFailure:e=>o1(e).length>0?l4(is(o6(e))):t(),onSuccess:i})),cF=e=>{let t=new lA(e1);return t.effect_instruction_i0=oz(1),t.effect_instruction_i1=()=>e,t},cj=e=>lB(e,function(){let e=new lA(e1);return e.effect_instruction_i0=oz(1),e.effect_instruction_i1=e=>ok(e)?em(()=>this.effect_instruction_i0(cu)):em(()=>this.effect_instruction_i0(cF)),e}),cI=cw(void 0),cC=e=>{let t=new lA(e1);return t.effect_instruction_i0=e,t.effect_instruction_i1=void 0,t},cR=C(2,(e,t)=>l9(t,t=>t?M(e,ch(tg)):cw(t7()))),cT=e=>{let t=new lA(e2);return t.effect_instruction_i0=e.while,t.effect_instruction_i1=e.body,t.effect_instruction_i2=e.step,t},cN=e=>c_(()=>{let t=new lA(e3);return t.effect_instruction_i0=e(),t}),cz=C(2,(e,t)=>{let i=new lA(e1);return i.effect_instruction_i0=t,i.effect_instruction_i1=()=>e,i}),cA=e=>{let t=new lA(e4);return void 0!==e?.priority?up(t,e.priority):t},cM=C(2,(e,t)=>l9(e,e=>ch(t,t=>[e,t]))),cD=C(2,(e,t)=>l9(e,e=>lq(t,e))),cP=C(2,(e,t)=>l9(e,()=>t)),cL=C(3,(e,t,i)=>l9(e,e=>ch(t,t=>i(e,t)))),c$=(()=>{let e=setInterval(()=>{},0x80000000-1);return cS(()=>clearInterval(e))},e=>l9(l7,t=>M(e,cq(t)))),cq=C(2,(e,t)=>l9(e.interruptAsFork(t),()=>e.await)),cU={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return eK(this,arguments)}},cB={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return eK(this,arguments)}},cJ={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return eK(this,arguments)}},cH={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return eK(this,arguments)}},cK={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return eK(this,arguments)}},cW={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return eK(this,arguments)}},cV={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return eK(this,arguments)}},cG={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return eK(this,arguments)}},cQ=[cU,cV,cW,cK,cH,cJ,cB,cG],cY=Symbol.for("effect/FiberRef"),cZ={_A:e=>e},cX=e=>lL(t=>u6(t.getFiberRef(e))),c0=C(2,(e,t)=>l9(cX(e),t)),c1=C(2,(e,t)=>c2(e,()=>[void 0,t])),c2=C(2,(e,t)=>lL(i=>{let[n,r]=t(i.getFiberRef(e));return i.setFiberRef(e,r),cw(n)})),c3=C(2,(e,t)=>c2(e,e=>[void 0,t(e)])),c5=Symbol.for("effect/RequestResolver"),c4={_A:e=>e,_R:e=>e};class c6{constructor(e,t){this[c5]=c4,this.runAll=e,this.target=t}[ex](){return ej(this,this.target?eb(this.target):ev(this))}[eI](e){return this.target?c7(e)&&eC(this.target,e.target):this===e}identified(...e){return new c6(this.runAll,nS(e))}pipe(){return eK(this,arguments)}}let c7=e=>X(e,c5),c8=C(3,(e,t,i)=>l$(cD(cX(t),c1(t,i)),()=>e,e=>c1(t,e))),c9=C(3,(e,t,i)=>c0(t,n=>c8(e,t,i(n)))),ue=(e,t)=>ur(e,{differ:oh(),fork:t?.fork??R,join:t?.join}),ut=e=>{let t=ou();return ur(e,{differ:t,fork:t.empty})},ui=e=>{let t=op(oh());return ur(e,{differ:t,fork:t.empty})},un=e=>{let t=oc();return ur(e,{differ:t,fork:t.empty})},ur=(e,t)=>({...tr,[cY]:cZ,initial:e,commit(){return cX(this)},diff:(e,i)=>t.differ.diff(e,i),combine:(e,i)=>t.differ.combine(e,i),patch:e=>i=>t.differ.patch(e,i),fork:t.fork,join:t.join??((e,t)=>t)}),ua=$(Symbol.for("effect/FiberRef/currentContext"),()=>un(tL())),us=$(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>ue(0)),uo=$(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>ue(2048)),ul=$(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>ue(rW())),uc=$(Symbol.for("effect/FiberRef/currentLogLevel"),()=>ue(cK)),uu=$(Symbol.for("effect/FiberRef/currentLogSpan"),()=>ue(a9())),up=C(2,(e,t)=>c8(e,us,t)),uh=$(Symbol.for("effect/FiberRef/currentConcurrency"),()=>ue("unbounded")),ud=$(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>ue(!0)),uf=$(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>ue(tg(cW))),um=$(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>ui(i4())),ug=$(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>ue(t7(),{fork:()=>t7(),join:(e,t)=>e})),ux=$(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>ue(oB,{fork:()=>oB,join:(e,t)=>e})),ub=$(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>ue(!0)),uv=$(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>ue(!0)),uy=$(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>ue(rW())),uw=$(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>ue(ny())),u_=Symbol.for("effect/Scope"),uS=Symbol.for("effect/CloseableScope"),uk=(e,t)=>e.addFinalizer(()=>lU(t)),uO=(e,t)=>e.addFinalizer(t),uE=(e,t)=>e.close(t),uF=(e,t)=>e.fork(t),uj=C(2,(e,t)=>{let i=M(e,o3,io(t));switch(i._tag){case"None":return M(o1(e),nB,t8({onNone:()=>{let t=iF(o2(e)).flatMap(e=>iF(aU(e)).map(e=>`#${e}`));return new uz(t?`Interrupted by fibers: ${t.join(", ")}`:void 0)},onSome:R}));case"Some":return i.value}}),uI=function(){class e extends globalThis.Error{commit(){return l3(this)}toJSON(){return{...this}}[ez](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split("\n").slice(1).join("\n")}`:this.toString():"Bun"in globalThis?lh(oJ(this),{renderErrorCause:!0}):this}}return Object.assign(e.prototype,ta),e}(),uC=(e,t)=>{class i extends uI{constructor(...e){super(...e),this._tag=t}}return Object.assign(i.prototype,e),i.prototype.name=t,i},uR=Symbol.for("effect/Cause/errors/RuntimeException"),uT=uC({[uR]:uR},"RuntimeException"),uN=Symbol.for("effect/Cause/errors/InterruptedException"),uz=uC({[uN]:uN},"InterruptedException"),uA=e=>X(e,uN),uM=Symbol.for("effect/Cause/errors/IllegalArgument"),uD=uC({[uM]:uM},"IllegalArgumentException"),uP=Symbol.for("effect/Cause/errors/NoSuchElement"),uL=uC({[uP]:uP},"NoSuchElementException"),u$=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),uq=uC({[u$]:u$},"InvalidPubSubCapacityException"),uU=Symbol.for("effect/Cause/errors/Timeout"),uB=Symbol.for("effect/Cause/errors/UnknownException"),uJ=function(){class e extends uI{constructor(e,t){super(t??"An unknown error occurred",{cause:e}),this._tag="UnknownException",this.cause=e,this.error=e}}return Object.assign(e.prototype,{[uB]:uB,name:"UnknownException"}),e}(),uH=e=>lP(e)&&"_tag"in e&&("Success"===e._tag||"Failure"===e._tag),uK=e=>"Failure"===e._tag,uW=e=>"Success"===e._tag,uV=C(2,(e,t)=>{switch(e._tag){case eG:return uX(e.effect_instruction_i0);case eX:return u6(t)}}),uG=e=>uV(e,void 0),uQ=(e,t)=>pt(e,t?.parallel?oW:oV),uY=e=>uX(oH(e)),uZ=e=>uX(oJ(e)),uX=e=>{let t=new lM(eG);return t.effect_instruction_i0=e,t},u0=C(2,(e,t)=>{switch(e._tag){case eG:return uX(e.effect_instruction_i0);case eX:return t(e.effect_instruction_i0)}}),u1=C(2,(e,t)=>{switch(e._tag){case eG:return cw(uX(e.effect_instruction_i0));case eX:return l2(t(e.effect_instruction_i0))}}),u2=e=>uX(oK(e)),u3=C(2,(e,t)=>{switch(e._tag){case eG:return uX(e.effect_instruction_i0);case eX:return u6(t(e.effect_instruction_i0))}}),u5=C(2,(e,{onFailure:t,onSuccess:i})=>{switch(e._tag){case eG:return t(e.effect_instruction_i0);case eX:return i(e.effect_instruction_i0)}}),u4=C(2,(e,{onFailure:t,onSuccess:i})=>{switch(e._tag){case eG:return t(e.effect_instruction_i0);case eX:return i(e.effect_instruction_i0)}}),u6=e=>{let t=new lD(eX);return t.effect_instruction_i0=e,t},u7=u6(void 0),u8=C(2,(e,t)=>pe(e,t,{onSuccess:(e,t)=>[e,t],onFailure:oV})),u9=C(2,(e,t)=>pe(e,t,{onSuccess:(e,t)=>t,onFailure:oV})),pe=C(3,(e,t,{onFailure:i,onSuccess:n})=>{switch(e._tag){case eG:switch(t._tag){case eX:return uX(e.effect_instruction_i0);case eG:return uX(i(e.effect_instruction_i0,t.effect_instruction_i0))}case eX:switch(t._tag){case eX:return u6(n(e.effect_instruction_i0,t.effect_instruction_i0));case eG:return uX(t.effect_instruction_i0)}}}),pt=(e,t)=>{let i=nS(e);return nU(i)?M(nG(i),na(M(nJ(i),u3(n_)),(e,i)=>M(e,pe(i,{onSuccess:(e,t)=>M(e,nT(t)),onFailure:t}))),u3(nE),u3(e=>nO(e)),tg):t7()},pi=e=>({...tr,[lS]:lk,state:ak(lO([])),commit(){return pa(this)},blockingOn:e}),pn=()=>l9(l7,e=>pr(e)),pr=e=>cS(()=>pi(e)),pa=e=>lH(t=>{let i=aE(e.state);switch(i._tag){case l_:return t(i.effect);case lw:return i.joiners.push(t),ph(e,t)}},e.blockingOn),ps=C(2,(e,t)=>cS(()=>{let i=aE(e.state);switch(i._tag){case l_:return!1;case lw:aF(e.state,lE(t));for(let e=0,n=i.joiners.length;e<n;e++)i.joiners[e](t);return!0}})),po=C(2,(e,t)=>ps(e,t)),pl=((e,t)=>ps(e,l3(t)),C(2,(e,t)=>ps(e,l4(t)))),pc=C(2,(e,t)=>ps(e,cc(t))),pu=C(2,(e,t)=>ps(e,cw(t))),pp=(e,t)=>{let i=aE(e.state);if(i._tag===lw){aF(e.state,lE(t));for(let e=0,n=i.joiners.length;e<n;e++)i.joiners[e](t)}},ph=(e,t)=>cS(()=>{let i=aE(e.state);if(i._tag===lw){let e=i.joiners.indexOf(t);e>=0&&i.joiners.splice(e,1)}}),pd=lL(e=>u6(e.currentContext)),pf=()=>pd,pm=e=>l9(pf(),e),pg=C(2,(e,t)=>c8(ua,t)(e)),px=C(2,(e,t)=>c9(ua,e=>tM(e,t))(e)),pb=C(2,(e,t)=>pm(i=>pg(e,t(i)))),pv=e=>{let t=e.currentSpan;return void 0!==t&&"Span"===t._tag?tg(t):t7()},py={_tag:"Span",spanId:"noop",traceId:"noop",sampled:!1,status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:u7},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},pw=e=>Object.assign(Object.create(py),e),p_=Symbol.for("effect/Clock"),pS=tD("effect/Clock"),pk=0x80000000-1,pO={unsafeSchedule(e,t){let i=rf(t);if(i>pk)return z;let n=!1,r=setTimeout(()=>{n=!0,e()},i);return()=>(clearTimeout(r),!n)}},pE=function(){let e=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*e;if("number"==typeof performance.timeOrigin&&0===performance.timeOrigin)return()=>BigInt(Math.round(1e6*performance.now()));let t=BigInt(Date.now())*e-BigInt(Math.round(1e6*performance.now()));return()=>t+BigInt(Math.round(1e6*performance.now()))}(),pF=function(){let e="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!e)return pE;let t=pE()-e.bigint();return()=>t+e.bigint()}();class pj{unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return pF()}scheduler(){return cw(pO)}sleep(e){return lK(t=>lU(cS(pO.unsafeSchedule(()=>t(cI),e))))}constructor(){this[p_]=p_,this.currentTimeMillis=cS(()=>this.unsafeCurrentTimeMillis()),this.currentTimeNanos=cS(()=>this.unsafeCurrentTimeNanos())}}let pI=e=>Math.max(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))),2),pC=e=>{if("NaN"===e)return tg(NaN);if("Infinity"===e)return tg(1/0);if("-Infinity"===e)return tg(-1/0);if(""===e.trim())return tm;let t=Number(e);return Number.isNaN(t)?tm:tg(t)},pR=e=>e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),pT="InvalidData",pN="MissingData",pz="SourceUnavailable",pA="Unsupported",pM=Symbol.for("effect/ConfigError"),pD={_tag:"ConfigError",[pM]:pM},pP=(e,t)=>{let i=Object.create(pD);return i._op="And",i.left=e,i.right=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),i},pL=(e,t)=>{let i=Object.create(pD);return i._op="Or",i.left=e,i.right=t,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),i},p$=(e,t,i={pathDelim:"."})=>{let n=Object.create(pD);return n._op=pT,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=M(this.path,np(i.pathDelim));return`(Invalid data at ${e}: "${this.message}")`}}),n},pq=(e,t,i={pathDelim:"."})=>{let n=Object.create(pD);return n._op=pN,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=M(this.path,np(i.pathDelim));return`(Missing data at ${e}: "${this.message}")`}}),n},pU=(e,t,i,n={pathDelim:"."})=>{let r=Object.create(pD);return r._op=pz,r.path=e,r.message=t,r.cause=i,Object.defineProperty(r,"toString",{enumerable:!1,value(){let e=M(this.path,np(n.pathDelim));return`(Source unavailable at ${e}: "${this.message}")`}}),r},pB=(e,t,i={pathDelim:"."})=>{let n=Object.create(pD);return n._op=pA,n.path=e,n.message=t,Object.defineProperty(n,"toString",{enumerable:!1,value(){let e=M(this.path,np(i.pathDelim));return`(Unsupported operation at ${e}: "${this.message}")`}}),n},pJ=C(2,(e,t)=>{switch(e._op){case"And":return pP(pJ(e.left,t),pJ(e.right,t));case"Or":return pL(pJ(e.left,t),pJ(e.right,t));case pT:return p$([...t,...e.path],e.message);case pN:return pq([...t,...e.path],e.message);case pz:return pU([...t,...e.path],e.message,e.cause);case pA:return pB([...t,...e.path],e.message)}}),pH={andCase:(e,t,i)=>t&&i,orCase:(e,t,i)=>t&&i,invalidDataCase:z,missingDataCase:N,sourceUnavailableCase:z,unsupportedCase:z},pK=C(3,(e,t,i)=>{let n=[e],r=[];for(;n.length>0;){let e=n.pop();switch(e._op){case"And":n.push(e.right),n.push(e.left),r.push(tG({_op:"AndCase"}));break;case"Or":n.push(e.right),n.push(e.left),r.push(tG({_op:"OrCase"}));break;case pT:r.push(tQ(i.invalidDataCase(t,e.path,e.message)));break;case pN:r.push(tQ(i.missingDataCase(t,e.path,e.message)));break;case pz:r.push(tQ(i.sourceUnavailableCase(t,e.path,e.message,e.cause)));break;case pA:r.push(tQ(i.unsupportedCase(t,e.path,e.message)))}}let a=[];for(;r.length>0;){let e=r.pop();switch(e._op){case"Left":switch(e.left._op){case"AndCase":{let e=a.pop(),n=a.pop(),r=i.andCase(t,e,n);a.push(r);break}case"OrCase":{let e=a.pop(),n=a.pop(),r=i.orCase(t,e,n);a.push(r)}}break;case"Right":a.push(e.right)}}if(0===a.length)throw Error("BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return a.pop()}),pW={_tag:"Empty"},pV=C(2,(e,t)=>({_tag:"AndThen",first:e,second:t})),pG=C(2,(e,t)=>pV(e,{_tag:"MapName",f:t})),pQ=C(2,(e,t)=>pV(e,{_tag:"Nested",name:t})),pY=C(2,(e,t)=>pV(e,{_tag:"Unnested",name:t})),pZ=C(2,(e,t)=>{let i=se(t),n=e;for(;a7(i);){let e=i.head;switch(e._tag){case"Empty":i=i.tail;break;case"AndThen":i=a8(e.first,a8(e.second,i.tail));break;case"MapName":n=i7(n,e.f),i=i.tail;break;case"Nested":n=iR(n,e.name),i=i.tail;break;case"Unnested":if(!M(iq(n),id(e.name)))return tG(pq(n,`Expected ${e.name} to be in path in ConfigProvider#unnested`));n=iH(n),i=i.tail}}return tQ(n)}),pX="Constant",p0="Fallback",p1="Lazy",p2="MapOrFail",p3="Nested",p5="Primitive",p4="ZipWith",p6=e=>e.toLowerCase(),p7=e=>e.toUpperCase(),p8=(e,t,i)=>t instanceof RegExp?e.replace(t,i):t.reduce((e,t)=>e.replace(t,i),e),p9=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],he=/[^A-Z0-9]+/gi,ht=(e,t={})=>{let{delimiter:i=" ",splitRegexp:n=p9,stripRegexp:r=he,transform:a=p6}=t,s=p8(p8(e,n,"$1\0$2"),r,"\0"),o=0,l=s.length;for(;"\0"===s.charAt(o);)o++;for(;"\0"===s.charAt(l-1);)l--;return s.slice(o,l).split("\0").map(a).join(i)},hi=(e,t)=>ht(e,{delimiter:"_",transform:p7,...t}),hn=(e,t)=>[...e,...t],hr=Symbol.for("effect/ConfigProvider"),ha=tD("effect/ConfigProvider"),hs=Symbol.for("effect/ConfigProviderFlat"),ho=e=>({[hr]:hr,pipe(){return eK(this,arguments)},...e}),hl=e=>({[hs]:hs,patch:e.patch,load:(t,i,n=!0)=>e.load(t,i,n),enumerateChildren:e.enumerateChildren}),hc=e=>ho({load:t=>l9(hf(e,i4(),t,!1),e=>t8(iq(e),{onNone:()=>l3(pq(i4(),`Expected a single value having structure: ${t}`)),onSome:cw})),flattened:e}),hu=e=>{let{pathDelim:t,seqDelim:i}=Object.assign({},{pathDelim:"_",seqDelim:","},e),n=e=>M(e,np(t)),r=e=>e.split(t),a=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return hc(hl({load:(e,t,r=!0)=>{let s=n(e),o=a();return M(s in o?tg(o[s]):t7(),cf(()=>pq(e,`Expected ${s} to exist in the process context`)),l9(n=>h_(n,e,t,i,r)))},enumerateChildren:e=>cS(()=>av(Object.keys(a()).map(e=>r(e.toUpperCase())).filter(t=>{for(let i=0;i<e.length;i++){let n=M(e,i$(i)),r=t[i];if(void 0===r||n!==r)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:pW}))},hp=(e,t)=>{let{pathDelim:i,seqDelim:n}=Object.assign({seqDelim:",",pathDelim:"."},t),r=e=>M(e,np(i)),a=e=>e.split(i),s=hj(e,e=>a(e),r);return hc(hl({load:(e,t,i=!0)=>{let a=r(e);return M(s.has(a)?tg(s.get(a)):t7(),cf(()=>pq(e,`Expected ${a} to exist in the provided map`)),l9(r=>h_(r,e,t,n,i)))},enumerateChildren:e=>cS(()=>av(iF(s.keys()).map(a).filter(t=>{for(let i=0;i<e.length;i++){let n=M(e,i$(i)),r=t[i];if(void 0===r||n!==r)return!1}return!0}).flatMap(t=>t.slice(e.length,e.length+1)))),patch:pW}))},hh=(e,t,i,n)=>{let r=nl(i.length,t=>t>=n.length?t7():tg([e(t),t+1])),a=nl(n.length,e=>e>=i.length?t7():tg([t(e),e+1]));return[hn(i,r),hn(n,a)]},hd=(e,t)=>{let i=t;if("Nested"===i._tag){let t=e.slice();for(;"Nested"===i._tag;)t.push(i.name),i=i.config;return t}return e},hf=(e,t,i,n)=>{switch(i._tag){case pX:return cw(i6(i.value));case"Described":return c_(()=>hf(e,t,i.config,n));case"Fail":return l3(pq(t,i.message));case p0:return M(c_(()=>hf(e,t,i.first,n)),lV(r=>i.condition(r)?M(hf(e,t,i.second,n),lV(e=>l3(pL(r,e)))):l3(r)));case p1:return c_(()=>hf(e,t,i.config(),n));case p2:return c_(()=>M(hf(e,t,i.original,n),l9(cs(e=>M(i.mapOrFail(e),cf(pJ(hd(t,i.original))))))));case p3:return c_(()=>hf(e,hn(t,i6(i.name)),i.config,n));case p5:return M(pZ(t,e.patch),l9(t=>M(e.load(t,i,n),l9(e=>{if(0===e.length){let e=M(iB(t),t9(()=>"<n/a>"));return l3(pq([],`Expected ${i.description} with name ${e}`))}return cw(e)}))));case"Sequence":return M(pZ(t,e.patch),l9(n=>M(e.enumerateChildren(n),l9(hk),l9(n=>0===n.length?c_(()=>ch(hf(e,t,i.config,!0),i6)):M(cs(n,n=>hf(e,iT(t,`[${n}]`),i.config,!0)),ch(e=>{let t=i9(e);return 0===t.length?i6(i4()):i6(t)}))))));case"HashMap":return c_(()=>M(pZ(t,e.patch),l9(t=>M(e.enumerateChildren(t),l9(r=>M(r,cs(r=>hf(e,hn(t,i6(r)),i.valueConfig,n)),ch(e=>0===e.length?i6(rW()):M(hS(e),i7(e=>aQ(iY(iF(r),e)))))))))));case p4:return c_(()=>M(hf(e,t,i.left,n),l1,l9(r=>M(hf(e,t,i.right,n),l1,l9(e=>{if(tW(r)&&tW(e))return l3(pP(r.left,e.left));if(tW(r)&&tV(e))return l3(r.left);if(tV(r)&&tW(e))return l3(e.left);if(tV(r)&&tV(e)){let n=M(t,np(".")),a=hm(t,n),[s,o]=hh(a,a,M(r.right,i7(tQ)),M(e.right,i7(tQ)));return M(s,iY(o),cs(([e,t])=>M(cM(e,t),ch(([e,t])=>i.zip(e,t)))))}throw Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},hm=(e,t)=>i=>tG(pq(e,`The element at index ${i} in a sequence at path "${t}" was missing`)),hg=C(2,(e,t)=>hc(hx(e.flattened,t))),hx=(e,t)=>hl({load:(t,i,n=!0)=>e.load(t,i,n),enumerateChildren:t=>e.enumerateChildren(t),patch:pG(e.patch,t)}),hb=C(2,(e,t)=>hc(hl({load:(t,i)=>e.flattened.load(t,i,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:pQ(e.flattened.patch,t)}))),hv=((e,t)=>hc(hl({load:(t,i)=>e.flattened.load(t,i,!0),enumerateChildren:t=>e.flattened.enumerateChildren(t),patch:pY(e.flattened.patch,t)})),C(2,(e,t)=>hc(hy(e.flattened,()=>t().flattened)))),hy=(e,t)=>hl({load:(i,n,r)=>M(pZ(i,e.patch),l9(t=>e.load(t,n,r)),lV(e=>M(cS(t),l9(t=>M(pZ(i,t.patch),l9(e=>t.load(e,n,r)),lV(t=>l3(pL(e,t)))))))),enumerateChildren:i=>M(pZ(i,e.patch),l9(t=>e.enumerateChildren(t)),l1,l9(e=>M(cS(t),l9(t=>M(pZ(i,t.patch),l9(e=>t.enumerateChildren(e)),l1,l9(t=>{if(tW(e)&&tW(t))return l3(pP(e.left,t.left));if(tW(e)&&tV(t))return cw(t.right);if(tV(e)&&tW(t))return cw(e.right);if(tV(e)&&tV(t))return cw(M(e.right,ag(t.right)));throw Error("BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues")})))))),patch:pW}),hw=(e,t)=>e.split(RegExp(`\\s*${pR(t)}\\s*`)),h_=(e,t,i,n,r)=>r?M(hw(e,n),cs(e=>i.parse(e.trim())),cf(pJ(t))):M(i.parse(e),cd({onFailure:pJ(t),onSuccess:i6})),hS=e=>Object.keys(e[0]).map(t=>e.map(e=>e[t])),hk=e=>M(cs(e,hF),cd({onFailure:()=>i4(),onSuccess:iQ(ib)}),l1,ch(t1)),hO=/(^.+)(\[(\d+)\])$/,hE=/^(\[(\d+)\])$/,hF=e=>{let t=e.match(hE);if(null!==t){let e=t[2];return M(void 0!==e&&e.length>0?tg(e):t7(),il(hC))}return t7()},hj=(e,t,i)=>{let n=new Map;for(let[r,a]of e){let e=M(t(r),i8(e=>t8(hI(e),{onNone:()=>i6(e),onSome:([e,t])=>ik(e,`[${t}]`)})));n.set(i(e),a)}return n},hI=e=>{let t=e.match(hO);if(null!==t){let e=t[1],i=t[3];return ic([void 0!==e&&e.length>0?tg(e):t7(),M(void 0!==i&&i.length>0?tg(i):t7(),il(hC))])}return t7()},hC=e=>{let t=Number.parseInt(e);return Number.isNaN(t)?t7():tg(t)},hR=e=>({_tag:"KeyName",name:e}),hT=e=>({_tag:"KeyIndex",index:e}),hN=e=>{let t=[],i=0;for(;i<e.length;){let n=e[i];if("KeyName"===n._tag){if(i+1<e.length){let r=e[i+1];"KeyIndex"===r._tag?(t.push(`${n.name}[${r.index}]`),i+=2):(t.push(n.name),i+=1)}else t.push(n.name),i+=1}}return t},hz=e=>{let t=(e,t)=>"string"==typeof t?ik([e,t]):"number"==typeof t||"boolean"==typeof t?ik([e,String(t)]):iz(t)?i(e,t):"object"==typeof t&&null!==t?n(e,t):i4(),i=(e,i)=>iI(i,{onEmpty:()=>ik([e,"<nil>"]),onNonEmpty:i8((i,n)=>t(iT(e,hT(n)),i))}),n=(e,i)=>Object.entries(i).filter(([,e])=>ei(e)).flatMap(([i,n])=>{let r=iT(e,hR(i)),a=t(r,n);return iA(a)?ik([r,""]):a});return n(i4(),e)},hA=Symbol.for("effect/Console"),hM=tD("effect/Console"),hD={[hA]:hA,assert:(e,...t)=>cS(()=>{console.assert(e,...t)}),clear:cS(()=>{console.clear()}),count:e=>cS(()=>{console.count(e)}),countReset:e=>cS(()=>{console.countReset(e)}),debug:(...e)=>cS(()=>{console.debug(...e)}),dir:(e,t)=>cS(()=>{console.dir(e,t)}),dirxml:(...e)=>cS(()=>{console.dirxml(...e)}),error:(...e)=>cS(()=>{console.error(...e)}),group:e=>e?.collapsed?cS(()=>console.groupCollapsed(e?.label)):cS(()=>console.group(e?.label)),groupEnd:cS(()=>{console.groupEnd()}),info:(...e)=>cS(()=>{console.info(...e)}),log:(...e)=>cS(()=>{console.log(...e)}),table:(e,t)=>cS(()=>{console.table(e,t)}),time:e=>cS(()=>console.time(e)),timeEnd:e=>cS(()=>console.timeEnd(e)),timeLog:(e,...t)=>cS(()=>{console.timeLog(e,...t)}),trace:(...e)=>cS(()=>{console.trace(...e)}),warn:(...e)=>cS(()=>{console.warn(...e)}),unsafe:console},hP=Symbol.for("effect/Random"),hL=tD("effect/Random");class h${constructor(e){this[hP]=hP,this.seed=e,this.PRNG=new ec(e)}get next(){return cS(()=>this.PRNG.number())}get nextBoolean(){return ch(this.next,e=>e>.5)}get nextInt(){return cS(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,t){return ch(this.next,i=>(t-e)*i+e)}nextIntBetween(e,t){return cS(()=>this.PRNG.integer(t-e)+e)}shuffle(e){return hq(e,e=>this.nextIntBetween(0,e))}}let hq=(e,t)=>c_(()=>M(cS(()=>Array.from(e)),l9(e=>{let i=[];for(let t=e.length;t>=2;t-=1)i.push(t);return M(i,co(i=>M(t(i),ch(t=>hU(e,i-1,t)))),lq(nS(e)))}))),hU=(e,t,i)=>{let n=e[t];return e[t]=e[i],e[i]=n,e},hB=Symbol.for("effect/Tracer"),hJ=tD("effect/Tracer"),hH=tD("effect/ParentSpan"),hK=function(){let e="abcdef0123456789",t=e.length;return function(i){let n="";for(let r=0;r<i;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}}();class hW{constructor(e,t,i,n,r,a){this._tag="Span",this.traceId="native",this.sampled=!0,this.events=[],this.name=e,this.parent=t,this.context=i,this.links=n,this.startTime=r,this.kind=a,this.status={_tag:"Started",startTime:r},this.attributes=new Map,this.traceId="Some"===t._tag?t.value.traceId:hK(32),this.spanId=hK(16)}end(e,t){this.status={_tag:"Ended",endTime:e,exit:t,startTime:this.status.startTime}}attribute(e,t){this.attributes.set(e,t)}event(e,t,i){this.events.push([e,t,i??{}])}}let hV=e=>{if(e?.captureStackTrace===!1||e?.captureStackTrace!==void 0&&"boolean"!=typeof e.captureStackTrace)return e;let t=Error.stackTraceLimit;Error.stackTraceLimit=3;let i=Error();Error.stackTraceLimit=t;let n=!1;return{...e,captureStackTrace:()=>{if(!1!==n)return n;if(void 0!==i.stack){let e=i.stack.split("\n");if(void 0!==e[3])return n=e[3].trim()}}}},hG=tq()("effect/Tracer/DisablePropagation",{defaultValue:z}),hQ=M(tL(),tC(pS,new pj),tC(hM,hD),tC(hL,new h$(eb(Math.random()))),tC(ha,hu()),tC(hJ,{[hB]:hB,span:(e,t,i,n,r,a)=>new hW(e,t,i,n,r,a),context:e=>e()})),hY=$(Symbol.for("effect/DefaultServices/currentServices"),()=>un(hQ)),hZ=e=>lL(t=>e(t.currentDefaultServices)),hX=e=>hZ(t=>e(t.unsafeMap.get(pS.key))),h0=hX(e=>e.currentTimeMillis),h1=e=>hZ(t=>e(t.unsafeMap.get(ha.key))),h2=e=>h1(t=>t.load(e));g=e=>e.next,hZ(e=>g(e.unsafeMap.get(hL.key)));let h3=e=>!e,h5=e=>l9(l7,t=>ps(e,cc(t))),h4=e=>cS(()=>aE(e.state)._tag===l_),h6=ts;class h7 extends h6{}let h8="Sequential",h9="Parallel",de={_tag:h8},dt=e=>e._tag===h8,di=e=>e._tag===h9,dn={_tag:h9},dr=e=>({_tag:"ParallelN",parallelism:e});function da(){return new dl(new Map)}let ds=Symbol.for("effect/FiberRefs");class dl{constructor(e){this[ds]=ds,this.locals=e}pipe(){return eK(this,arguments)}}let dc=(e,t,i,n=!1)=>{let r,a=t,s=i,o=n;for(;void 0===r;)if(iM(a)&&iM(s)){let e=iU(a)[0],t=iH(a),i=iU(s)[0],n=iU(s)[1],l=iH(s);e.startTimeMillis<i.startTimeMillis?(s=l,o=!0):e.startTimeMillis>i.startTimeMillis?a=t:e.id<i.id?(s=l,o=!0):e.id>i.id?a=t:r=[n,o]}else r=[e.initial,!0];return r},du=C(3,(e,t,i)=>{let n=new Map(e.locals);return i.locals.forEach((e,i)=>{let r=e[0][1];if(!e[0][0][eI](t)){if(!n.has(i)){if(eC(r,i.initial))return;n.set(i,[[t,i.join(i.initial,r)]]);return}let a=n.get(i),[s,o]=dc(i,a,e);if(o){let e=i.diff(s,r),o=a[0][1],l=i.join(o,i.patch(e)(o));if(!eC(o,l)){let e;let r=a[0][0];e=r[eI](t)?[[r,l],...a.slice(1)]:[[t,l],...a],n.set(i,e)}}}}),new dl(n)}),dp=C(2,(e,t)=>{let i=new Map;return dh(e,i,t),new dl(i)}),dh=(e,t,i)=>{e.locals.forEach((e,n)=>{let r=e[0][1],a=n.patch(n.fork)(r);eC(r,a)?t.set(n,e):t.set(n,[[i,a],...e])})},dd=C(2,(e,t)=>{let i=new Map(e.locals);return i.delete(t),new dl(i)}),df=C(2,(e,t)=>e.locals.has(t)?tg(iU(e.locals.get(t))[1]):t7()),dm=C(2,(e,t)=>M(df(e,t),t9(()=>t.initial))),dg=C(2,(e,{fiberId:t,fiberRef:i,value:n})=>{if(0===e.locals.size)return new dl(new Map([[i,[[t,n]]]]));let r=new Map(e.locals);return dx(r,t,i,n),new dl(r)}),dx=(e,t,i,n)=>{let r;let a=e.get(i)??[];if(iM(a)){let[e,i]=iU(a);if(e[eI](t)){if(eC(i,n))return;r=[[t,n],...a.slice(1)]}else r=[[t,n],...a]}else r=[[t,n]];e.set(i,r)},db=C(2,(e,{entries:t,forkAs:i})=>{if(0===e.locals.size)return new dl(new Map(t));let n=new Map(e.locals);return void 0!==i&&dh(e,n,i),t.forEach(([e,t])=>{1===t.length?dx(n,t[0][0],e,t[0][1]):t.forEach(([t,i])=>{dx(n,t,e,i)})}),new dl(n)}),dv="Empty",dy="Remove",dw="Update",d_="AndThen",dS={_tag:dv},dk=(e,t)=>{let i=new Map(e.locals),n=dS;for(let[e,r]of t.locals.entries()){let t=iU(r)[1],a=i.get(e);if(void 0!==a){let i=iU(a)[1];eC(i,t)||(n=dO({_tag:dw,fiberRef:e,patch:e.diff(i,t)})(n))}else n=dO({_tag:"Add",fiberRef:e,value:t})(n);i.delete(e)}for(let[e]of i.entries())n=dO({_tag:dy,fiberRef:e})(n);return n},dO=C(2,(e,t)=>({_tag:d_,first:e,second:t})),dE=C(3,(e,t,i)=>{let n=i,r=i6(e);for(;iM(r);){let e=iU(r),i=iH(r);switch(e._tag){case dv:r=i;break;case"Add":n=dg(n,{fiberId:t,fiberRef:e.fiberRef,value:e.value}),r=i;break;case dy:n=dd(n,e.fiberRef),r=i;break;case dw:{let a=dm(n,e.fiberRef);n=dg(n,{fiberId:t,fiberRef:e.fiberRef,value:e.fiberRef.patch(e.patch)(a)}),r=i;break}case d_:r=iR(e.first)(iR(e.second)(i))}}return n}),dF="effect/FiberStatus",dj=Symbol.for(dF),dI="Done",dC="Running",dR="Suspended",dT=ek(`${dF}-${dI}`);class dN{[ex](){return dT}[eI](e){return dD(e)&&e._tag===dI}constructor(){this[dj]=dj,this._tag=dI}}class dz{constructor(e){this[dj]=dj,this._tag=dC,this.runtimeFlags=e}[ex](){return M(eb(dF),ey(eb(this._tag)),ey(eb(this.runtimeFlags)),ej(this))}[eI](e){return dD(e)&&e._tag===dC&&this.runtimeFlags===e.runtimeFlags}}class dA{constructor(e,t){this[dj]=dj,this._tag=dR,this.runtimeFlags=e,this.blockingOn=t}[ex](){return M(eb(dF),ey(eb(this._tag)),ey(eb(this.runtimeFlags)),ey(eb(this.blockingOn)),ej(this))}[eI](e){return dD(e)&&e._tag===dR&&this.runtimeFlags===e.runtimeFlags&&eC(this.blockingOn,e.blockingOn)}}let dM=new dN,dD=e=>X(e,dj),dP=e=>new dz(e),dL=(e,t)=>new dA(e,t),d$=e=>e._tag===dI,dq=(O=M(ib,iv(e=>e.ordinal)),C(2,(e,t)=>1===O(e,t))),dU=e=>{switch(e){case"All":return cU;case"Debug":return cW;case"Error":return cJ;case"Fatal":return cB;case"Info":return cK;case"Trace":return cV;case"None":return cG;case"Warning":return cH}},dB=Symbol.for("effect/Micro"),dJ=Symbol.for("effect/Micro/MicroExit"),dH=Symbol.for("effect/Micro/MicroCause"),dK={_E:R};class dW extends globalThis.Error{constructor(e,t,i){let n,r,a;let s=`MicroCause.${e}`;if(t instanceof globalThis.Error){n=`(${s}) ${t.name}`;let e=(r=t.message).split("\n").length;a=t.stack?`(${s}) ${t.stack.split("\n").slice(0,e+3).join("\n")}`:`${n}: ${r}`}else n=s,r=eL(t,0),a=`${n}: ${r}`;i.length>0&&(a+=`
    ${i.join("\n    ")}`),super(r),this._tag=e,this.traces=i,this[dH]=dK,this.name=n,this.stack=a}pipe(){return eK(this,arguments)}toString(){return this.stack}[ez](){return this.stack}}class dV extends dW{constructor(e,t=[]){super("Fail",e,t),this.error=e}}let dG=(e,t=[])=>new dV(e,t);class dQ extends dW{constructor(e,t=[]){super("Die",e,t),this.defect=e}}let dY=(e,t=[])=>new dQ(e,t);class dZ extends dW{constructor(e=[]){super("Interrupt","interrupted",e)}}let dX=(e=[])=>new dZ(e),d0=e=>"Interrupt"===e._tag,d1=C(2,(e,t)=>{let i=[...e.traces,t];switch(e._tag){case"Die":return dY(e.defect,i);case"Interrupt":return dX(i);case"Fail":return dG(e.error,i)}}),d2=Symbol.for("effect/Micro/MicroFiber"),d3={_A:R,_E:R};class d5{constructor(e,t=!0){this._stack=[],this._observers=[],this.currentOpCount=0,this._interrupted=!1,this._yielded=void 0,this.context=e,this.interruptible=t,this[d2]=d3}getRef(e){return tN(this.context,e)}addObserver(e){return this._exit?(e(this._exit),A):(this._observers.push(e),()=>{let t=this._observers.indexOf(e);t>=0&&this._observers.splice(t,1)})}unsafeInterrupt(){!this._exit&&(this._interrupted=!0,this.interruptible&&this.evaluate(fC))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(void 0!==this._yielded){let e=this._yielded;this._yielded=void 0,e()}let t=this.runLoop(e);if(t===fn)return;let i=d4.interruptChildren&&d4.interruptChildren(this);if(void 0!==i)return this.evaluate(fk(i,()=>t));this._exit=t;for(let e=0;e<this._observers.length;e++)this._observers[e](t);this._observers.length=0}runLoop(e){let t=!1,i=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!t&&this.getRef(fq).shouldYield(this)){t=!0;let e=i;i=fk(ff,()=>e)}if((i=i[d9](this))===fn){let e=this._yielded;if(dJ in e)return this._yielded=void 0,e;return fn}}}catch(e){if(!X(i,d9))return fR(`MicroFiber.runLoop: Not a valid effect: ${String(i)}`);return fR(e)}}getCont(e){for(;;){let t=this._stack.pop();if(!t)return;let i=t[fi]&&t[fi](this);if(i)return{[e]:i};if(t[e])return t}}yieldWith(e){return this._yielded=e,fn}children(){return this._children??=new Set}}let d4=$("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0})),d6=e=>fd(()=>{for(let t of e)t.unsafeInterrupt();let t=e[Symbol.iterator](),i=fd(()=>{let e=t.next();for(;!e.done;){if(e.value.unsafePoll()){e=t.next();continue}let n=e.value;return fy(e=>{n.addObserver(t=>{e(i)})})}return fN});return i}),d7=Symbol.for("effect/Micro/identifier"),d8=Symbol.for("effect/Micro/args"),d9=Symbol.for("effect/Micro/evaluate"),fe=Symbol.for("effect/Micro/successCont"),ft=Symbol.for("effect/Micro/failureCont"),fi=Symbol.for("effect/Micro/ensureCont"),fn=Symbol.for("effect/Micro/Yield"),fr={...ti,_op:"Micro",[dB]:{_A:R,_E:R,_R:R},pipe(){return eK(this,arguments)},[Symbol.iterator](){return new el(new eh(this))},toJSON(){return{_id:"Micro",op:this[d7],...d8 in this?{args:this[d8]}:void 0}},toString(){return eM(this)},[ez](){return eM(this)}};function fa(e){return fR("Micro.evaluate: Not implemented")}let fs=e=>({...fr,[d7]:e.op,[d9]:e.eval??fa,[fe]:e.contA,[ft]:e.contE,[fi]:e.ensure}),fo=e=>{let t=fs(e);return function(){let i=Object.create(t);return i[d8]=!1===e.single?arguments:arguments[0],i}},fl=e=>{let t={...fs(e),[dJ]:dJ,_tag:e.op,get[e.prop](){return this[d8]},toJSON(){return{_id:"MicroExit",_tag:e.op,[e.prop]:this[d8]}},[eI](t){return fF(t)&&t._tag===e.op&&eC(this[d8],t[d8])},[ex](){return ej(this,ey(ek(e.op))(eb(this[d8])))}};return function(e){let i=Object.create(t);return i[d8]=e,i[fe]=void 0,i[ft]=void 0,i[fi]=void 0,i}},fc=fl({op:"Success",prop:"value",eval(e){let t=e.getCont(fe);return t?t[fe](this[d8],e):e.yieldWith(this)}}),fu=fl({op:"Failure",prop:"cause",eval(e){let t=e.getCont(ft);for(;d0(this[d8])&&t&&e.interruptible;)t=e.getCont(ft);return t?t[ft](this[d8],e):e.yieldWith(this)}}),fp=e=>fu(dG(e)),fh=fo({op:"Sync",eval(e){let t=this[d8](),i=e.getCont(fe);return i?i[fe](t,e):e.yieldWith(fj(t))}}),fd=fo({op:"Suspend",eval(e){return this[d8]()}}),ff=fo({op:"Yield",eval(e){let t=!1;return e.getRef(fq).scheduleTask(()=>{t||e.evaluate(fN)},this[d8]??0),e.yieldWith(()=>{t=!0})}})(0),fm=fc(void 0),fg=e=>fb(function(t,i){try{e.try(i).then(e=>t(fc(e)),i=>t(fp(e.catch(i))))}catch(i){t(fp(e.catch(i)))}},0!==e.try.length),fx=fo({op:"WithMicroFiber",eval(e){return this[d8](e)}}),fb=fo({op:"Async",single:!1,eval(e){let t=this[d8][0],i=!1,n=!1,r=this[d8][1]?new AbortController:void 0,a=t(t=>{i||(i=!0,n?e.evaluate(t):n=t)},r?.signal);return!1!==n?n:(n=!0,e._yielded=()=>{i=!0},void 0===r&&void 0===a||e._stack.push(fv(()=>(i=!0,r?.abort(),a??fN))),fn)}}),fv=fo({op:"AsyncFinalizer",ensure(e){e.interruptible&&(e.interruptible=!1,e._stack.push(fQ(!0)))},contE(e,t){return d0(e)?fk(this[d8](),()=>fu(e)):fu(e)}}),fy=e=>fb(e,e.length>=2),fw=(...e)=>fd(()=>f_(1===e.length?e[0]():e[1].call(e[0]))),f_=fo({op:"Iterator",contA(e,t){let i=this[d8].next(e);return i.done?fc(i.value):(t._stack.push(this),ed(i.value))},eval(e){return this[fe](void 0,e)}}),fS=e=>fH(e,{onFailure:fI,onSuccess:fj}),fk=C(2,(e,t)=>{let i=Object.create(fO);return i[d8]=e,i[fe]=t,i}),fO=fs({op:"OnSuccess",eval(e){return e._stack.push(this),this[d8]}}),fE=C(2,(e,t)=>fk(e,e=>fc(t(e)))),fF=e=>X(e,dJ),fj=fc,fI=fu,fC=fI(dX()),fR=e=>fI(dY(e)),fT=e=>"Failure"===e._tag,fN=fj(void 0),fz=e=>{for(let t of e)if("Failure"===t._tag)return t;return fN},fA="setImmediate"in globalThis?globalThis.setImmediate:e=>setTimeout(e,0);class fM{scheduleTask(e,t){this.tasks.push(e),this.running||(this.running=!0,fA(this.afterScheduled))}runTasks(){let e=this.tasks;this.tasks=[];for(let t=0,i=e.length;t<i;t++)e[t]()}shouldYield(e){return e.currentOpCount>=e.getRef(fL)}flush(){for(;this.tasks.length>0;)this.runTasks()}constructor(){this.tasks=[],this.running=!1,this.afterScheduled=()=>{this.running=!1,this.runTasks()}}}let fD=C(2,(e,t)=>fx(i=>{let n=i.context;return i.context=t(n),fW(e,()=>(i.context=n,fm))})),fP=C(2,(e,t)=>fD(e,tM(t)));class fL extends tq()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){}class f$ extends tq()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){}class fq extends tq()("effect/Micro/currentScheduler",{defaultValue:()=>new fM}){}let fU=function(){let e=globalThis.Error.stackTraceLimit;globalThis.Error.stackTraceLimit=2;let t=new globalThis.Error;globalThis.Error.stackTraceLimit=e;let i=e=>i=>fG(i,i=>fu(function(e,i){let n=t.stack;if(!n)return i;let r=n.split("\n")[2]?.trim().replace(/^at /,"");if(!r)return i;let a=r.match(/\((.*)\)$/);return d1(i,`at ${e} (${a?a[1]:r})`)}(e,i)));return 2==arguments.length?i(arguments[1])(arguments[0]):i(arguments[0])},fB=C(2,(e,t)=>{let i=Object.create(fJ);return i[d8]=e,i[fe]=t.onSuccess,i[ft]=t.onFailure,i}),fJ=fs({op:"OnSuccessAndFailure",eval(e){return e._stack.push(this),this[d8]}}),fH=null;class fK{constructor(){this.state={_tag:"Open",finalizers:new Set},this[null]=null}unsafeAddFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.add(e)}addFinalizer(e){return fd(()=>"Open"===this.state._tag?(this.state.finalizers.add(e),fm):e(this.state.exit))}unsafeRemoveFinalizer(e){"Open"===this.state._tag&&this.state.finalizers.delete(e)}close(e){return fd(()=>{if("Open"===this.state._tag){let t=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},fk(f0(t,t=>fS(t(e))),fz)}return fm})}get fork(){return fh(()=>{let e=new fK;if("Closed"===this.state._tag)return e.state=this.state,e;function t(t){return e.close(t)}return this.state.finalizers.add(t),e.unsafeAddFinalizer(e=>fh(()=>this.unsafeRemoveFinalizer(t))),e})}}let fW=C(2,(e,t)=>fZ(i=>fB(i(e),{onFailure:e=>fk(t(fI(e)),()=>fu(e)),onSuccess:e=>fk(t(fj(e)),()=>fc(e))}))),fV=C(3,(e,t,i)=>fW(e,e=>t(e)?i(e):fN)),fG=C(2,(e,t)=>fV(e,fT,e=>t(e.cause))),fQ=fo({op:"SetInterruptible",ensure(e){if(e.interruptible=this[d8],e._interrupted&&e.interruptible)return()=>fC}}),fY=e=>fx(t=>t.interruptible?e:(t.interruptible=!0,t._stack.push(fQ(!1)),t._interrupted)?fC:e),fZ=e=>fx(t=>t.interruptible?(t.interruptible=!1,t._stack.push(fQ(!0)),e(fY)):e(R)),fX=fo({op:"While",contA(e,t){return(this[d8].step(e),this[d8].while())?(t._stack.push(this),this[d8].body()):fN},eval(e){return this[d8].while()?(e._stack.push(this),this[d8].body()):fN}}),f0=(e,t,i)=>fx(n=>{let r=i?.concurrency==="inherit"?n.getRef(f$):i?.concurrency??1,a="unbounded"===r?Number.POSITIVE_INFINITY:Math.max(1,r),s=Arr.fromIterable(e),o=s.length;if(0===o)return i?.discard?fm:fc([]);let l=i?.discard?void 0:Array(o),c=0;return 1===a?(null)(fX({while:()=>c<s.length,body:()=>t(s[c],c),step:l?e=>l[c++]=e:e=>c++}),l):fy(e=>{let i;let r=new Set,u=0,p=0,h=!1,d=!1;return function f(){for(h=!0;u<a&&c<o;){let m=c,g=s[m];c++,u++;try{let s=f1(n,t(g,m),!0,!0);r.add(s),s.addObserver(t=>{r.delete(s),d||("Failure"===t._tag?void 0===i&&(i=t,o=c,r.forEach(e=>e.unsafeInterrupt())):void 0!==l&&(l[m]=t.value),p++,u--,p===o?e(i??fc(l)):!h&&u<a&&f())})}catch(e){i=fR(e),o=c,r.forEach(e=>e.unsafeInterrupt())}}h=!1}(),fd(()=>(d=!0,c=o,d6(r)))})}),f1=(e,t,i=!1,n=!1)=>{let r=new d5(e.context,e.interruptible);return n||(e.children().add(r),r.addObserver(()=>e.children().delete(r))),i?r.evaluate(t):e.getRef(fq).scheduleTask(()=>r.evaluate(t),0),r},f2=(e,t)=>{let i=new d5(fq.context(t?.scheduler??new fM));if(i.evaluate(e),t?.signal){if(t.signal.aborted)i.unsafeInterrupt();else{let e=()=>i.unsafeInterrupt();t.signal.addEventListener("abort",e,{once:!0}),i.addObserver(()=>t.signal.removeEventListener("abort",e))}}return i},f3=function(){class e extends globalThis.Error{}return Object.assign(e.prototype,fr,tn,{[d7]:"Failure",[d9](){return fp(this)},toString(){return this.message?`${this.name}: ${this.message}`:this.name},toJSON(){return{...this}},[ez](){let e=this.stack;return e?`${this.toString()}
${e.split("\n").slice(1).join("\n")}`:this.toString()}}),e}(),f5=class extends f3{constructor(e){super(),e&&Object.assign(this,e)}},f4=Symbol.for("effect/Readable"),f6=Symbol.for("effect/Ref"),f7={_A:e=>e};class f8 extends h7{static{n=f4}commit(){return this.get}constructor(e){super(),this[f6]=f7,this[n]=f4,this.ref=e,this.get=cS(()=>aE(this.ref))}modify(e){return cS(()=>{let t=aE(this.ref),[i,n]=e(t);return t!==n&&aF(n)(this.ref),i})}}let f9=e=>new f8(ak(e)),me=e=>cS(()=>f9(e)),mt=e=>e.get,mi=C(2,(e,t)=>e.modify(()=>[void 0,t])),mn=C(2,(e,t)=>e.modify(e=>[e,t])),mr=C(2,(e,t)=>e.modify(t)),ma=C(2,(e,t)=>e.modify(e=>[void 0,t(e)]));class ms{scheduleTask(e,t){let i;let n=this.buckets.length,r=0;for(;r<n;r++)if(this.buckets[r][0]<=t)i=this.buckets[r];else break;i&&i[0]===t?i[1].push(e):r===n?this.buckets.push([t,[e]]):this.buckets.splice(r,0,[t,[e]])}constructor(){this.buckets=[]}}class mo{constructor(e){this.running=!1,this.tasks=new ms,this.maxNextTickBeforeTimer=e}starveInternal(e){let t=this.tasks.buckets;for(let[e,i]of(this.tasks.buckets=[],t))for(let e=0;e<i.length;e++)i[e]();0===this.tasks.buckets.length?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(uo)&&e.getFiberRef(us)}scheduleTask(e,t){this.tasks.scheduleTask(e,t),this.running||(this.running=!0,this.starve())}}let ml=$(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new mo(2048));class mc{scheduleTask(e,t){this.deferred?ml.scheduleTask(e,t):this.tasks.scheduleTask(e,t)}shouldYield(e){return e.currentOpCount>e.getFiberRef(uo)&&e.getFiberRef(us)}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;for(let[t,i]of(this.tasks.buckets=[],e))for(let e=0;e<i.length;e++)i[e]()}this.deferred=!0}constructor(){this.tasks=new ms,this.deferred=!1}}let mu=$(Symbol.for("effect/FiberRef/currentScheduler"),()=>ue(ml)),mp=(e,t)=>({_tag:"Par",left:e,right:t}),mh=(e,t)=>({_tag:"Seq",left:e,right:t}),md=e=>{let t=se(e),i=a9();for(;;){let[e,n]=sr(t,[mw(),a9()],([e,t],i)=>{let[n,r]=mf(i);return[mS(e,n),st(t,r)]});if(i=mm(i,e),a6(n))return sa(i);t=n}throw Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},mf=e=>{let t=e,i=mw(),n=a9(),r=a9();for(;;)switch(t._tag){case"Empty":if(a6(n))return[i,r];t=n.head,n=n.tail;break;case"Par":n=a8(t.right,n),t=t.left;break;case"Seq":{let e=t.left,i=t.right;switch(e._tag){case"Empty":t=i;break;case"Par":{let n=e.left,r=e.right;t=mp(mh(n,i),mh(r,i));break}case"Seq":t=mh(e.left,mh(e.right,i));break;case"Single":t=e,r=a8(i,r)}break}case"Single":if(i=m_(i,t),a6(n))return[i,r];t=n.head,n=n.tail}throw Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},mm=(e,t)=>{if(a6(e))return se(mE(t));if(mk(t))return e;let i=mT(e.head),n=mO(t);return 1===i.length&&1===n.length&&eC(i[0],n[0])?a8(mR(e.head,mE(t)),e.tail):a8(mE(t),e)},mg=Symbol.for("effect/RequestBlock/Entry"),mx={_R:e=>e},mb=Symbol.for("effect/RequestBlock/RequestBlockParallel"),mv={_R:e=>e};class my{constructor(e){this[mb]=mv,this.map=e}}let mw=()=>new my(rW()),m_=(e,t)=>new my(r5(e.map,t.dataSource,e=>it(io(e,nR(t.blockedRequest)),()=>n_(t.blockedRequest)))),mS=(e,t)=>new my(r9(e.map,t.map,(e,t,i)=>rZ(e,i,t8(rG(e,i),{onNone:()=>t,onSome:e=>nM(t,e)})))),mk=e=>aY(e.map),mO=e=>Array.from(r0(e.map)),mE=e=>mC(r7(e.map,e=>n_(e))),mF=Symbol.for("effect/RequestBlock/RequestBlockSequential"),mj={_R:e=>e};class mI{constructor(e){this[mF]=mj,this.map=e}}let mC=e=>new mI(e),mR=(e,t)=>new mI(r9(t.map,e.map,(e,t,i)=>rZ(e,i,t8(rG(e,i),{onNone:()=>ny(),onSome:e=>nM(e,t)})))),mT=e=>Array.from(r0(e.map)),mN=e=>Array.from(e.map),mz=$(Symbol.for("effect/FiberRef/currentRequestMap"),()=>ue(new Map)),mA=(e,t,i,n)=>{switch(e){case void 0:return t();case"unbounded":return i();case"inherit":return c0(uh,e=>"unbounded"===e?i():e>1?n(e):t());default:return e>1?n(e):t()}},mM=(e,t,i)=>{switch(e){case void 0:return t();case"unbounded":return i();case"inherit":return c0(uh,e=>"unbounded"===e||e>1?i():t());default:return e>1?i():t()}},mD=e=>{let t=n9(e);return hX(e=>e.sleep(t))},mP=(e,t)=>({label:e,startTime:t}),mL=e=>t=>{let i=t.label.replace(/[\s="]/g,"_");return`${i}=${e-t.startTime}ms`},m$="effect/MetricLabel",mq=Symbol.for(m$);class mU{constructor(e,t){this[mq]=mq,this.key=e,this.value=t,this._hash=ek(m$+this.key+this.value)}[ex](){return this._hash}[eI](e){return mJ(e)&&this.key===e.key&&this.value===e.value}pipe(){return eK(this,arguments)}}let mB=(e,t)=>new mU(e,t),mJ=e=>X(e,mq),mH=C(e=>lP(e[0]),function(){let e=arguments;return c9(e[0],ul,"string"==typeof e[1]?rZ(e[1],e[2]):t=>Object.entries(e[1]).reduce((e,[t,i])=>rZ(e,t,i),t))}),mK=e=>ch(e,tg),mW=e=>{let t,i;return"function"==typeof e?t=e:(t=e.try,i=e.catch),cS(()=>{try{return t()}catch(e){throw lC(oJ(i?i(e):new uJ(e)))}})},mV=C(2,(e,t)=>cr(e,{onFailure:e=>{let i=t(e);switch(i._tag){case"None":return l4(e);case"Some":return i.value}},onSuccess:cw})),mG=C(3,(e,t,i)=>lG(e,ee(t),i)),mQ=C(2,(e,t)=>{let i;return lG(e,e=>(i??=Object.keys(t),X(e,"_tag")&&q(e._tag)&&i.includes(e._tag)),e=>t[e._tag](e))}),mY=e=>gs(e,m5,dk),mZ=e=>gs(e,cM(m5,cy),([e,t],[i,n])=>[dk(e,i),oC(t,n)]),mX=C(3,(e,t,i)=>l9(e,e=>ch(i(e),i=>Object.assign({},e,{[t]:i})))),m0=C(2,(e,t)=>ch(e,e=>({[t]:e}))),m1=((e,t)=>c_(()=>{let i;let n=e[Symbol.iterator](),r=[],a=cw(!1),s=0;for(;(i=n.next())&&!i.done;){let e=i.value,n=s++;a=l9(a,i=>i?(r.push(e),cw(!0)):t(e,n))}return ch(a,()=>r)}),C(3,(e,t,i)=>l9(e,e=>t(e)?cw(e):i(e)))),m2=C(2,(e,t)=>ca(e,{onFailure:e=>cw(t.onFailure(e)),onSuccess:e=>cw(t.onSuccess(e))})),m3=e=>{let t=l9(l9(e,()=>cA()),()=>t);return t},m5=lL(e=>cw(e.getFiberRefs())),m4=e=>(...t)=>{let i;let n=ii(e);for(let e=0,n=t.length;e<n;e++){let n=t[e];oG(n)&&(i=void 0!==i?oV(i,n):n,t=[...t.slice(0,e),...t.slice(e+1)],e--)}return void 0===i&&(i=oB),lL(e=>(e.log(t,i,n),cI))},m6=m4(cW),m7=m4(cJ),m8=C(2,(e,t)=>l9(h0,i=>c9(e,uu,si(mP(t,i))))),m9=C(2,(e,t)=>cr(e,{onFailure:e=>l6(()=>t(e)),onSuccess:cw})),ge=e=>ch(e,e=>!e),gt=e=>ch(me(!0),t=>lU(cR(e,mn(t,!1)))),gi=e=>gh((t,i)=>M(e,dE(t,i))),gn=C(3,(e,t,i)=>pm(n=>pg(e,tC(n,t,i)))),gr=C(3,(e,t,i)=>iF(e).reduce((e,t,n)=>l9(e,e=>i(e,t,n)),cw(t))),ga=cw(t7()),gs=C(3,(e,t,i)=>l9(t,n=>l9(e,e=>ch(t,t=>[i(n,t),e])))),go=C(2,(e,{onFailure:t,onSuccess:i})=>cr(e,{onFailure:e=>{let i=o5(e);switch(i._tag){case"Left":return cP(t(i.left),l4(e));case"Right":return l4(e)}},onSuccess:e=>lq(i(e),e)})),gl=C(2,(e,t)=>cr(e,{onFailure:e=>{let i=o5(e);switch(i._tag){case"Left":return cP(t(i.left),l4(e));case"Right":return l4(e)}},onSuccess:cw})),gc=C(2,(e,t)=>cr(e,{onFailure:e=>cP(t(e),l4(e)),onSuccess:cw})),gu=e=>{let t,i;return("function"==typeof e?t=e:(t=e.try,i=e.catch),t.length>=1)?lK((e,n)=>{try{t(n).then(t=>e(u6(t)),t=>e(i?l5(()=>i(t)):l3(new uJ(t))))}catch(t){e(i?l5(()=>i(t)):l3(new uJ(t)))}}):lK(e=>{try{t().then(t=>e(u6(t)),t=>e(i?l5(()=>i(t)):l3(new uJ(t))))}catch(t){e(i?l5(()=>i(t)):l3(new uJ(t)))}})},gp=C(2,(e,t)=>l9(e,e=>mW({try:()=>t.try(e),catch:t.catch}))),gh=e=>lL(t=>(t.setFiberRefs(e(t.id(),t.getFiberRefs())),cI)),gd=C(2,(e,t)=>c_(()=>t()?ch(e,tg):cw(t7()))),gf=BigInt(0),gm=il(e=>tz(e.context,hG)?"Span"===e._tag?gm(e.parent):t7():tg(e)),gg=(e,t,i)=>{let n;let r=!e.getFiberRef(ub)||i.context&&tz(i.context,hG),a=e.getFiberRef(ua),s=i.parent?tg(i.parent):i.root?t7():gm(tA(a,hH));if(r)n=pw({name:t,parent:s,context:tC(i.context??tL(),hG,!0)});else{let r=e.getFiberRef(hY),a=tz(r,hJ),o=tz(r,pS),l=e.getFiberRef(uv),c=e.getFiberRefs(),u=df(c,uy),p=df(c,uw),h="Some"===p._tag?void 0!==i.links?[...nO(p.value),...i.links??[]]:nO(p.value):i.links??i4();n=a.span(t,s,i.context??tL(),h,l?o.unsafeCurrentTimeNanos():gf,i.kind??"internal"),"Some"===u._tag&&r8(u.value,(e,t)=>n.attribute(t,e)),void 0!==i.attributes&&Object.entries(i.attributes).forEach(([e,t])=>n.attribute(e,t))}return"function"==typeof i.captureStackTrace&&lx.set(n,i.captureStackTrace),n},gx=(e,t,i,n)=>cS(()=>{"Ended"!==e.status._tag&&(uK(t)&&lx.has(e)&&e.attribute("code.stacktrace",lx.get(e)()),e.end(n?i.unsafeCurrentTimeNanos():gf,t))}),gb=(e,...t)=>{let i=hV(1===t.length?void 0:t[0]),n=t[t.length-1];return lL(t=>{let r=gg(t,e,i),a=t.getFiberRef(uv),s=tz(t.getFiberRef(hY),pS);return cm(n(r),e=>gx(r,e,s,a))})},gv=C(2,(e,t)=>gn(e,hH,t)),gy=e=>M(e,u0(R)),gw="InterruptSignal",g_="Stateful",gS="Resume",gk="YieldNow",gO=e=>({_tag:gw,cause:e}),gE=e=>({_tag:g_,onFiber:e}),gF=e=>({_tag:gS,effect:e}),gj=()=>({_tag:gk}),gI=Symbol.for("effect/FiberScope");class gC{add(e,t){this.roots.add(t),t.addObserver(()=>{this.roots.delete(t)})}constructor(){this[gI]=gI,this.fiberId=aK,this.roots=new Set}}class gR{constructor(e,t){this[gI]=gI,this.fiberId=e,this.parent=t}add(e,t){this.parent.tell(gE(e=>{e.addChild(t),t.addObserver(()=>{e.removeChild(t)})}))}}let gT=e=>new gR(e.id(),e),gN=$(Symbol.for("effect/FiberScope/Global"),()=>new gC),gz=Symbol.for("effect/Fiber"),gA={_E:e=>e,_A:e=>e},gM={[gz]:gA,pipe(){return eK(this,arguments)}},gD=Symbol.for("effect/Fiber"),gP=e=>e.await,gL=((e,t)=>e.interruptAsFork(t),e=>cD(ci(e.await),e.inheritAll)),g$=((e,t)=>g$(e,e=>cS(()=>t(e))),C(2,(e,t)=>({...tr,commit(){return gL(this)},...gM,id:()=>e.id(),await:l9(e.await,u1(t)),children:e.children,inheritAll:e.inheritAll,poll:l9(e.poll,e=>{switch(e._tag){case"None":return cw(t7());case"Some":return M(u1(e.value,t),ch(tg))}}),interruptAsFork:t=>e.interruptAsFork(t)})));(e,t)=>({...tr,commit(){return gL(this)},...gM,id:()=>aq(e.id(),t.id()),await:cL(e.await,t.await,(e,t)=>uW(e)?e:t),children:e.children,inheritAll:cP(t.inheritAll,e.inheritAll),poll:cL(e.poll,t.poll,(e,t)=>{switch(e._tag){case"None":return t7();case"Some":return uW(e.value)?e:t}}),interruptAsFork:i=>M(cq(e,i),cP(M(t,cq(i))),lU)});let gq="effect/FiberCurrent",gU=Symbol.for("effect/Logger"),gB={_Message:e=>e,_Output:e=>e},gJ=e=>({[gU]:gB,log:e,pipe(){return eK(this,arguments)}}),gH=C(2,(e,t)=>gJ(i=>e.log({...i,message:t(i.message)}))),gK=C(2,(e,t)=>gJ(i=>e.log(t(i)))),gW=C(2,(e,t)=>gJ(i=>t(i.logLevel)?tg(e.log(i)):t7())),gV=C(2,(e,t)=>gJ(i=>t(e.log(i)))),gG=e=>({[gU]:gB,log:({message:t})=>e(t),pipe(){return eK(this,arguments)}}),gQ=C(2,(e,t)=>gJ(i=>[e.log(i),t.log(i)])),gY=C(2,(e,t)=>gV(gQ(e,t),e=>e[0])),gZ=C(2,(e,t)=>gV(gQ(e,t),e=>e[1])),gX=gJ(({annotations:e,cause:t,date:i,fiberId:n,logLevel:r,message:a,spans:s})=>{let o=i.getTime(),l=`timestamp=${i.toISOString()} level=${r.label} fiber=${aJ(n)}`,c=ij(a);for(let e=0;e<c.length;e++){let t=eL(c[e]);t.length>0&&(l+=" message=",l=g2(t,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=g2(lh(t,{renderErrorCause:!0}),l)),a7(s)){l+=" ";let e=!0;for(let t of s)e?e=!1:l+=" ",l+=M(t,mL(o))}if(r1(e)>0){l+=" ";let t=!0;for(let[i,n]of e)t?t=!1:l+=" ",l+=g7(i),l+="=",l=g2(eL(n),l)}return l}),g0=e=>`"${e.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,g1=/^[^\s"=]+$/,g2=(e,t)=>t+(e.match(g1)?e:g0(e)),g3=gJ(({annotations:e,cause:t,date:i,fiberId:n,logLevel:r,message:a,spans:s})=>{let o=i.getTime(),l=`timestamp=${i.toISOString()} level=${r.label} fiber=${aJ(n)}`,c=ij(a);for(let e=0;e<c.length;e++){let t=eL(c[e],0);t.length>0&&(l+=" message=",l=g9(t,l))}if(null!=t&&"Empty"!==t._tag&&(l+=" cause=",l=g9(lh(t,{renderErrorCause:!0}),l)),a7(s)){l+=" ";let e=!0;for(let t of s)e?e=!1:l+=" ",l+=M(t,xe(o))}if(r1(e)>0){l+=" ";let t=!0;for(let[i,n]of e)t?t=!1:l+=" ",l+=g7(i),l+="=",l=g9(eL(n,0),l)}return l}),g5=gJ(({annotations:e,cause:t,date:i,fiberId:n,logLevel:r,message:a,spans:s})=>{let o=i.getTime(),l={},c={};if(r1(e)>0)for(let[t,i]of e)l[t]=g4(i);if(a7(s))for(let e of s)c[e.label]=o-e.startTime;let u=ij(a);return{message:1===u.length?g4(u[0]):u.map(g4),logLevel:r.label,timestamp:i.toISOString(),cause:oY(t)?void 0:lh(t,{renderErrorCause:!0}),annotations:l,spans:c,fiberId:aJ(n)}}),g4=e=>{switch(typeof e){case"bigint":case"function":case"symbol":return String(e);default:return eA(e)}},g6=gV(g5,e$),g7=e=>e.replace(/[\s="]/g,"_"),g8=e=>JSON.stringify(e),g9=(e,t)=>t+(e.match(g1)?e:g8(e)),xe=e=>t=>{let i=g7(t.label);return`${i}=${e-t.startTime}ms`},xt=(e,...t)=>{let i="";for(let e=0;e<t.length;e++)i+=`\x1b[${t[e]}m`;return i+e+"\x1b[0m"},xi=(e,...t)=>e,xn={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},xr={None:[],All:[],Trace:[xn.gray],Debug:[xn.blue],Info:[xn.green],Warning:[xn.yellow],Error:[xn.red],Fatal:[xn.bgBrightRed,xn.black]},xa={None:"",All:"",Trace:"color:gray",Debug:"color:blue",Info:"color:green",Warning:"color:orange",Error:"color:red",Fatal:"background-color:red;color:white"},xs=e=>`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}.${e.getMilliseconds().toString().padStart(3,"0")}`,xo="object"==typeof process&&null!==process&&"object"==typeof process.stdout&&null!==process.stdout,xl=xo&&!0===process.stdout.isTTY,xc=xo||"Deno"in globalThis,xu=e=>{let t=e?.mode??"auto",i="browser"===("auto"===t?xc?"tty":"browser":t),n="boolean"==typeof e?.colors?e.colors:xl||i,r=e?.formatDate??xs;return i?xh({colors:n,formatDate:r}):xp({colors:n,formatDate:r,stderr:e?.stderr===!0})},xp=e=>{let t="object"==typeof process&&"isBun"in process&&!0===process.isBun,i=e.colors&&xl?xt:xi;return gJ(({annotations:n,cause:r,context:a,date:s,fiberId:o,logLevel:l,message:c,spans:u})=>{let p=tz(dm(a,hY),hM).unsafe,h=!0===e.stderr?p.error:p.log,d=ij(c),f=i(`[${e.formatDate(s)}]`,xn.white)+` ${i(l.label,...xr[l._tag])}`+` (${aJ(o)})`;if(a7(u)){let e=xe(s.getTime());for(let t of u)f+=" "+e(t)}f+=":";let m=0;if(d.length>0){let e=g4(d[0]);"string"==typeof e&&(f+=" "+i(e,xn.bold,xn.cyan),m++)}if(h(f),t||p.group(),oY(r)||h(lh(r,{renderErrorCause:!0})),m<d.length)for(;m<d.length;m++)h(eH(d[m]));if(r1(n)>0)for(let[e,t]of n)h(i(`${e}:`,xn.bold,xn.white),eH(t));t||p.groupEnd()})},xh=e=>{let t=e.colors?"%c":"";return gJ(({annotations:i,cause:n,context:r,date:a,fiberId:s,logLevel:o,message:l,spans:c})=>{let u=tz(dm(r,hY),hM).unsafe,p=ij(l),h=`${t}[${e.formatDate(a)}]`,d=[];if(e.colors&&d.push("color:gray"),h+=` ${t}${o.label}${t} (${aJ(s)})`,e.colors&&d.push(xa[o._tag],""),a7(c)){let e=xe(a.getTime());for(let t of c)h+=" "+e(t)}h+=":";let f=0;if(p.length>0){let i=g4(p[0]);"string"==typeof i&&(h+=` ${t}${i}`,e.colors&&d.push("color:deepskyblue"),f++)}if(u.groupCollapsed(h,...d),oY(n)||u.error(lh(n,{renderErrorCause:!0})),f<p.length)for(;f<p.length;f++)u.log(eH(p[f]));if(r1(i)>0)for(let[t,n]of i){let i=eH(n);e.colors?u.log(`%c${t}:`,"color:gray",i):u.log(`${t}:`,i)}u.groupEnd()})},xd=$("effect/Logger/prettyLoggerDefault",()=>xu()),xf=Symbol.for("effect/MetricKeyType"),xm="effect/MetricKeyType/Counter",xg=Symbol.for(xm),xx=Symbol.for("effect/MetricKeyType/Frequency"),xb=Symbol.for("effect/MetricKeyType/Gauge"),xv="effect/MetricKeyType/Histogram",xy=Symbol.for(xv),xw=Symbol.for("effect/MetricKeyType/Summary"),x_={_In:e=>e,_Out:e=>e};class xS{constructor(e,t){this[xf]=x_,this[xg]=xg,this.incremental=e,this.bigint=t,this._hash=ek(xm)}[ex](){return this._hash}[eI](e){return xE(e)}pipe(){return eK(this,arguments)}}class xk{constructor(e){this[xf]=x_,this[xy]=xy,this.boundaries=e,this._hash=M(ek(xv),ey(eb(this.boundaries)))}[ex](){return this._hash}[eI](e){return xI(e)&&eC(this.boundaries,e.boundaries)}pipe(){return eK(this,arguments)}}let xO=e=>new xS(e?.incremental??!1,e?.bigint??!1),xE=e=>X(e,xg),xF=e=>X(e,xx),xj=e=>X(e,xb),xI=e=>X(e,xy),xC=e=>X(e,xw),xR=Symbol.for("effect/MetricKey"),xT={_Type:e=>e},xN=t4(eC);class xz{constructor(e,t,i,n=[]){this[xR]=xT,this.name=e,this.keyType=t,this.description=i,this.tags=n,this._hash=M(ek(this.name+this.description),ey(eb(this.keyType)),ey(eF(this.tags)))}[ex](){return this._hash}[eI](e){return xA(e)&&this.name===e.name&&eC(this.keyType,e.keyType)&&eC(this.description,e.description)&&xN(this.tags,e.tags)}pipe(){return eK(this,arguments)}}let xA=e=>X(e,xR),xM=(e,t)=>new xz(e,xO(t),ii(t?.description)),xD=C(2,(e,t)=>0===t.length?e:new xz(e.name,e.keyType,e.description,i5(e.tags,t))),xP=Symbol.for("effect/MutableHashMap"),xL={[xP]:xP,[Symbol.iterator](){return new x$(this)},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(eA)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}};class x${constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(void 0!==this.bucketIterator)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new xq(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new x$(this.self)}}class xq{constructor(e){this.backing=e}next(){if(void 0===this.currentBucket){let e=this.backing.next();if(e.done)return e;this.currentBucket=e.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}let xU=()=>{let e=Object.create(xL);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},xB=C(2,(e,t)=>{if(!1===eT(t))return e.referential.has(t)?tg(e.referential.get(t)):t7();let i=t[ex](),n=e.buckets.get(i);return void 0===n?t7():xJ(e,n,t)}),xJ=(e,t,i,n=!1)=>{for(let r=0,a=t.length;r<a;r++)if(i[eI](t[r][0])){let i=t[r][1];return n&&(t.splice(r,1),e.bucketsSize--),tg(i)}return t7()},xH=C(2,(e,t)=>tf(xB(e,t))),xK=C(3,(e,t,i)=>{if(!1===eT(t))return e.referential.set(t,i),e;let n=t[ex](),r=e.buckets.get(n);return void 0===r?e.buckets.set(n,[[t,i]]):(xW(e,r,t),r.push([t,i])),e.bucketsSize++,e}),xW=(e,t,i)=>{for(let n=0,r=t.length;n<r;n++)if(i[eI](t[n][0])){t.splice(n,1),e.bucketsSize--;return}},xV=C(2,(e,t)=>{if(!1===eT(t))return e.referential.delete(t),e;let i=t[ex](),n=e.buckets.get(i);return void 0===n||(xW(e,n,t),0===n.length&&e.buckets.delete(i)),e}),xG=e=>e.referential.size+e.bucketsSize,xQ=Symbol.for("effect/MetricState"),xY="effect/MetricState/Counter",xZ=Symbol.for(xY),xX="effect/MetricState/Frequency",x0=Symbol.for(xX),x1="effect/MetricState/Gauge",x2=Symbol.for(x1),x3="effect/MetricState/Histogram",x5=Symbol.for(x3),x4="effect/MetricState/Summary",x6=Symbol.for(x4),x7={_A:e=>e};class x8{constructor(e){this[xQ]=x7,this[xZ]=xZ,this.count=e}[ex](){return M(eb(xY),ey(eb(this.count)),ej(this))}[eI](e){return bc(e)&&this.count===e.count}pipe(){return eK(this,arguments)}}let x9=t4(eC);class be{constructor(e){this[xQ]=x7,this[x0]=x0,this.occurrences=e}[ex](){return M(ek(xX),ey(eF(iF(this.occurrences.entries()))),ej(this))}[eI](e){return bu(e)&&x9(iF(this.occurrences.entries()),iF(e.occurrences.entries()))}pipe(){return eK(this,arguments)}}class bt{constructor(e){this[xQ]=x7,this[x2]=x2,this.value=e}[ex](){return M(eb(x1),ey(eb(this.value)),ej(this))}[eI](e){return bp(e)&&this.value===e.value}pipe(){return eK(this,arguments)}}class bi{constructor(e,t,i,n,r){this[xQ]=x7,this[x5]=x5,this.buckets=e,this.count=t,this.min=i,this.max=n,this.sum=r}[ex](){return M(eb(x3),ey(eb(this.buckets)),ey(eb(this.count)),ey(eb(this.min)),ey(eb(this.max)),ey(eb(this.sum)),ej(this))}[eI](e){return bh(e)&&eC(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eK(this,arguments)}}class bn{constructor(e,t,i,n,r,a){this[xQ]=x7,this[x6]=x6,this.error=e,this.quantiles=t,this.count=i,this.min=n,this.max=r,this.sum=a}[ex](){return M(eb(x4),ey(eb(this.error)),ey(eb(this.quantiles)),ey(eb(this.count)),ey(eb(this.min)),ey(eb(this.max)),ey(eb(this.sum)),ej(this))}[eI](e){return bd(e)&&this.error===e.error&&eC(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return eK(this,arguments)}}let br=e=>new x8(e),ba=e=>new be(e),bs=e=>new bt(e),bo=e=>new bi(e.buckets,e.count,e.min,e.max,e.sum),bl=e=>new bn(e.error,e.quantiles,e.count,e.min,e.max,e.sum),bc=e=>X(e,xZ),bu=e=>X(e,x0),bp=e=>X(e,x2),bh=e=>X(e,x5),bd=e=>X(e,x6),bf=Symbol.for("effect/MetricHook"),bm={_In:e=>e,_Out:e=>e},bg=e=>({[bf]:bm,pipe(){return eK(this,arguments)},...e}),bx=BigInt(0),bb=e=>{let t=e.keyType.bigint?bx:0,i=e.keyType.incremental?e.keyType.bigint?e=>e>=bx:e=>e>=0:e=>!0,n=e=>{i(e)&&(t+=e)};return bg({get:()=>br(t),update:n,modify:n})},bv=e=>{let t=new Map;for(let i of e.keyType.preregisteredWords)t.set(i,0);let i=e=>{let i=t.get(e)??0;t.set(e,i+1)};return bg({get:()=>ba(t),update:i,modify:i})},by=(e,t)=>{let i=t;return bg({get:()=>bs(i),update:e=>{i=e},modify:e=>{i+=e}})},bw=e=>{let t=e.keyType.boundaries.values,i=t.length,n=new Uint32Array(i+1),r=new Float32Array(i),a=0,s=0,o=Number.MAX_VALUE,l=Number.MIN_VALUE;M(t,iQ(ib),i7((e,t)=>{r[t]=e}));let c=e=>{let t=0,c=i;for(;t!==c;){let i=Math.floor(t+(c-t)/2);e<=r[i]?c=i:t=i,c===t+1&&(e<=r[t]?c=t:t=c)}n[t]=n[t]+1,a+=1,s+=e,e<o&&(o=e),e>l&&(l=e)},u=()=>{let e=iO(i),t=0;for(let a=0;a<i;a++){let i=r[a];t+=n[a],e[a]=[i,t]}return e};return bg({get:()=>bo({buckets:u(),count:a,min:o,max:l,sum:s}),update:c,modify:c})},b_=e=>{let{error:t,maxAge:i,maxSize:n,quantiles:r}=e.keyType,a=M(r,iQ(ib)),s=iO(n),o=0,l=0,c=0,u=Number.MAX_VALUE,p=Number.MIN_VALUE,h=e=>{let r=[],o=0;for(;o!==n-1;){let t=s[o];if(null!=t){let[n,a]=t,s=rl(e-n);r_(s,ra)&&s<=i&&r.push(a)}o+=1}return bS(t,a,iQ(r,ib))},d=(e,t)=>{n>0&&(s[(o+=1)%n]=[t,e]),l+=1,c+=e,e<u&&(u=e),e>p&&(p=e)};return bg({get:()=>bl({error:t,quantiles:h(Date.now()),count:l,min:u,max:p,sum:c}),update:([e,t])=>d(e,t),modify:([e,t])=>d(e,t)})},bS=(e,t,i)=>{let n=i.length;if(!iM(t))return i4();let r=t[0],a=t.slice(1),s=bk(e,n,t7(),0,r,i),o=i6(s);return a.forEach(t=>{o.push(bk(e,n,s.value,s.consumed,t,s.rest))}),i7(o,e=>[e.quantile,e.value])},bk=(e,t,i,n,r,a)=>{let s=e,o=t,l=i,c=n,u=r,p=a,h=e,d=t,f=i,m=n,g=r,x=a;for(;;){if(!iM(p))return{quantile:u,value:t7(),consumed:c,rest:[]};if(1===u)return{quantile:u,value:tg(iJ(p)),consumed:c+p.length,rest:[]};let e=iW(p,e=>e<=p[0]),t=u*o,i=s/2*t,n=c+e[0].length,r=Math.abs(n-t);if(n<t-i){h=s,d=o,f=iq(p),m=n,g=u,x=e[1],s=h,o=d,l=f,c=m,u=g,p=x;continue}if(n>t+i)return{quantile:u,value:l,consumed:c,rest:p};switch(l._tag){case"None":h=s,d=o,f=iq(p),m=n,g=u,x=e[1],s=h,o=d,l=f,c=m,u=g,p=x;continue;case"Some":if(r<Math.abs(t-l.value)){h=s,d=o,f=iq(p),m=n,g=u,x=e[1],s=h,o=d,l=f,c=m,u=g,p=x;continue}return{quantile:u,value:tg(l.value),consumed:c,rest:p}}}throw Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},bO=Symbol.for("effect/MetricPair"),bE={_Type:e=>e},bF=(e,t)=>({[bO]:bE,metricKey:e,metricState:t,pipe(){return eK(this,arguments)}}),bj=Symbol.for("effect/MetricRegistry");class bI{snapshot(){let e=[];for(let[t,i]of this.map)e.push(bF(t,i.get()));return e}get(e){let t=M(this.map,xB(e),ir);if(null!=t)return t;if(xE(e.keyType))return this.getCounter(e);if(xj(e.keyType))return this.getGauge(e);if(xF(e.keyType))return this.getFrequency(e);if(xI(e.keyType))return this.getHistogram(e);if(xC(e.keyType))return this.getSummary(e);throw Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}getCounter(e){let t=M(this.map,xB(e),ir);if(null==t){let i=bb(e);M(this.map,xH(e))||M(this.map,xK(e,i)),t=i}return t}getFrequency(e){let t=M(this.map,xB(e),ir);if(null==t){let i=bv(e);M(this.map,xH(e))||M(this.map,xK(e,i)),t=i}return t}getGauge(e){let t=M(this.map,xB(e),ir);if(null==t){let i=by(e,e.keyType.bigint?BigInt(0):0);M(this.map,xH(e))||M(this.map,xK(e,i)),t=i}return t}getHistogram(e){let t=M(this.map,xB(e),ir);if(null==t){let i=bw(e);M(this.map,xH(e))||M(this.map,xK(e,i)),t=i}return t}getSummary(e){let t=M(this.map,xB(e),ir);if(null==t){let i=b_(e);M(this.map,xH(e))||M(this.map,xK(e,i)),t=i}return t}constructor(){this[bj]=bj,this.map=xU()}}let bC=()=>new bI,bR=Symbol.for("effect/Metric"),bT={_Type:e=>e,_In:e=>e,_Out:e=>e},bN=$(Symbol.for("effect/Metric/globalMetricRegistry"),()=>bC()),bz=function(e,t,i,n){let r=Object.assign(e=>ck(e,e=>bL(r,e)),{[bR]:bT,keyType:e,unsafeUpdate:t,unsafeValue:i,unsafeModify:n,register(){return this.unsafeValue([]),this},pipe(){return eK(this,arguments)}});return r},bA=(e,t)=>bM(xM(e,t)),bM=e=>{let t;let i=new WeakMap,n=n=>{if(0===n.length)return void 0!==t?t:t=bN.get(e);let r=i.get(n);return void 0!==r||(r=bN.get(xD(e,n)),i.set(n,r)),r};return bz(e.keyType,(e,t)=>n(t).update(e),e=>n(e).get(),(e,t)=>n(t).modify(e))},bD=C(3,(e,t,i)=>bP(e,[mB(t,i)])),bP=C(2,(e,t)=>bz(e.keyType,(i,n)=>e.unsafeUpdate(i,i5(t,n)),i=>e.unsafeValue(i5(t,i)),(i,n)=>e.unsafeModify(i,i5(t,n)))),bL=C(2,(e,t)=>c0(um,i=>cS(()=>e.unsafeUpdate(t,i)))),b$="effect/MetricBoundaries",bq=Symbol.for(b$);class bU{constructor(e){this[bq]=bq,this.values=e,this._hash=M(ek(b$),ey(eF(this.values)))}[ex](){return this._hash}[eI](e){return bB(e)&&eC(this.values,e.values)}pipe(){return eK(this,arguments)}}let bB=e=>X(e,bq),bJ=e=>new bU(M(e,iN(n_(Number.POSITIVE_INFINITY)),nu)),bH=C(2,(e,t)=>c0(mz,i=>cS(()=>{if(i.has(e)){let n=i.get(e);n.state.completed||(n.state.completed=!0,pp(n.result,t))}})));class bK{addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}constructor(){this.count=0,this.observers=new Set,this.interrupted=!1}}let bW=Symbol.for("effect/Supervisor"),bV={_T:e=>e};class bG{constructor(e,t){this[bW]=bV,this.underlying=e,this.value0=t}get value(){return this.value0}onStart(e,t,i,n){this.underlying.onStart(e,t,i,n)}onEnd(e,t){this.underlying.onEnd(e,t)}onEffect(e,t){this.underlying.onEffect(e,t)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new bG(this,M(this.value,ch(e)))}zip(e){return new bQ(this,e)}}class bQ{constructor(e,t){this._tag="Zip",this[bW]=bV,this.left=e,this.right=t}get value(){return cM(this.left.value,this.right.value)}onStart(e,t,i,n){this.left.onStart(e,t,i,n),this.right.onStart(e,t,i,n)}onEnd(e,t){this.left.onEnd(e,t),this.right.onEnd(e,t)}onEffect(e,t){this.left.onEffect(e,t),this.right.onEffect(e,t)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new bG(this,M(this.value,ch(e)))}zip(e){return new bQ(this,e)}}let bY=e=>X(e,bW)&&ee(e,"Zip");class bZ{get value(){return cS(()=>Array.from(this.fibers))}onStart(e,t,i,n){this.fibers.add(n)}onEnd(e,t){this.fibers.delete(t)}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new bG(this,M(this.value,ch(e)))}zip(e){return new bQ(this,e)}onRun(e,t){return e()}constructor(){this[bW]=bV,this.fibers=new Set}}class bX{constructor(e){this[bW]=bV,this.effect=e}get value(){return this.effect}onStart(e,t,i,n){}onEnd(e,t){}onEffect(e,t){}onSuspend(e){}onResume(e){}map(e){return new bG(this,M(this.value,ch(e)))}zip(e){return new bQ(this,e)}onRun(e,t){return e()}}let b0=cS(()=>new bZ),b1=e=>new bX(e),b2=$("effect/Supervisor/none",()=>b1(cI)),b3="Empty",b5="AddSupervisor",b4="RemoveSupervisor",b6="AndThen",b7={_tag:b3},b8=(e,t)=>({_tag:b6,first:e,second:t}),b9=(e,t)=>{let i=e,n=t;for(;nU(n);){let e=nJ(n);switch(e._tag){case b3:n=nG(n);break;case b5:i=i.zip(e.supervisor),n=nG(n);break;case b4:i=ve(i,e.supervisor),n=nG(n);break;case b6:n=nT(e.first)(nT(e.second)(nG(n)))}}return i},ve=(e,t)=>eC(e,t)?b2:bY(e)?ve(e.left,t).zip(ve(e.right,t)):e,vt=e=>eC(e,b2)?as():bY(e)?M(vt(e.left),ag(vt(e.right))):ay(e),vi=ol({empty:b7,patch:(e,t)=>b9(t,n_(e)),combine:b8,diff:(e,t)=>{if(eC(e,t))return b7;let i=vt(e),n=vt(t),r=M(n,am(i),ab(b7,(e,t)=>b8(e,{_tag:b5,supervisor:t}))),a=M(i,am(n),ab(b7,(e,t)=>b8(e,{_tag:b4,supervisor:t})));return b8(r,a)}}),vn=bA("effect_fiber_started",{incremental:!0}),vr=bA("effect_fiber_active"),va=bA("effect_fiber_successes",{incremental:!0}),vs=bA("effect_fiber_failures",{incremental:!0}),vo=bD(bM(new xz("effect_fiber_lifetimes",new xk((e=>M(iE(e.count-1,t=>e.start*Math.pow(e.factor,t)),nj,bJ))({start:.5,factor:2,count:35})),ii(x))),"time_unit","milliseconds"),vl="Continue",vc="Yield",vu={_E:e=>e,_A:e=>e},vp=e=>{throw Error(`BUG: FiberRuntime - ${eL(e)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},vh=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vd=$("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),vf={[eY]:(e,t,i)=>em(()=>t.effect_instruction_i1(i)),OnStep:(e,t,i)=>u6(u6(i)),[eZ]:(e,t,i)=>em(()=>t.effect_instruction_i2(i)),[e6]:(e,t,i)=>(e.patchRuntimeFlags(e.currentRuntimeFlags,t.patch),oS(e.currentRuntimeFlags)&&e.isInterrupted())?uX(e.getInterruptedCause()):u6(i),[e2]:(e,t,i)=>(em(()=>t.effect_instruction_i2(i)),em(()=>t.effect_instruction_i0()))?(e.pushStack(t),em(()=>t.effect_instruction_i1())):cI,[e3]:(e,t,i)=>{let n=em(()=>t.effect_instruction_i0.next(i));return n.done?u6(n.value):(e.pushStack(t),ed(n.value))}},vm={[gw]:(e,t,i,n)=>(e.processNewInterruptSignal(n.cause),oS(t)?uX(n.cause):i),[gS]:(e,t,i,n)=>{throw Error("It is illegal to have multiple concurrent run loops in a single fiber")},[g_]:(e,t,i,n)=>(n.onFiber(e,dP(t)),i),[gk]:(e,t,i,n)=>l9(cA(),()=>i)},vg=e=>co(md(e),e=>vM(mN(e),([e,t])=>{let i=new Map,n=[];for(let e of t)for(let t of(n.push(nO(e)),e))i.set(t.request,t);let r=n.flat();return c8(yo(e.runAll(n),r,()=>r.forEach(e=>{e.listeners.interrupted=!0})),mz,i)},!1,!1));class vx extends h7{static{r=gz,a=gD}constructor(e,t,i){if(super(),this[r]=gA,this[a]=vu,this._queue=[],this._children=null,this._observers=[],this._running=!1,this._stack=[],this._asyncInterruptor=null,this._asyncBlockingOn=null,this._exitValue=null,this._steps=[],this._isYielding=!1,this.currentOpCount=0,this.run=()=>{this.drainQueueOnCurrentThread()},this.currentRuntimeFlags=i,this._fiberId=e,this._fiberRefs=t,oj(i)){let e=this.getFiberRef(um);vn.unsafeUpdate(1,e),vr.unsafeUpdate(1,e)}this.refreshRefCache()}commit(){return gL(this)}id(){return this._fiberId}resume(e){this.tell(gF(e))}get status(){return this.ask((e,t)=>t)}get runtimeFlags(){return this.ask((e,t)=>d$(t)?e.currentRuntimeFlags:t.runtimeFlags)}scope(){return gT(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return null===this._children&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(ux)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return c_(()=>{let t=pi(this._fiberId);return this.tell(gE((i,n)=>{pp(t,cS(()=>e(i,n)))})),pa(t)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return lK(e=>{let t=t=>e(cw(t));return this.tell(gE((e,i)=>{null!==e._exitValue?t(this._exitValue):e.addObserver(t)})),cS(()=>this.tell(gE((e,i)=>{e.removeObserver(t)})))},this.id())}get inheritAll(){return lL((e,t)=>{let i=e.id(),n=e.getFiberRefs(),r=t.runtimeFlags,a=du(n,i,this.getFiberRefs());return e.setFiberRefs(a),cC(M(oC(r,e.getFiberRef(ye)),ob(1),ob(16)))})}get poll(){return cS(()=>ii(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return cS(()=>this.tell(gO(oK(e))))}unsafeInterruptAsFork(e){this.tell(gO(oK(e)))}addObserver(e){null!==this._exitValue?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(t=>t!==e)}getFiberRefs(){return this.setFiberRef(ye,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=dd(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,t){this._fiberRefs=dg(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:t}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(hY),this.currentTracer=this.currentDefaultServices.unsafeMap.get(hJ.key),this.currentSupervisor=this.getFiberRef(yt),this.currentScheduler=this.getFiberRef(mu),this.currentContext=this.getFiberRef(ua),this.currentSpan=this.currentContext.unsafeMap.get(hH.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){let t=this._children;if(this._children=null,null!==t&&t.size>0)for(let i of t)null===i._exitValue&&e.add(this.currentRuntimeFlags,i)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let t=vl,i=globalThis[gq];globalThis[gq]=this;try{for(;t===vl;)t=0===this._queue.length?"Done":this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[gq]=i}this._queue.length>0&&!this._running?(this._running=!0,t===vc?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(us))}drainQueueWhileRunning(e,t){let i=t;for(;this._queue.length>0;){let t=this._queue.splice(0,1)[0];i=vm[t._tag](this,e,i,t)}return i}isInterrupted(){return!oY(this.getFiberRef(ux))}addInterruptedCause(e){let t=this.getFiberRef(ux);this.setFiberRef(ux,oV(t,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(null===this._children||0===this._children.size)return!1;let e=!1;for(let t of this._children)t.tell(gO(oK(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let t=!1;return cT({while:()=>!t,body:()=>{let i=e.next();return i.done?cS(()=>{t=!0}):lU(i.value.await)},step:()=>{}})}return null}reportExitValue(e){if(oj(this.currentRuntimeFlags)){let t=this.getFiberRef(um),i=this.id().startTimeMillis,n=Date.now();switch(vo.unsafeUpdate(n-i,t),vr.unsafeUpdate(-1,t),e._tag){case eX:va.unsafeUpdate(1,t);break;case eG:vs.unsafeUpdate(1,t)}}if("Failure"===e._tag){let t=this.getFiberRef(uf);oX(e.cause)||"Some"!==t._tag||this.log("Fiber terminated with an unhandled error",e.cause,t)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let t=this._observers.length-1;t>=0;t--)this._observers[t](e);this._observers=[]}getLoggers(){return this.getFiberRef(vE)}log(e,t,i){let n=tf(i)?i.value:this.getFiberRef(uc);if(dq(this.getFiberRef(vb),n))return;let r=this.getFiberRef(uu),a=this.getFiberRef(ul),s=this.getLoggers(),o=this.getFiberRefs();if(aw(s)>0){let i=new Date(tz(this.getFiberRef(hY),pS).unsafeCurrentTimeMillis());eJ(o,()=>{for(let l of s)l.log({fiberId:this.id(),logLevel:n,message:e,cause:t,context:o,spans:r,annotations:a,date:i})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case gk:return vc;case gw:return this.processNewInterruptSignal(e.cause),null!==this._asyncInterruptor&&(this._asyncInterruptor(uX(e.cause)),this._asyncInterruptor=null),vl;case gS:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),vl;case g_:return e.onFiber(this,null!==this._exitValue?dM:dL(this.currentRuntimeFlags,this._asyncBlockingOn)),vl;default:return vp(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let t=oS(this.currentRuntimeFlags)&&this.isInterrupted()?uX(this.getInterruptedCause()):e;for(;null!==t;){let e=t,i=this.runLoop(e);if(i===vh){let e=vd.currentOp;vd.currentOp=null,e._op===e4?ow(this.currentRuntimeFlags)?(this.tell(gj()),this.tell(gF(u7)),t=null):t=u7:e._op===eW&&(t=null)}else{this.currentRuntimeFlags=M(this.currentRuntimeFlags,o_(16));let e=this.interruptAllChildren();null!==e?t=l9(e,()=>i):(0===this._queue.length?this.setExitValue(i):this.tell(gF(i)),t=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(gF(e));else{this._running=!0;let t=globalThis[gq];globalThis[gq]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[gq]=t,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(gF(e))}patchRuntimeFlags(e,t){let i=oR(e,t);return globalThis[gq]=this,this.currentRuntimeFlags=i,i}initiateAsync(e,t){let i=!1,n=e=>{i||(i=!0,this.tell(gF(e)))};oS(e)&&(this._asyncInterruptor=n);try{t(n)}catch(e){n(l4(oH(e)))}}pushStack(e){this._stack.push(e),"OnStep"===e._op&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){let e=this._stack.pop();if(e)return"OnStep"===e._op&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==eQ)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==eY&&e._op!==e2&&e._op!==e3)return e;e=this.popStack()}}Tag(e){return cS(()=>tz(this.currentContext,e))}Left(e){return l3(e.left)}None(e){return l3(new uL)}Right(e){return u6(e.right)}Some(e){return u6(e.value)}Micro(e){return lJ(t=>{let i=t,n=f2(fP(e,this.currentContext));return n.addObserver(e=>{if("Success"===e._tag)return i(u6(e.value));switch(e.cause._tag){case"Interrupt":return i(uX(oK(aK)));case"Fail":return i(l3(e.cause.error));case"Die":return i(lX(e.cause.defect))}}),lJ(e=>{i=t=>{e(cI)},n.unsafeInterrupt()})})}[e0](e){let t=em(()=>e.effect_instruction_i0()),i=this.getNextSuccessCont();return void 0!==i?(i._op in vf||vp(i),vf[i._op](this,i,t)):(vd.currentOp=u6(t),vh)}[eX](e){let t=this.getNextSuccessCont();return void 0!==t?(t._op in vf||vp(t),vf[t._op](this,t,e.effect_instruction_i0)):(vd.currentOp=e,vh)}[eG](e){let t=e.effect_instruction_i0,i=this.getNextFailCont();if(void 0===i)return vd.currentOp=uX(t),vh;switch(i._op){case eQ:case eZ:if(!(oS(this.currentRuntimeFlags)&&this.isInterrupted()))return em(()=>i.effect_instruction_i1(t));return uX(o7(t));case"OnStep":if(!(oS(this.currentRuntimeFlags)&&this.isInterrupted()))return u6(uX(t));return uX(o7(t));case e6:if(this.patchRuntimeFlags(this.currentRuntimeFlags,i.patch),oS(this.currentRuntimeFlags)&&this.isInterrupted())return uX(oV(t,this.getInterruptedCause()));return uX(t);default:vp(i)}}[e5](e){return em(()=>e.effect_instruction_i0(this,dP(this.currentRuntimeFlags)))}Blocked(e){let t=this.getFiberRefs(),i=this.currentRuntimeFlags;if(this._steps.length>0){let n=[],r=this._steps[this._steps.length-1],a=this.popStack();for(;a&&"OnStep"!==a._op;)n.push(a),a=this.popStack();this.setFiberRefs(r.refs),this.currentRuntimeFlags=r.flags;let s=dk(r.refs,t),o=oC(r.flags,i);return u6(lR(e.effect_instruction_i0,lL(t=>{for(;n.length>0;)t.pushStack(n.pop());return t.setFiberRefs(dE(t.id(),t.getFiberRefs())(s)),t.currentRuntimeFlags=oR(o)(t.currentRuntimeFlags),e.effect_instruction_i1})))}return cj(t=>l9(vP(lT(e.effect_instruction_i0)),()=>t(e.effect_instruction_i1)))}RunBlocked(e){return vg(e.effect_instruction_i0)}[e1](e){let t=e.effect_instruction_i0,i=this.currentRuntimeFlags,n=oR(i,t);if(oS(n)&&this.isInterrupted())return uX(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,t),!e.effect_instruction_i1)return u7;{let t=oC(n,i);return this.pushStack(new lz(t,e)),em(()=>e.effect_instruction_i1(i))}}[eY](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[eQ](e){return this.pushStack(e),e.effect_instruction_i0}[eZ](e){return this.pushStack(e),e.effect_instruction_i0}[eW](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),vd.currentOp=e,vh}[e4](e){return this._isYielding=!1,vd.currentOp=e,vh}[e2](e){let t=e.effect_instruction_i0,i=e.effect_instruction_i1;return t()?(this.pushStack(e),i()):u7}[e3](e){return vf[e3](this,e,void 0)}[eV](e){return em(()=>e.commit())}runLoop(e){let t=e;for(this.currentOpCount=0;;){if((2&this.currentRuntimeFlags)!=0&&this.currentSupervisor.onEffect(this,t),this._queue.length>0&&(t=this.drainQueueWhileRunning(this.currentRuntimeFlags,t)),!this._isYielding){this.currentOpCount+=1;let e=this.currentScheduler.shouldYield(this);if(!1!==e){this._isYielding=!0,this.currentOpCount=0;let i=t;t=l9(cA({priority:e}),()=>i)}}try{if((t=this.currentTracer.context(()=>D()!==t[lN]._V?l0(`Cannot execute an Effect versioned ${t[lN]._V} with a Runtime of version ${D()}`):this[t._op](t),this))===vh){let e=vd.currentOp;if(e._op===e4||e._op===eW)return vh;return vd.currentOp=null,e._op===eX||e._op===eG?e:uX(oH(e))}}catch(e){t=(t===vh||X(t,"_op"))&&t._op in this?lI(e)?uX(e.cause):uA(e)?uX(oV(oH(e),oK(aK))):lX(e):l0(`Not a valid effect: ${eL(t)}`)}}}}let vb=$("effect/FiberRef/currentMinimumLogLevel",()=>ue(dU("Info"))),vv=e=>gJ(t=>{tz(dm(t.context,hY),hM).unsafe.log(e.log(t))}),vy=$(Symbol.for("effect/Logger/defaultLogger"),()=>vv(gX)),vw=$(Symbol.for("effect/Logger/jsonLogger"),()=>vv(g6)),v_=$(Symbol.for("effect/Logger/logFmtLogger"),()=>vv(g3)),vS=$(Symbol.for("effect/Logger/prettyLogger"),()=>xd),vk=$(Symbol.for("effect/Logger/structuredLogger"),()=>vv(g5)),vO=$(Symbol.for("effect/Logger/tracerLogger"),()=>gJ(({annotations:e,cause:t,context:i,fiberId:n,logLevel:r,message:a})=>{let s=tA(dm(i,ua),hH);if("None"===s._tag||"ExternalSpan"===s.value._tag)return;let o=tz(dm(i,hY),pS),l={};for(let[t,i]of e)l[t]=i;l["effect.fiberId"]=aJ(n),l["effect.logLevel"]=r.label,null!==t&&"Empty"!==t._tag&&(l["effect.cause"]=lh(t,{renderErrorCause:!0})),s.value.event(eL(Array.isArray(a)?a[0]:a),o.unsafeCurrentTimeNanos(),l)})),vE=$(Symbol.for("effect/FiberRef/currentLoggers"),()=>ut(ay(vy,vO))),vF=C(3,(e,t,i)=>l9(v1,n=>{let r=[],a=c_(()=>{if(0===r.length)return cI;let e=r;return r=[],i(e)});return cj(i=>M(mD(t),cP(a),m3,i,vP,l9(e=>uk(n,c$(e))),cP(vI(()=>a)),lq(gJ(t=>{r.push(e.log(t))}))))})),vj=C(e=>lP(e[0]),(e,t)=>cF(ck(e,e=>vI(i=>t(e,i))))),vI=e=>lL(t=>{let i=t.getFiberRefs(),n=t.currentRuntimeFlags;return l9(v1,t=>uO(t,t=>lL(r=>{let a=r.getFiberRefs(),s=r.currentRuntimeFlags,o=dk(a,i),l=oC(s,n),c=dk(i,a);return r.setFiberRefs(dE(o,r.id(),i)),ys(cz(e(t),l),cS(()=>{r.setFiberRefs(dE(c,r.id(),r.getFiberRefs()))}))})))}),vC=(e=>er(e[0])&&!lP(e[0]),e=>{if(Array.isArray(e)||er(e))return[e,t7()];let t=Object.keys(e),i=t.length;return[t.map(t=>e[t]),tg(e=>{let n={};for(let r=0;r<i;r++)n[t[r]]=e[r];return n})]}),vR=(e,t,i)=>{let n=[];for(let t of e)n.push(l1(t));return l9(vz(n,R,{concurrency:i?.concurrency,batching:i?.batching}),e=>{let n=t7(),r=e.length,a=Array(r),s=Array(r),o=!1;for(let t=0;t<r;t++){let i=e[t];"Left"===i._tag?(a[t]=tg(i.left),o=!0):(s[t]=i.right,a[t]=n)}return o?"Some"===t._tag?l3(t.value(a)):l3(a):i?.discard?cI:"Some"===t._tag?cw(t.value(s)):cw(s)})},vT=(e,t,i)=>{let n=[];for(let t of e)n.push(l1(t));return i?.discard?vz(n,R,{concurrency:i?.concurrency,batching:i?.batching,discard:!0}):ch(vz(n,R,{concurrency:i?.concurrency,batching:i?.batching}),e=>"Some"===t._tag?t.value(e):e)},vN=(e,t)=>{let[i,n]=vC(e);return t?.mode==="validate"?vR(i,n,t):t?.mode==="either"?vT(i,n,t):t?.discard!==!0&&"Some"===n._tag?ch(vz(i,R,t),n.value):vz(i,R,t)},vz=((e,t)=>Array.from({length:t},()=>e),C(e=>er(e[0]),(e,t,i)=>lL(n=>{let r=i?.batching===!0||i?.batching==="inherit"&&n.getFiberRef(ud);return i?.discard?mA(i.concurrency,()=>vH(de,i?.concurrentFinalizers)(i=>r?vM(e,(e,n)=>i(t(e,n)),!0,!1,1):co(e,(e,n)=>i(t(e,n)))),()=>vH(dn,i?.concurrentFinalizers)(i=>vM(e,(e,n)=>i(t(e,n)),r,!1)),n=>vH(dr(n),i?.concurrentFinalizers)(i=>vM(e,(e,n)=>i(t(e,n)),r,!1,n))):mA(i?.concurrency,()=>vH(de,i?.concurrentFinalizers)(i=>r?vD(e,1,(e,n)=>i(t(e,n)),!0):cs(e,(e,n)=>i(t(e,n)))),()=>vH(dn,i?.concurrentFinalizers)(i=>vA(e,(e,n)=>i(t(e,n)),r)),n=>vH(dr(n),i?.concurrentFinalizers)(i=>vD(e,n,(e,n)=>i(t(e,n)),r)))}))),vA=(e,t,i)=>c_(()=>{let n=iF(e),r=Array(n.length);return cP(vM(n,(e,i)=>l9(t(e,i),e=>cS(()=>r[i]=e)),i,!1),cw(r))}),vM=(e,t,i,n,r)=>cj(a=>cO(s=>lL(o=>{let l=Array.from(e).reverse(),c=l.length;if(0===c)return cI;let u=0,p=!1,h=r?Math.min(l.length,r):l.length,d=new Set,f=[],m=()=>d.forEach(e=>{e.currentScheduler.scheduleTask(()=>{e.unsafeInterruptAsFork(o.id())},0)}),g=[],x=[],b=[],v=()=>{let e=f.filter(({exit:e})=>"Failure"===e._tag).sort((e,t)=>e.index<t.index?-1:e.index===t.index?0:1).map(({exit:e})=>e);return 0===e.length&&e.push(u7),e},y=(e,t=!1)=>{let i=cF(s(e)),n=v$(i,o,o.currentRuntimeFlags,gN);return o.currentScheduler.scheduleTask(()=>{t&&n.unsafeInterruptAsFork(o.id()),n.resume(i)},0),n},w=()=>{n||(c-=l.length,l=[]),p=!0,m()},_=i?ct:l2,S=y(lK(e=>{let n=(e,t)=>{"Blocked"===e._op?b.push(e):(f.push({index:t,exit:e}),"Failure"!==e._op||p||w())},s=()=>{if(l.length>0){let h=l.pop(),m=u++,w=()=>{let e=l.pop();return m=u++,l9(cA(),()=>l9(_(a(t(e,m))),S))},S=e=>l.length>0&&(n(e,m),l.length>0)?w():cw(e),k=y(l9(_(a(t(h,m))),S));g.push(k),d.add(k),p&&k.currentScheduler.scheduleTask(()=>{k.unsafeInterruptAsFork(o.id())},0),k.addObserver(t=>{let a;a="Failure"===t._op?t:t.effect_instruction_i0,x.push(k),d.delete(k),n(a,m),f.length===c?e(cw(t9(uQ(v(),{parallel:!0}),()=>u7))):b.length+f.length===c?e(cw(lR(b.map(e=>e.effect_instruction_i0).reduce(mp),vM([t9(uQ(v(),{parallel:!0}),()=>u7),...b.map(e=>e.effect_instruction_i1)],e=>e,i,!0,r)))):s()})}};for(let e=0;e<h;e++)s()}));return lU(cm(ci(a(gL(S))),u5({onFailure:()=>{w();let e=b.length+1,t=Math.min("number"==typeof r?r:b.length,b.length),i=Array.from(b);return lK(n=>{let r=[],a=0,s=0,o=(t,s)=>o=>{r[t]=o,++a===e&&n(is(uQ(r,{parallel:!0}))),i.length>0&&s&&l()},l=()=>{y(i.pop(),!0).addObserver(o(s,!0)),s++};S.addObserver(o(s,!1)),s++;for(let e=0;e<t;e++)l()})},onSuccess:()=>cs(x,e=>e.inheritAll)})))}))),vD=(e,t,i,n)=>c_(()=>{let r=iF(e),a=Array(r.length);return cP(vM(r,(e,t)=>ch(i(e,t),e=>a[t]=e),n,!1,t),cw(a))}),vP=e=>vU(e,gN),vL=(e,t,i,n=null)=>{let r=vq(e,t,i,n);return r.resume(e),r},v$=(e,t,i,n=null)=>vq(e,t,i,n),vq=(e,t,i,n=null)=>{let r=aG(),a=dp(t.getFiberRefs(),r),s=new vx(r,a,i),o=dm(a,ua),l=s.currentSupervisor;return l.onStart(o,e,tg(t),s),s.addObserver(e=>l.onEnd(e,s)),(null!==n?n:M(t.getFiberRef(ug),t9(()=>t.scope()))).add(i,s),s},vU=(e,t)=>lL((i,n)=>cw(vL(e,i,n.runtimeFlags,t))),vB=(e=>K(e[2]),e=>pm(t=>t8(tA(t,v0),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return l9(uF(t,dn),t=>v6(e,t))}}}))),vJ=e=>t=>pm(i=>t8(tA(i,v0),{onNone:()=>t,onSome:i=>"ParallelN"===i.strategy._tag&&i.strategy.parallelism===e?t:l9(uF(i,dr(e)),e=>v6(t,e))})),vH=(e,t)=>i=>pm(n=>t8(tA(n,v0),{onNone:()=>i(R),onSome:n=>{if(!0!==t)return i(R);{let t="Parallel"===e._tag?vB:"Sequential"===e._tag?vV:vJ(e.parallelism);switch(n.strategy._tag){case"Parallel":return t(i(vB));case"Sequential":return t(i(vV));case"ParallelN":return t(i(vJ(n.strategy.parallelism)))}}}})),vK=e=>l9(v0,e),vW=e=>l9(v4(),t=>cm(e(t),e=>t.close(e))),vV=e=>pm(t=>t8(tA(t,v0),{onNone:()=>e,onSome:t=>{switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return l9(uF(t,de),t=>v6(e,t))}}})),vG=(e=>lP(e[1]),e=>v9(hY,tC(ha,e))),vQ=C(e=>lP(e[1]),(e,t,i)=>vX(e,t,(e,t)=>[e,t],i)),vY=C(e=>lP(e[1]),(e,t,i)=>i?.concurrent!==!0&&(i?.batching===void 0||!1===i.batching)?cD(e,t):vX(e,t,(e,t)=>e,i)),vZ=C(e=>lP(e[1]),(e,t,i)=>i?.concurrent!==!0&&(i?.batching===void 0||!1===i.batching)?cP(e,t):vX(e,t,(e,t)=>t,i)),vX=C(e=>lP(e[1]),(e,t,i,n)=>ch(vN([e,t],{concurrency:n?.concurrent?2:1,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),([e,t])=>i(e,t))),v0=tD("effect/Scope"),v1=v0,v2=(e,t)=>{"Open"===e.state._tag&&e.state.finalizers.add(t)},v3={[u_]:u_,[uS]:uS,pipe(){return eK(this,arguments)},fork(e){return cS(()=>{let t=v5(e);if("Closed"===this.state._tag)return t.state=this.state,t;let i=e=>t.close(e);return this.state.finalizers.add(i),v2(t,e=>cS(()=>{"Open"===this.state._tag&&this.state.finalizers.delete(i)})),t})},close(e){return c_(()=>{if("Closed"===this.state._tag)return cI;let t=Array.from(this.state.finalizers.values()).reverse();return(this.state={_tag:"Closed",exit:e},0===t.length)?cI:dt(this.strategy)?M(cs(t,t=>l2(t(e))),l9(e=>M(uQ(e),io(uG),t9(()=>u7)))):di(this.strategy)?M(vA(t,t=>l2(t(e)),!1),l9(e=>M(uQ(e,{parallel:!0}),io(uG),t9(()=>u7)))):M(vD(t,this.strategy.parallelism,t=>l2(t(e)),!1),l9(e=>M(uQ(e,{parallel:!0}),io(uG),t9(()=>u7))))})},addFinalizer(e){return c_(()=>"Closed"===this.state._tag?e(this.state.exit):(this.state.finalizers.add(e),cI))}},v5=(e=de)=>{let t=Object.create(v3);return t.strategy=e,t.state={_tag:"Open",finalizers:new Set},t},v4=(e=de)=>cS(()=>v5(e)),v6=C(2,(e,t)=>pb(e,tM(tI(v0,t)))),v7=C(2,(e,t)=>M(e,v6(t),cm(e=>t.close(e)))),v8=C(2,(e,t)=>lU(vj(l9(cX(e),i=>lq(c1(e,t),i)),t=>c1(e,t)))),v9=C(2,(e,t)=>c0(e,i=>v8(e,t(i)))),ye=ur(oF,{differ:oT,fork:oT.empty}),yt=ur(b2,{differ:vi,fork:b7}),yi=C(3,(e,t,i)=>yr(e,t,{onSelfWin:(e,t)=>l9(e.await,n=>{switch(n._tag){case eX:return l9(e.inheritAll,()=>i.onSelfDone(n,t));case eG:return i.onSelfDone(n,t)}}),onOtherWin:(e,t)=>l9(e.await,n=>{switch(n._tag){case eX:return l9(e.inheritAll,()=>i.onOtherDone(n,t));case eG:return i.onOtherDone(n,t)}})})),yn=C(2,(e,t)=>l8(i=>yi(e,t,{onSelfDone:(e,t)=>u4(e,{onFailure:e=>M(gL(t),m9(t=>oW(e,t))),onSuccess:e=>M(t,cq(i),lq(e))}),onOtherDone:(e,t)=>u4(e,{onFailure:e=>M(gL(t),m9(t=>oW(t,e))),onSuccess:e=>M(t,cq(i),lq(e))})}))),yr=C(3,(e,t,i)=>lL((n,r)=>{let a=r.runtimeFlags,s=ak(!0),o=vq(e,n,a,i.selfScope),l=vq(t,n,a,i.otherScope);return lK(n=>{o.addObserver(()=>ya(o,l,i.onSelfWin,s,n)),l.addObserver(()=>ya(l,o,i.onOtherWin,s,n)),o.startFork(e),l.startFork(t)},a$(o.id(),l.id()))})),ya=(e,t,i,n,r)=>{aO(!0,!1)(n)&&r(i(e,t))},ys=C(2,(e,t)=>cj(i=>cr(i(e),{onFailure:e=>cr(t,{onFailure:t=>l4(oV(e,t)),onSuccess:()=>l4(e)}),onSuccess:e=>lq(t,e)}))),yo=(e,t,i)=>l8(n=>l9(l9(vP(cu(e)),e=>lK(n=>{let r=t.map(e=>e.listeners.count),a=()=>{r.every(e=>0===e)&&t.every(e=>"Pending"===e.result.state.current._tag||!!("Done"===e.result.state.current._tag&&uH(e.result.state.current.effect)&&"Failure"===e.result.state.current.effect._tag&&oZ(e.result.state.current.effect.cause)))&&(s.forEach(e=>e()),i?.(),n(c$(e)))};e.addObserver(e=>{s.forEach(e=>e()),n(e)});let s=t.map((e,t)=>{let i=e=>{r[t]=e,a()};return e.listeners.addObserver(i),()=>e.listeners.removeObserver(i)});return a(),cS(()=>{s.forEach(e=>e())})})),()=>c_(()=>co(t.flatMap(e=>e.state.completed?[]:[e]),e=>bH(e.request,u2(n)))))),yl=e=>lc(e,{onEmpty:tg(oB),onFail:e=>M(e,io(oJ)),onDie:e=>tg(oH(e)),onInterrupt:e=>tg(oK(e)),onSequential:(e,t)=>tf(e)&&tf(t)?tg(oV(e.value,t.value)):td(e)&&tf(t)?tg(t.value):tf(e)&&td(t)?tg(e.value):t7(),onParallel:(e,t)=>tf(e)&&tf(t)?tg(oW(e.value,t.value)):td(e)&&tf(t)?tg(t.value):tf(e)&&td(t)?tg(e.value):t7()}),yc=e=>uj(R)(e),yu=e=>X(e,uR),yp=Symbol.for("effect/DateTime"),yh=Symbol.for("effect/DateTime/TimeZone"),yd={[yp]:yp,pipe(){return eK(this,arguments)},[ez](){return this.toString()},toJSON(){return yE(this).toJSON()}},yf={...yd,_tag:"Utc",[ex](){return ej(this,eS(this.epochMillis))},[eI](e){return yy(e)&&"Utc"===e._tag&&this.epochMillis===e.epochMillis},toString(){return`DateTime.Utc(${yE(this).toJSON()})`}},ym={...yd,_tag:"Zoned",[ex](){return M(eS(this.epochMillis),ey(eb(this.zone)),ej(this))},[eI](e){return yy(e)&&"Zoned"===e._tag&&this.epochMillis===e.epochMillis&&eC(this.zone,e.zone)},toString(){return`DateTime.Zoned(${yU(this)})`}},yg={[yh]:yh,[ez](){return this.toString()}},yx={...yg,_tag:"Named",[ex](){return ej(this,ek(`Named:${this.id}`))},[eI](e){return yw(e)&&"Named"===e._tag&&this.id===e.id},toString(){return`TimeZone.Named(${this.id})`},toJSON(){return{_id:"TimeZone",_tag:"Named",id:this.id}}},yb={...yg,_tag:"Offset",[ex](){return ej(this,ek(`Offset:${this.offset}`))},[eI](e){return yw(e)&&"Offset"===e._tag&&this.offset===e.offset},toString(){return`TimeZone.Offset(${yI(this.offset)})`},toJSON(){return{_id:"TimeZone",_tag:"Offset",offset:this.offset}}},yv=(e,t,i)=>{let n=Object.create(ym);return n.epochMillis=e,n.zone=t,n.partsUtc=i,n},yy=e=>X(e,yp),yw=e=>X(e,yh),y_=e=>{let t=Object.create(yf);return t.epochMillis=e,t},yS=(e=>yy(e[0]),$("effect/DateTime/validZoneCache",()=>new Map)),yk={day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"longOffset",fractionalSecondDigits:3,hourCycle:"h23"},yO=e=>{let t=e.resolvedOptions().timeZone;if(yS.has(t))return yS.get(t);let i=Object.create(yx);return i.id=t,i.format=e,yS.set(t,i),i},yE=(e=>{if(yS.has(e))return yS.get(e);try{return yO(new Intl.DateTimeFormat("en-US",{...yk,timeZone:e}))}catch(t){throw new uD(`Invalid time zone: ${e}`)}},e=>new Date(e.epochMillis)),yF=e=>{if("Utc"===e._tag)return new Date(e.epochMillis);if("Offset"===e.zone._tag)return new Date(e.epochMillis+e.zone.offset);if(void 0!==e.adjustedEpochMillis)return new Date(e.adjustedEpochMillis);let t=e.zone.format.formatToParts(e.epochMillis).filter(e=>"literal"!==e.type),i=new Date(0);return i.setUTCFullYear(Number(t[2].value),Number(t[0].value)-1,Number(t[1].value)),i.setUTCHours(Number(t[3].value),Number(t[4].value),Number(t[5].value),Number(t[6].value)),e.adjustedEpochMillis=i.getTime(),i},yj=e=>yF(e).getTime()-yR(e),yI=e=>{let t=Math.abs(e),i=Math.floor(t/36e5),n=Math.round(t%36e5/6e4);return`${e<0?"-":"+"}${String(i).padStart(2,"0")}:${String(n).padStart(2,"0")}`},yC=e=>yI(yj(e)),yR=e=>e.epochMillis,yT=e=>({millis:e.getUTCMilliseconds(),seconds:e.getUTCSeconds(),minutes:e.getUTCMinutes(),hours:e.getUTCHours(),day:e.getUTCDate(),weekDay:e.getUTCDay(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}),yN=(e,t)=>{let i="Offset"===t._tag?t.offset:yM(e,t);return yv(e-i,t)},yz=/([+-])(\d{2}):(\d{2})$/,yA=e=>{let t=yz.exec(e);if(null===t)return null;let[,i,n,r]=t;return("+"===i?1:-1)*(60*Number(n)+Number(r))*6e4},yM=(e,t)=>{let i=t.format.formatToParts(e).find(e=>"timeZoneName"===e.type)?.value??"";if("GMT"===i)return 0;let n=yA(i);return null===n?yj(yv(e,t)):n},yD=C(2,(e,t)=>{if("Utc"===e._tag){let i=yE(e);return t(i),y_(i.getTime())}let i=new Date(yF(e).getTime());return t(i),yN(i.getTime(),e.zone)}),yP=((e,t)=>yP(e,e=>{let i=new Date(e);return t(i),i.getTime()}),C(2,(e,t)=>{let i=t(yR(e));return"Utc"===e._tag?y_(i):yv(i,e.zone)})),yL=((e,t)=>t(yF(e)),C(2,(e,t)=>t(yE(e)))),y$=(e,t)=>{e.setTime(e.getTime()+t)},yq=((e,t)=>yD(e,e=>{if(t.millis&&y$(e,t.millis),t.seconds&&y$(e,1e3*t.seconds),t.minutes&&y$(e,6e4*t.minutes),t.hours&&y$(e,36e5*t.hours),t.days&&e.setUTCDate(e.getUTCDate()+t.days),t.weeks&&e.setUTCDate(e.getUTCDate()+7*t.weeks),t.months){let i=e.getUTCDate();e.setUTCMonth(e.getUTCMonth()+t.months+1,0),i<e.getUTCDate()&&e.setUTCDate(i)}if(t.years){let i=e.getUTCDate(),n=e.getUTCMonth();e.setUTCFullYear(e.getUTCFullYear()+t.years,n+1,0),i<e.getUTCDate()&&e.setUTCDate(i)}}),e=>{let t=yF(e);return"Utc"===e._tag?t.toISOString():`${t.toISOString().slice(0,-1)}${yC(e)}`}),yU=e=>"Offset"===e.zone._tag?yq(e):`${yq(e)}[${e.zone.id}]`;class yB{constructor(e,t=!1){this.s=e,this.stripped=t,this.index=0,this.length=e.length}next(){if(this.done)return{done:!0,value:void 0};let e=this.index;for(;!this.done&&!yJ(this.s[this.index]);)this.index=this.index+1;let t=this.index;if(!this.done){let e=this.s[this.index];this.index=this.index+1,!this.done&&yH(e,this.s[this.index])&&(this.index=this.index+1),this.stripped||(t=this.index)}return{done:!1,value:this.s.substring(e,t)}}[Symbol.iterator](){return new yB(this.s,this.stripped)}get done(){return this.index>=this.length}}let yJ=e=>{let t=e.charCodeAt(0);return 13===t||10===t},yH=(e,t)=>13===e.charCodeAt(0)&&10===t.charCodeAt(0),yK=((e,t)=>yW(e.seconds,t.seconds)&&yW(e.minutes,t.minutes)&&yW(e.hours,t.hours)&&yW(e.days,t.days)&&yW(e.months,t.months)&&yW(e.weekdays,t.weekdays),t4((e,t)=>e===t)),yW=(e,t)=>yK(iF(e),iF(t)),yV=Symbol.for("effect/ScheduleInterval"),yG={[yV]:yV,startMillis:0,endMillis:0},yQ=(e,t)=>e>t?yG:{[yV]:yV,startMillis:e,endMillis:t},yY=C(2,(e,t)=>yZ(e,t)===e),yZ=C(2,(e,t)=>e.endMillis<=t.startMillis?e:t.endMillis<=e.startMillis?t:e.startMillis<t.startMillis?e:t.startMillis<e.startMillis?t:e.endMillis<=t.endMillis?e:t),yX=C(2,(e,t)=>yQ(Math.max(e.startMillis,t.startMillis),Math.min(e.endMillis,t.endMillis))),y0=e=>e.startMillis>=e.endMillis,y1=e=>rl(e.endMillis-e.startMillis),y2=e=>yQ(e,Number.POSITIVE_INFINITY),y3=Symbol.for("effect/ScheduleIntervals"),y5=e=>({[y3]:y3,intervals:e}),y4=C(2,(e,t)=>nU(t.intervals)?nU(e.intervals)?nJ(e.intervals).startMillis<nJ(t.intervals).startMillis?y6(nG(e.intervals),t.intervals,nJ(e.intervals),ny()):y6(e.intervals,nG(t.intervals),nJ(t.intervals),ny()):t:e),y6=(e,t,i,n)=>{let r=e,a=t,s=i,o=n;for(;nU(r)||nU(a);)if(!nU(r)&&nU(a))s.endMillis<nJ(a).startMillis?(o=M(o,nT(s)),s=nJ(a)):s=yQ(s.startMillis,nJ(a).endMillis),a=nG(a),r=ny();else if(nU(r)&&nq(a))s.endMillis<nJ(r).startMillis?(o=M(o,nT(s)),s=nJ(r)):s=yQ(s.startMillis,nJ(r).endMillis),a=ny(),r=nG(r);else if(nU(r)&&nU(a))nJ(r).startMillis<nJ(a).startMillis?(s.endMillis<nJ(r).startMillis?(o=M(o,nT(s)),s=nJ(r)):s=yQ(s.startMillis,nJ(r).endMillis),r=nG(r)):(s.endMillis<nJ(a).startMillis?(o=M(o,nT(s)),s=nJ(a)):s=yQ(s.startMillis,nJ(a).endMillis),a=nG(a));else throw Error(eo("Intervals.unionLoop"));return y5(M(o,nT(s),nE))},y7=C(2,(e,t)=>y8(e.intervals,t.intervals,ny())),y8=(e,t,i)=>{let n=e,r=t,a=i;for(;nU(n)&&nU(r);){let e=M(nJ(n),yX(nJ(r))),t=y0(e)?a:M(a,nT(e));M(nJ(n),yY(nJ(r)))?n=nG(n):r=nG(r),a=t}return y5(nE(a))},y9=e=>M(e.intervals,nB,t9(()=>yG)).startMillis,we=C(2,(e,t)=>y9(e)<y9(t)),wt=((e,t)=>we(e,t)?t:e,e=>M(e.intervals,nB,t9(()=>yG)).endMillis),wi=e=>nU(e.intervals),wn="Continue",wr="Done",wa=e=>({_tag:wn,intervals:e}),ws=e=>({_tag:wn,intervals:y5(n_(e))}),wo={_tag:wr},wl=e=>e._tag===wn,wc=e=>e._tag===wr,wu=Symbol.for("effect/Schedule"),wp=e=>X(e,wu),wh=Symbol.for("effect/ScheduleDriver"),wd={_Out:e=>e,_In:e=>e,_R:e=>e},wf={_Out:e=>e,_In:e=>e,_R:e=>e};class wm{constructor(e,t){this[wu]=wd,this.initial=e,this.step=t}pipe(){return eK(this,arguments)}}class wg{constructor(e,t){this[wh]=wf,this.schedule=e,this.ref=t}get state(){return ch(mt(this.ref),e=>e[1])}get last(){return l9(mt(this.ref),([e,t])=>{switch(e._tag){case"None":return l5(()=>new uL);case"Some":return cw(e.value)}})}get reset(){return mi(this.ref,[t7(),this.schedule.initial])}next(e){return M(ch(mt(this.ref),e=>e[1]),l9(t=>M(h0,l9(i=>M(c_(()=>this.schedule.step(i,e,t)),l9(([e,t,n])=>{let r=mi(this.ref,[tg(t),e]);if(wc(n))return cP(r,l3(t7()));let a=y9(n.intervals)-i;return a<=0?lq(r,t):M(r,cP(mD(rl(a))),lq(t))}))))))}}let wx=(e,t)=>new wm(e,t),wb=((e,t)=>wb(e,e=>cS(()=>t(e))),C(2,(e,t)=>wj(e,(e,i)=>ch(t(e),e=>ry(i,n9(e)))))),wv=((e,t)=>wx([e.initial,t.initial,!0],(i,n,r)=>r[2]?l9(e.step(i,n,r[0]),([e,a,s])=>wc(s)?ch(t.step(i,n,r[1]),([t,i,n])=>[[e,t,!1],tQ(i),n]):cw([[e,r[1],!0],tG(a),s])):ch(t.step(i,n,r[1]),([e,t,i])=>[[r[0],e,!1],tQ(t),i])),C(2,(e,t)=>wy(e,(e,i)=>cS(()=>t(e,i))))),wy=C(2,(e,t)=>wx(e.initial,(i,n,r)=>l9(e.step(i,n,r),([e,i,r])=>wc(r)?cw([e,i,wo]):ch(t(n,i),t=>t?[e,i,r]:[e,i,wo])))),ww=((e,t)=>ww(e,e=>cS(()=>t(e))),C(2,(e,t)=>wx(e.initial,(i,n,r)=>l9(t(n),t=>e.step(i,t,r))))),w_=((e,t)=>wj(e,(e,i)=>t(i)),e=>M(me([t7(),e.initial]),ch(t=>new wg(e,t)))),wS=C(2,(e,t)=>wk(e,t,y7)),wk=C(3,(e,t,i)=>wx([e.initial,t.initial],(n,r,a)=>M(cL(e.step(n,r,a[0]),t.step(n,r,a[1]),(e,t)=>[e,t]),l9(([[n,a,s],[o,l,c]])=>wl(s)&&wl(c)?wO(e,t,r,n,a,s.intervals,o,l,c.intervals,i):cw([[n,o],[a,l],wo]))))),wO=(e,t,i,n,r,a,s,o,l,c)=>{let u=c(a,l);return wi(u)?cw([[n,s],[r,o],wa(u)]):M(a,we(l))?l9(e.step(wt(a),i,n),([n,r,a])=>wc(a)?cw([[n,s],[r,o],wo]):wO(e,t,i,n,r,a.intervals,s,o,l,c)):l9(t.step(wt(l),i,s),([s,o,l])=>wc(l)?cw([[n,s],[r,o],wo]):wO(e,t,i,n,r,a,s,o,l.intervals,c))},wE=C(2,(e,t)=>wF(e,e=>cS(()=>t(e)))),wF=C(2,(e,t)=>wx(e.initial,(i,n,r)=>l9(e.step(i,n,r),([e,i,n])=>ch(t(i),t=>[e,t,n])))),wj=C(2,(e,t)=>wx(e.initial,(i,n,r)=>l9(e.step(i,n,r),([e,n,r])=>{if(wc(r))return cw([e,n,r]);let a=r.intervals;return ch(t(n,y1(yQ(i,y9(a)))),t=>{let r=n9(t),s=y9(a),o=i+rf(r),l=o-s;return[e,n,ws(yQ(o,Math.max(0,wt(a)+l)))]})}))),wI=e=>wx(e.initial,(t,i,n)=>M(e.step(t,i,n),ch(([e,t,n])=>[e,i,n]))),wC=e=>wz(wG,t=>t<e),wR=((e,t,i)=>wx([e.initial,t],(t,n,[r,a])=>l9(e.step(t,n,r),([e,t,n])=>wc(n)?cw([[e,a],a,n]):ch(i(a,t),t=>[[e,t],a,n]))),C(3,(e,t,i)=>wx([e.initial,t.initial],(n,r,a)=>cL(e.step(n,r,a[0]),t.step(n,r,a[1]),([e,t,n],[r,a,s])=>{if(wc(n)&&wc(s))return[[e,r],[t,a],wo];if(wc(n)&&wl(s))return[[e,r],[t,a],wa(s.intervals)];if(wl(n)&&wc(s))return[[e,r],[t,a],wa(n.intervals)];if(wl(n)&&wl(s))return[[e,r],[t,a],wa(i(n.intervals,s.intervals))];throw Error("BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues")})))),wT=C(2,(e,t)=>wy(e,(e,i)=>ge(t(e)))),wN=C(2,(e,t)=>wy(e,(e,i)=>t(e))),wz=C(2,(e,t)=>wv(e,(e,i)=>t(i))),wA=((e,t)=>wE(wS(e,t),e=>e[0]),Symbol.for("effect/Schedule/ScheduleDefect"));class wM{constructor(e){this.error=e,this[wA]=wA}}let wD=e=>X(e,wA),wP=e=>lV(e,e=>lX(new wM(e))),wL=e=>lW(e,e=>t8(lr(e,e=>oQ(e)&&wD(e.defect)?tg(e.defect):t7()),{onNone:()=>l4(e),onSome:e=>l3(e.error)})),w$=C(2,(e,t)=>wU(e,t,(e,t)=>l3(e))),wq=C(2,(e,t)=>{if(wp(t))return w$(e,t);let i=t.schedule??wI(wG),n=t.while?wN(i,e=>{let i=t.while(e);return"boolean"==typeof i?cw(i):wP(i)}):i,r=t.until?wT(n,e=>{let i=t.until(e);return"boolean"==typeof i?cw(i):wP(i)}):n;return wL(w$(e,t.times?wS(r,wC(t.times)).pipe(wE(e=>e[0])):r))}),wU=C(3,(e,t,i)=>l9(w_(t),t=>ca(e,{onFailure:e=>i(e,t7()),onSuccess:n=>wB(e,t,i,n)}))),wB=(e,t,i,n)=>ca(t.next(n),{onFailure:()=>cb(t.last),onSuccess:n=>ca(e,{onFailure:e=>i(e,tg(n)),onSuccess:n=>wB(e,t,i,n)})}),wJ=C(2,(e,t)=>wH(e,t,(e,t)=>l3(e))),wH=((e,t)=>{if(wp(t))return wJ(e,t);let i=t.schedule??wG,n=t.while?wN(i,e=>{let i=t.while(e);return"boolean"==typeof i?cw(i):wP(i)}):i,r=t.until?wT(n,e=>{let i=t.until(e);return"boolean"==typeof i?cw(i):wP(i)}):n;return wL(wJ(e,t.times?wS(r,wC(t.times)):r))},C(3,(e,t,i)=>l9(w_(t),t=>wK(e,t,i)))),wK=(e,t,i)=>lV(e,n=>ca(t.next(n),{onFailure:()=>M(t.last,cb,l9(e=>i(n,e))),onSuccess:()=>wK(e,t,i)})),wW=((e,t)=>wW(e,void 0,t),C(3,(e,t,i)=>l9(w_(i),i=>wV(e,t,i)))),wV=(e,t,i)=>ca(i.next(t),{onFailure:()=>cb(i.last),onSuccess:()=>l9(e,t=>wV(e,t,i))}),wG=(b=e=>e+1,wx(0,(e,t,i)=>cS(()=>[b(i),i,ws(y2(e))])));class wQ{constructor(e){this.waiters=new Set,this.taken=0,this.take=e=>lH(t=>{if(this.free<e){let i=()=>{this.free<e||(this.waiters.delete(i),this.taken+=e,t(cw(e)))};return this.waiters.add(i),cS(()=>{this.waiters.delete(i)})}return this.taken+=e,t(cw(e))}),this.updateTaken=e=>lL(t=>(this.taken=e(this.taken),this.waiters.size>0&&t.getFiberRef(mu).scheduleTask(()=>{let e=this.waiters.values(),t=e.next();for(;!1===t.done&&this.free>0;)t.value(),t=e.next()},t.getFiberRef(us)),cw(this.free))),this.release=e=>this.updateTaken(t=>t-e),this.releaseAll=this.updateTaken(e=>0),this.withPermits=e=>t=>cj(i=>l9(i(this.take(e)),e=>ys(i(t),this.release(e)))),this.withPermitsIfAvailable=e=>t=>cj(i=>c_(()=>this.free<e?ga:(this.taken+=e,ys(i(mK(t)),this.release(e))))),this.permits=e}get free(){return this.permits-this.taken}}let wY=e=>new wQ(e),wZ=((e,t)=>{let i=n9(t);return l9(pf(),t=>ch(_e(t7()),n=>[pg(wX(e,i,n),t),w0(n)]))},(e,t,i)=>{let n=rf(n9(t));return M(pn(),ck(t=>cp(e,t)),ch(e=>tg([i+n,e])))}),wX=(e,t,i)=>cj(n=>M(hX(e=>e.currentTimeMillis),l9(n=>_i(i,i=>{switch(i._tag){case"None":return tg(wZ(e,t,n));case"Some":{let[r]=i.value;return r-n<=0?tg(wZ(e,t,n)):t7()}}})),l9(e=>td(e)?l0("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(pa(e.value[1]))))),w0=e=>mi(e,t7()),w1=((e,t)=>l9(b0,i=>M(w5(e,i),ys(l9(i.value,t)))),C(2,(e,t)=>cj(i=>l9(t.fork(de),t=>M(i(e),cm(e=>t.close(e)),vP,ck(e=>t.addFinalizer(()=>l8(t=>eC(t,e.id())?cI:lU(c$(e)))))))))),w2=e=>vK(t=>w1(e,t)),w3=C(2,(e,t)=>M(l2(e),yn(l2(t)),e=>ci(e))),w5=C(2,(e,t)=>c9(yt,e=>e.zip(t))(e)),w4=((e,{duration:t,onTimeout:i})=>ci(w6(e,{onTimeout:()=>l5(i),onSuccess:cw,duration:t})),C(2,(e,{duration:t,onTimeout:i})=>ci(w6(e,{onTimeout:()=>l6(i),onSuccess:cw,duration:t})))),w6=C(2,(e,{duration:t,onSuccess:i,onTimeout:n})=>l8(r=>yr(e,cu(mD(t)),{onSelfWin:(e,t)=>l9(e.await,n=>"Success"===n._tag?l9(e.inheritAll,()=>lq(cq(t,r),i(n.value))):l9(cq(t,r),()=>uX(n.cause))),onOtherWin:(e,t)=>l9(e.await,i=>"Success"===i._tag?l9(e.inheritAll,()=>lq(cq(t,r),n())):l9(cq(t,r),()=>uX(i.cause))),otherScope:gN}))),w7=Symbol.for("effect/Ref/SynchronizedRef"),w8={_A:e=>e};class w9 extends h7{static{s=f6,o=f4}constructor(e,t){super(),this[w7]=w8,this[s]=f7,this[o]=f4,this.ref=e,this.withLock=t,this.get=mt(this.ref)}commit(){return this.get}modify(e){return this.modifyEffect(t=>cw(e(t)))}modifyEffect(e){return this.withLock(M(l9(mt(this.ref),e),l9(([e,t])=>lq(mi(this.ref,t),e))))}}let _e=e=>cS(()=>_t(e)),_t=e=>new w9(f9(e),wY(1).withPermits(1)),_i=C(2,(e,t)=>e.modifyEffect(e=>{let i=t(e);switch(i._tag){case"None":return cw([e,e]);case"Some":return ch(i.value,e=>[e,e])}})),_n=((e,t,i)=>({...tr,commit(){return gL(this)},[gz]:gA,id:()=>M(e.id(),aq(t.id())),await:M(e.await,ci,vX(ci(t.await),i,{concurrent:!0}),l2),children:e.children,inheritAll:cP(t.inheritAll,e.inheritAll),poll:cL(e.poll,t.poll,(e,t)=>M(e,il(e=>M(t,io(t=>pe(e,t,{onSuccess:i,onFailure:oW})))))),interruptAsFork:i=>cP(e.interruptAsFork(i),t.interruptAsFork(i)),pipe(){return eK(this,arguments)}}),Symbol.for("effect/ManagedRuntime")),_r="Fresh",_a="ProvideMerge",_s=e=>e.inheritAll,_o=e=>e.poll,_l=e=>(t,i)=>{let n=aG(),r=[[ua,[[n,e.context]]]];i?.scheduler&&r.push([mu,[[n,i.scheduler]]]);let a=db(e.fiberRefs,{entries:r,forkAs:n});i?.updateRefs&&(a=i.updateRefs(a,n));let s=new vx(n,a,e.runtimeFlags),o=t;i?.scope&&(o=l9(uF(i.scope,de),e=>cP(uk(e,l8(e=>eC(e,s.id())?cI:cq(s,e))),cm(t,t=>uE(e,t)))));let l=s.currentSupervisor;return l!==b2&&(l.onStart(e.context,o,t7(),s),s.addObserver(e=>l.onEnd(e,s))),gN.add(e.runtimeFlags,s),i?.immediate===!1?s.resume(o):s.start(o),s},_c=e=>(t,i={})=>{let n=_l(e)(t,i);return i.onExit&&n.addObserver(e=>{i.onExit(e)}),(t,i)=>_c(e)(M(n,cq(t??aK)),{...i,onExit:i?.onExit?e=>i.onExit(gy(e)):void 0})},_u=e=>t=>{let i=_b(e)(t);if("Failure"!==i._tag)return i.effect_instruction_i0;throw _g(i.effect_instruction_i0)};class _p extends Error{constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this._tag="AsyncFiberException",this.fiber=e,this.name=this._tag,this.stack=this.message}}let _h=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let i=new _p(e);return Error.stackTraceLimit=t,i},_d=Symbol.for("effect/Runtime/FiberFailure"),_f=Symbol.for("effect/Runtime/FiberFailure/Cause");class _m extends Error{constructor(e){super(),this[_d]=_d,this[_f]=e;let t=ly(e);if(t.length>0){let e=t[0];this.name=e.name,this.message=e.message,this.stack=e.stack}this.name=`(FiberFailure) ${this.name}`,(void 0===this.message||0===this.message.length)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[_f].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[ez](){return this.toString()}}let _g=e=>{let t=Error.stackTraceLimit;Error.stackTraceLimit=0;let i=new _m(e);return Error.stackTraceLimit=t,i},_x=e=>{switch(e._op){case"Failure":case"Success":return e;case"Left":return uZ(e.left);case"Right":return u6(e.right);case"Some":return u6(e.value);case"None":return uZ(uL())}},_b=e=>t=>{let i=_x(t);if(i)return i;let n=new mc,r=_l(e)(t,{scheduler:n});return n.flush(),r.unsafePoll()||uY(lZ(_h(r),pv(r)))},_v=e=>(t,i)=>_y(e)(t,i).then(e=>{switch(e._tag){case eX:return e.effect_instruction_i0;case eG:throw _g(e.effect_instruction_i0)}}),_y=e=>(t,i)=>new Promise(n=>{let r=_x(t);r&&n(r);let a=_l(e)(t);a.addObserver(e=>{n(e)}),i?.signal!==void 0&&(i.signal.aborted?a.unsafeInterruptAsFork(a.id()):i.signal.addEventListener("abort",()=>{a.unsafeInterruptAsFork(a.id())},{once:!0}))});class _w{constructor(e,t,i){this.context=e,this.runtimeFlags=t,this.fiberRefs=i}pipe(){return eK(this,arguments)}}let __=e=>new _w(e.context,e.runtimeFlags,e.fiberRefs),_S=()=>lL((e,t)=>cw(new _w(e.getFiberRef(ua),t.runtimeFlags,e.getFiberRefs()))),_k=oE(1,32,4),_O=__({context:tL(),runtimeFlags:_k,fiberRefs:da()}),_E=((e,t)=>__({context:e.context,runtimeFlags:t(e.runtimeFlags),fiberRefs:e.fiberRefs}),_l(_O)),_F=_v(_O),_j=_y(_O),_I=_u(_O),_C=_b(_O),_R=C(2,(e,t)=>e.modifyEffect(t)),_T=Symbol.for("effect/Layer"),_N={[_T]:{_RIn:e=>e,_E:e=>e,_ROut:e=>e},pipe(){return eK(this,arguments)}},_z=Symbol.for("effect/Layer/MemoMap"),_A=e=>X(e,_T),_M=e=>e._op_layer===_r;class _D{constructor(e){this.ref=e,this[_z]=_z}getOrElseMemoize(e,t){return M(_R(this.ref,i=>{let n=i.get(e);if(void 0!==n){let[e,r]=n;return cw([M(e,l9(([e,t])=>M(gi(e),lq(t))),cm(u5({onFailure:()=>cI,onSuccess:()=>uO(t,r)}))),i])}return M(me(0),l9(n=>M(pn(),l9(r=>M(me(()=>cI),ch(a=>{let s=cj(s=>M(v4(),l9(o=>M(s(l9(_U(e,o,!0),e=>mY(e(this)))),l2,l9(s=>{switch(s._tag){case eG:return M(pl(r,s.effect_instruction_i0),cP(uE(o,s)),cP(l4(s.effect_instruction_i0)));case eX:return M(mi(a,e=>M(uE(o,e),cR(mr(n,e=>[1===e,e-1])),lU)),cP(ma(n,e=>e+1)),cP(uO(t,t=>M(cS(()=>i.delete(e)),cP(mt(a)),l9(e=>e(t))))),cP(pu(r,s.effect_instruction_i0)),lq(s.effect_instruction_i0[1]))}}))))),o=[M(pa(r),cm(u4({onFailure:()=>cI,onSuccess:()=>ma(n,e=>e+1)}))),e=>M(mt(a),l9(t=>t(e)))];return[s,_M(e)?i:i.set(e,o)]}))))))}),ci)}}let _P=c_(()=>ch(_e(new Map),e=>new _D(e))),_L=()=>new _D(_t(new Map)),_$=C(2,(e,t)=>l9(_P,i=>l9(_U(e,t),e=>e(i)))),_q=C(3,(e,t,i)=>l9(_U(e,i),e=>e(t))),_U=(e,t,i=!1)=>{switch(e._op_layer){case"Locally":return cS(()=>i=>e.f(i.getOrElseMemoize(e.self,t)));case"ExtendScope":return cS(()=>t=>vK(i=>t.getOrElseMemoize(e.layer,i)));case"Fold":return cS(()=>i=>M(i.getOrElseMemoize(e.layer,t),cr({onFailure:n=>i.getOrElseMemoize(e.failureK(n),t),onSuccess:n=>i.getOrElseMemoize(e.successK(n),t)})));case"Fresh":return cS(()=>i=>M(e.layer,_$(t)));case"FromEffect":return i?cS(()=>t=>e.effect):cS(()=>i=>i.getOrElseMemoize(e,t));case"Provide":return cS(()=>i=>M(i.getOrElseMemoize(e.first,t),l9(n=>M(i.getOrElseMemoize(e.second,t),pg(n)))));case"Scoped":return i?cS(()=>i=>v6(e.effect,t)):cS(()=>i=>i.getOrElseMemoize(e,t));case"Suspend":return cS(()=>i=>i.getOrElseMemoize(e.evaluate(),t));case"ProvideMerge":return cS(()=>i=>M(i.getOrElseMemoize(e.first,t),cL(i.getOrElseMemoize(e.second,t),e.zipK)));case"ZipWith":return cS(()=>i=>M(i.getOrElseMemoize(e.first,t),vX(i.getOrElseMemoize(e.second,t),e.zipK,{concurrent:!0})))}},_B=((e,t)=>_Q(e,{onFailure:t,onSuccess:_3}),()=>_V(pf())),_J=e=>_H(oJ(e)),_H=e=>_V(l4(e)),_K=C(2,(e,t)=>_Q(e,{onFailure:_J,onSuccess:t})),_W=C(2,(e,t)=>{let i=tP(e),n=i?e:t;return _V(ch(i?t:e,e=>tI(n,e)))});function _V(e){let t=Object.create(_N);return t._op_layer="FromEffect",t.effect=e,t}(e,t)=>{let i=Object.create(_N);return i._op_layer="Locally",i.self=e,i.f=t,i};let _G=C(2,(e,{onFailure:t,onSuccess:i})=>{let n=Object.create(_N);return n._op_layer="Fold",n.layer=e,n.failureK=t,n.successK=i,n}),_Q=C(2,(e,{onFailure:t,onSuccess:i})=>_G(e,{onFailure:e=>{let i=o5(e);switch(i._tag){case"Left":return t(i.left);case"Right":return _H(i.right)}},onSuccess:i})),_Y=C(2,(e,t)=>_8(e,t,(e,t)=>tM(e,t))),_Z=(...e)=>{let t=e[0];for(let i=1;i<e.length;i++)t=_Y(t,e[i]);return t},_X=C(2,(e,t)=>{let i=tP(e),n=i?e:t;return _1(ch(i?t:e,e=>tI(n,e)))}),_0=e=>_1(M(e,lq(tL()))),_1=e=>{let t=Object.create(_N);return t._op_layer="Scoped",t.effect=e,t},_2=C(2,(e,t)=>{let i=tP(e);return _V(cw(tI(i?e:t,i?t:e)))}),_3=e=>_V(cw(e)),_5=e=>{let t=Object.create(_N);return t._op_layer="Suspend",t.evaluate=e,t},_4=C(2,(e,t)=>l9(vK(i=>_q(e,t,i)),e=>M(_S(),pg(e)))),_6=C(2,(e,t)=>_5(()=>{let i=Object.create(_N);return i._op_layer="Provide",i.first=Object.create(_N,{_op_layer:{value:_a,enumerable:!0},first:{value:_B(),enumerable:!0},second:{value:Array.isArray(t)?_Z(...t):t},zipK:{value:(e,t)=>M(e,tM(t))}}),i.second=e,i})),_7=C(2,(e,t)=>{let i=Object.create(_N);return i._op_layer=_a,i.first=t,i.second=_6(e,t),i.zipK=(e,t)=>M(e,tM(t)),i}),_8=C(3,(e,t,i)=>_5(()=>{let n=Object.create(_N);return n._op_layer="ZipWith",n.first=e,n.second=t,n.zipK=i,n})),_9=e=>{let t=tD("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return _K(_W(t,e),e=>tz(e,t))},Se=e=>{let t=tD("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return _K(_X(t,e),e=>tz(e,t))},St=C(2,(e,t)=>vW(i=>l9(_$(t,i),t=>px(e,t)))),Si=C(2,(e,t)=>{let i=dk(_O.fiberRefs,t.fiberRefs),n=oC(_O.runtimeFlags,t.runtimeFlags);return cj(r=>lL(a=>{let s=a.getFiberRef(ua),o=a.getFiberRefs(),l=dE(a.id(),o)(i),c=a.currentRuntimeFlags,u=oR(n)(c),p=dk(l,o),h=oC(u,c);return a.setFiberRefs(l),a.currentRuntimeFlags=u,ys(px(r(e),tM(s,t.context)),lL(e=>(e.setFiberRefs(dE(e.id(),e.getFiberRefs())(p)),e.currentRuntimeFlags=oR(h)(e.currentRuntimeFlags),cI)))}))}),Sn=C(2,(e,t)=>Array.isArray(t)?St(e,_Z(...t)):_A(t)?St(e,t):tE(t)?px(e,t):_n in t?l9(t.runtimeEffect,t=>Si(e,t)):Si(e,t)),Sr=Symbol.for("effect/MutableList"),Sa={[Sr]:Sr,[Symbol.iterator](){let e=!1,t=this.head;return{next(){if(e)return this.return();if(null==t)return e=!0,this.return();let i=t.value;return t=t.next,{done:e,value:i}},return:t=>(e||(e=!0),{done:!0,value:t})}},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(eA)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},Ss=e=>({value:e,removed:!1,prev:void 0,next:void 0}),So=()=>{let e=Object.create(Sa);return e.head=void 0,e.tail=void 0,e._length=0,e},Sl=e=>0===Sc(e),Sc=e=>e._length,Su=C(2,(e,t)=>{let i=Ss(t);return void 0===e.head&&(e.head=i),void 0===e.tail||(e.tail.next=i,i.prev=e.tail),e.tail=i,e._length+=1,e}),Sp=e=>{let t=e.head;if(void 0!==t)return Sh(e,t),t.value},Sh=(e,t)=>{!t.removed&&(t.removed=!0,void 0!==t.prev&&void 0!==t.next?(t.prev.next=t.next,t.next.prev=t.prev):void 0!==t.prev?(e.tail=t.prev,t.prev.next=void 0):void 0!==t.next?(e.head=t.next,t.next.prev=void 0):(e.tail=void 0,e.head=void 0),e._length>0&&(e._length-=1))},Sd=Symbol.for("effect/MutableQueue"),Sf=Symbol.for("effect/mutable/MutableQueue/Empty"),Sm={[Sd]:Sd,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return eM(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(eA)}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},Sg=e=>{let t=Object.create(Sm);return t.queue=So(),t.capacity=e,t},Sx=e=>Sg(e),Sb=()=>Sg(void 0),Sv=e=>Sc(e.queue),Sy=e=>Sl(e.queue),Sw=e=>void 0===e.capacity?1/0:e.capacity,S_=C(2,(e,t)=>{let i=Sc(e.queue);return(void 0===e.capacity||i!==e.capacity)&&(Su(t)(e.queue),!0)}),SS=C(2,(e,t)=>{let i;let n=t[Symbol.iterator](),r=ny(),a=!0;for(;a&&(i=n.next())&&!i.done;)a=S_(i.value)(e);for(;null!=i&&!i.done;)r=nT(i.value)(r),i=n.next();return nE(r)}),Sk=C(2,(e,t)=>Sl(e.queue)?t:Sp(e.queue)),SO=C(2,(e,t)=>{let i=ny(),n=0;for(;n<t;){let t=Sk(Sf)(e);if(t===Sf)break;i=nT(t)(i),n+=1}return nE(i)}),SE=(e,t,i,n)=>su({_tag:"Complete",key:e,exit:t,entryStats:i,timeToLiveMillis:n}),SF=(e,t)=>su({_tag:"Pending",key:e,deferred:t}),Sj=(e,t)=>su({_tag:"Refreshing",deferred:e,complete:t}),SI=Symbol.for("effect/Cache/MapKey");class SC{constructor(e){this[SI]=SI,this.previous=void 0,this.next=void 0,this.current=e}[ex](){return M(eb(this.current),ey(eb(this.previous)),ey(eb(this.next)),ej(this))}[eI](e){return this===e||ST(e)&&eC(this.current,e.current)&&eC(this.previous,e.previous)&&eC(this.next,e.next)}}let SR=e=>new SC(e),ST=e=>X(e,SI);class SN{add(e){if(e!==this.tail){if(void 0===this.tail)this.head=e,this.tail=e;else{let t=e.previous,i=e.next;void 0!==i&&(e.next=void 0,void 0!==t?(t.next=i,i.previous=t):(this.head=i,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}}remove(){let e=this.head;if(void 0!==e){let t=e.next;void 0!==t?(e.next=void 0,this.head=t,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}constructor(){this.head=void 0,this.tail=void 0}}let Sz=()=>new SN,SA=(e,t,i,n,r,a)=>({map:e,keys:t,accesses:i,updating:n,hits:r,misses:a}),SM=()=>SA(xU(),Sz(),Sb(),ak(!1),0,0),SD=Symbol.for("effect/Cache"),SP={_Key:e=>e,_Error:e=>e,_Value:e=>e},SL=Symbol.for("effect/ConsumerCache"),S$={_Key:e=>e,_Error:e=>e,_Value:e=>e},Sq=e=>e,SU=e=>({loadedMillis:e});class SB{constructor(e,t,i,n,r){this[SD]=SP,this[SL]=S$,this.capacity=e,this.context=t,this.fiberId=i,this.lookup=n,this.timeToLive=r,this.cacheState=SM()}get(e){return ch(this.getEither(e),t1)}get cacheStats(){return cS(()=>Sq({hits:this.cacheState.hits,misses:this.cacheState.misses,size:xG(this.cacheState.map)}))}getOption(e){return c_(()=>t8(xB(this.cacheState.map,e),{onNone:()=>{let t=SR(e);return this.trackAccess(t),this.trackMiss(),cw(t7())},onSome:e=>this.resolveMapValue(e)}))}getOptionComplete(e){return c_(()=>t8(xB(this.cacheState.map,e),{onNone:()=>{let t=SR(e);return this.trackAccess(t),this.trackMiss(),cw(t7())},onSome:e=>this.resolveMapValue(e,!0)}))}contains(e){return cS(()=>xH(this.cacheState.map,e))}entryStats(e){return cS(()=>{let t=xB(this.cacheState.map,e);if(tf(t))switch(t.value._tag){case"Complete":return tg(SU(t.value.entryStats.loadedMillis));case"Pending":break;case"Refreshing":return tg(SU(t.value.complete.entryStats.loadedMillis))}return t7()})}getEither(e){return c_(()=>{let t,i;let n=ir(xB(this.cacheState.map,e));return(void 0===n&&(i=pi(this.fiberId),t=SR(e),xH(this.cacheState.map,e)?n=ir(xB(this.cacheState.map,e)):xK(this.cacheState.map,e,SF(t,i))),void 0===n)?(this.trackAccess(t),this.trackMiss(),ch(this.lookupValueOf(e,i),tQ)):l9(this.resolveMapValue(n),t8({onNone:()=>this.getEither(e),onSome:e=>cw(tG(e))}))})}invalidate(e){return cS(()=>{xV(this.cacheState.map,e)})}invalidateWhen(e,t){return cS(()=>{let i=xB(this.cacheState.map,e);tf(i)&&"Complete"===i.value._tag&&"Success"===i.value.exit._tag&&t(i.value.exit.value)&&xV(this.cacheState.map,e)})}get invalidateAll(){return cS(()=>{this.cacheState.map=xU()})}refresh(e){return hX(t=>c_(()=>{let i=pi(this.fiberId),n=ir(xB(this.cacheState.map,e));if(void 0===n&&(xH(this.cacheState.map,e)?n=ir(xB(this.cacheState.map,e)):xK(this.cacheState.map,e,SF(SR(e),i))),void 0===n)return lU(this.lookupValueOf(e,i));switch(n._tag){case"Complete":if(this.hasExpired(t,n.timeToLiveMillis))return eC(ir(xB(this.cacheState.map,e)),n)&&xV(this.cacheState.map,e),lU(this.get(e));return M(this.lookupValueOf(e,i),gd(()=>{if(eC(ir(xB(this.cacheState.map,e)),n)){let t=Sj(i,n);return xK(this.cacheState.map,e,t),!0}return!1}),lU);case"Pending":case"Refreshing":return pa(n.deferred)}}))}set(e,t){return hX(i=>cS(()=>{let n=i.unsafeCurrentTimeMillis(),r=u6(t),a=SE(SR(e),r,SU(n),n+rf(n9(this.timeToLive(r))));xK(this.cacheState.map,e,a)}))}get size(){return cS(()=>xG(this.cacheState.map))}get values(){return cS(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[1].exit.value);return e})}get entries(){return cS(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push([t[0],t[1].exit.value]);return e})}get keys(){return cS(()=>{let e=[];for(let t of this.cacheState.map)"Complete"===t[1]._tag&&"Success"===t[1].exit._tag&&e.push(t[0]);return e})}resolveMapValue(e,t=!1){return hX(i=>{switch(e._tag){case"Complete":if(this.trackAccess(e.key),this.hasExpired(i,e.timeToLiveMillis))return xV(this.cacheState.map,e.key.current),cw(t7());return this.trackHit(),ch(e.exit,tg);case"Pending":if(this.trackAccess(e.key),this.trackHit(),t)return cw(t7());return ch(pa(e.deferred),tg);case"Refreshing":if(this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(i,e.complete.timeToLiveMillis)){if(t)return cw(t7());return ch(pa(e.deferred),tg)}return ch(e.complete.exit,tg)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(S_(this.cacheState.accesses,e),aO(this.cacheState.updating,!1,!0)){let e=!0;for(;e;){let t=Sk(this.cacheState.accesses,Sf);t===Sf?e=!1:this.cacheState.keys.add(t)}let t=xG(this.cacheState.map);for(e=t>this.capacity;e;){let i=this.cacheState.keys.remove();void 0!==i?xH(this.cacheState.map,i.current)&&(xV(this.cacheState.map,i.current),t-=1,e=t>this.capacity):e=!1}aF(this.cacheState.updating,!1)}}hasExpired(e,t){return e.unsafeCurrentTimeMillis()>t}lookupValueOf(e,t){return hX(i=>c_(()=>M(this.lookup(e),pg(this.context),l2,l9(n=>{let r=i.unsafeCurrentTimeMillis(),a=SU(r),s=SE(SR(e),n,a,r+rf(n9(this.timeToLive(n))));return xK(this.cacheState.map,e,s),cP(po(t,n),n)}),cg(()=>cP(h5(t),cS(()=>{xV(this.cacheState.map,e)}))))))}}let SJ=(e,t,i)=>new SB(e,tL(),aD,t,e=>n9(i(e))),SH=(()=>ue(SJ(65536,()=>ch(pn(),e=>({listeners:new bK,handle:e})),()=>rc(60))),e=>M(pn(),l9(t=>M(mZ(e),cp(t),gt,ch(e=>cP(e,M(pa(t),l9(([e,t])=>lq(cM(gi(e[0]),cC(e[1])),t))))))))),SK=function(){let e=1==arguments.length?arguments[0]:arguments[1].bind(arguments[0]);return cN(()=>e(M))},SW=e=>e.length>=1?lK((t,i)=>{try{e(i).then(e=>t(u6(e)),e=>t(uY(e)))}catch(e){t(uY(e))}}):lK(t=>{try{e().then(e=>t(u6(e)),e=>t(uY(e)))}catch(e){t(uY(e))}}),SV=e=>m2(e,{onFailure:A,onSuccess:A}),SG=e=>l9(v4(),t=>v7(e,t)),SQ=(e,...t)=>m4(e)(...t),SY=e=>cS(()=>wY(e)),SZ=Symbol.for("effect/Encoding/errors/Decode"),SX=(e,t)=>{let i={_tag:"DecodeException",[SZ]:SZ,input:e};return q(t)&&(i.message=t),i},S0=new TextEncoder,S1=e=>{let t;let i=e.length,n="";for(t=2;t<i;t+=3)n+=S4[e[t-2]>>2],n+=S4[(3&e[t-2])<<4|e[t-1]>>4],n+=S4[(15&e[t-1])<<2|e[t]>>6],n+=S4[63&e[t]];return t===i+1&&(n+=S4[e[t-2]>>2],n+=S4[(3&e[t-2])<<4],n+="=="),t===i&&(n+=S4[e[t-2]>>2],n+=S4[(3&e[t-2])<<4|e[t-1]>>4],n+=S4[(15&e[t-1])<<2],n+="="),n},S2=e=>{let t=S3(e),i=t.length;if(i%4!=0)return tG(SX(t,`Length must be a multiple of 4, but is ${i}`));let n=t.indexOf("=");if(-1!==n&&(n<i-2||n===i-2&&"="!==t[i-1]))return tG(SX(t,"Found a '=' character, but it is not at the end"));try{let e=t.endsWith("==")?2:t.endsWith("=")?1:0,n=new Uint8Array(i/4*3-e);for(let e=0,r=0;e<i;e+=4,r+=3){let i=S5(t.charCodeAt(e))<<18|S5(t.charCodeAt(e+1))<<12|S5(t.charCodeAt(e+2))<<6|S5(t.charCodeAt(e+3));n[r]=i>>16,n[r+1]=i>>8&255,n[r+2]=255&i}return tQ(n)}catch(e){return tG(SX(t,e instanceof Error?e.message:"Invalid input"))}},S3=e=>e.replace(/[\n\r]/g,"");function S5(e){if(e>=S6.length)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);let t=S6[e];if(255===t)throw TypeError(`Invalid character ${String.fromCharCode(e)}`);return t}let S4=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],S6=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],S7=e=>{let t="";for(let i=0;i<e.length;++i)t+=S8[e[i]];return t},S8=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],S9=e=>{if(48<=e&&e<=57)return e-48;if(97<=e&&e<=102)return e-97+10;if(65<=e&&e<=70)return e-65+10;throw TypeError("Invalid input")},ke=e=>"string"==typeof e?S7(S0.encode(e)):S7(e),kt="effect/Redacted",ki=$("effect/Redacted/redactedRegistry",()=>new WeakMap),kn=Symbol.for(kt),kr={[kn]:{_A:e=>e},pipe(){return eK(this,arguments)},toString:()=>"<redacted>",toJSON:()=>"<redacted>",[ez]:()=>"<redacted>",[ex](){return M(eb(kt),ey(eb(ki.get(this))),ej(this))},[eI](e){return ka(e)&&eC(ki.get(this),ki.get(e))}},ka=e=>X(e,kn),ks=e=>{let t=Object.create(kr);return ki.set(t,e),t},ko=e=>{if(ki.has(e))return ki.get(e);throw Error("Unable to get redacted value")},kl=e=>t3((t,i)=>e(ko(t),ko(i))),kc={alphabet:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",minLength:0,blocklist:new Set(["0rgasm","1d10t","1d1ot","1di0t","1diot","1eccacu10","1eccacu1o","1eccacul0","1eccaculo","1mbec11e","1mbec1le","1mbeci1e","1mbecile","a11upat0","a11upato","a1lupat0","a1lupato","aand","ah01e","ah0le","aho1e","ahole","al1upat0","al1upato","allupat0","allupato","ana1","ana1e","anal","anale","anus","arrapat0","arrapato","arsch","arse","ass","b00b","b00be","b01ata","b0ceta","b0iata","b0ob","b0obe","b0sta","b1tch","b1te","b1tte","ba1atkar","balatkar","bastard0","bastardo","batt0na","battona","bitch","bite","bitte","bo0b","bo0be","bo1ata","boceta","boiata","boob","boobe","bosta","bran1age","bran1er","bran1ette","bran1eur","bran1euse","branlage","branler","branlette","branleur","branleuse","c0ck","c0g110ne","c0g11one","c0g1i0ne","c0g1ione","c0gl10ne","c0gl1one","c0gli0ne","c0glione","c0na","c0nnard","c0nnasse","c0nne","c0u111es","c0u11les","c0u1l1es","c0u1lles","c0ui11es","c0ui1les","c0uil1es","c0uilles","c11t","c11t0","c11to","c1it","c1it0","c1ito","cabr0n","cabra0","cabrao","cabron","caca","cacca","cacete","cagante","cagar","cagare","cagna","cara1h0","cara1ho","caracu10","caracu1o","caracul0","caraculo","caralh0","caralho","cazz0","cazz1mma","cazzata","cazzimma","cazzo","ch00t1a","ch00t1ya","ch00tia","ch00tiya","ch0d","ch0ot1a","ch0ot1ya","ch0otia","ch0otiya","ch1asse","ch1avata","ch1er","ch1ng0","ch1ngadaz0s","ch1ngadazos","ch1ngader1ta","ch1ngaderita","ch1ngar","ch1ngo","ch1ngues","ch1nk","chatte","chiasse","chiavata","chier","ching0","chingadaz0s","chingadazos","chingader1ta","chingaderita","chingar","chingo","chingues","chink","cho0t1a","cho0t1ya","cho0tia","cho0tiya","chod","choot1a","choot1ya","chootia","chootiya","cl1t","cl1t0","cl1to","clit","clit0","clito","cock","cog110ne","cog11one","cog1i0ne","cog1ione","cogl10ne","cogl1one","cogli0ne","coglione","cona","connard","connasse","conne","cou111es","cou11les","cou1l1es","cou1lles","coui11es","coui1les","couil1es","couilles","cracker","crap","cu10","cu1att0ne","cu1attone","cu1er0","cu1ero","cu1o","cul0","culatt0ne","culattone","culer0","culero","culo","cum","cunt","d11d0","d11do","d1ck","d1ld0","d1ldo","damn","de1ch","deich","depp","di1d0","di1do","dick","dild0","dildo","dyke","encu1e","encule","enema","enf01re","enf0ire","enfo1re","enfoire","estup1d0","estup1do","estupid0","estupido","etr0n","etron","f0da","f0der","f0ttere","f0tters1","f0ttersi","f0tze","f0utre","f1ca","f1cker","f1ga","fag","fica","ficker","figa","foda","foder","fottere","fotters1","fottersi","fotze","foutre","fr0c10","fr0c1o","fr0ci0","fr0cio","fr0sc10","fr0sc1o","fr0sci0","fr0scio","froc10","froc1o","froci0","frocio","frosc10","frosc1o","frosci0","froscio","fuck","g00","g0o","g0u1ne","g0uine","gandu","go0","goo","gou1ne","gouine","gr0gnasse","grognasse","haram1","harami","haramzade","hund1n","hundin","id10t","id1ot","idi0t","idiot","imbec11e","imbec1le","imbeci1e","imbecile","j1zz","jerk","jizz","k1ke","kam1ne","kamine","kike","leccacu10","leccacu1o","leccacul0","leccaculo","m1erda","m1gn0tta","m1gnotta","m1nch1a","m1nchia","m1st","mam0n","mamahuev0","mamahuevo","mamon","masturbat10n","masturbat1on","masturbate","masturbati0n","masturbation","merd0s0","merd0so","merda","merde","merdos0","merdoso","mierda","mign0tta","mignotta","minch1a","minchia","mist","musch1","muschi","n1gger","neger","negr0","negre","negro","nerch1a","nerchia","nigger","orgasm","p00p","p011a","p01la","p0l1a","p0lla","p0mp1n0","p0mp1no","p0mpin0","p0mpino","p0op","p0rca","p0rn","p0rra","p0uff1asse","p0uffiasse","p1p1","p1pi","p1r1a","p1rla","p1sc10","p1sc1o","p1sci0","p1scio","p1sser","pa11e","pa1le","pal1e","palle","pane1e1r0","pane1e1ro","pane1eir0","pane1eiro","panele1r0","panele1ro","paneleir0","paneleiro","patakha","pec0r1na","pec0rina","pecor1na","pecorina","pen1s","pendej0","pendejo","penis","pip1","pipi","pir1a","pirla","pisc10","pisc1o","pisci0","piscio","pisser","po0p","po11a","po1la","pol1a","polla","pomp1n0","pomp1no","pompin0","pompino","poop","porca","porn","porra","pouff1asse","pouffiasse","pr1ck","prick","pussy","put1za","puta","puta1n","putain","pute","putiza","puttana","queca","r0mp1ba11e","r0mp1ba1le","r0mp1bal1e","r0mp1balle","r0mpiba11e","r0mpiba1le","r0mpibal1e","r0mpiballe","rand1","randi","rape","recch10ne","recch1one","recchi0ne","recchione","retard","romp1ba11e","romp1ba1le","romp1bal1e","romp1balle","rompiba11e","rompiba1le","rompibal1e","rompiballe","ruff1an0","ruff1ano","ruffian0","ruffiano","s1ut","sa10pe","sa1aud","sa1ope","sacanagem","sal0pe","salaud","salope","saugnapf","sb0rr0ne","sb0rra","sb0rrone","sbattere","sbatters1","sbattersi","sborr0ne","sborra","sborrone","sc0pare","sc0pata","sch1ampe","sche1se","sche1sse","scheise","scheisse","schlampe","schwachs1nn1g","schwachs1nnig","schwachsinn1g","schwachsinnig","schwanz","scopare","scopata","sexy","sh1t","shit","slut","sp0mp1nare","sp0mpinare","spomp1nare","spompinare","str0nz0","str0nza","str0nzo","stronz0","stronza","stronzo","stup1d","stupid","succh1am1","succh1ami","succhiam1","succhiami","sucker","t0pa","tapette","test1c1e","test1cle","testic1e","testicle","tette","topa","tr01a","tr0ia","tr0mbare","tr1ng1er","tr1ngler","tring1er","tringler","tro1a","troia","trombare","turd","twat","vaffancu10","vaffancu1o","vaffancul0","vaffanculo","vag1na","vagina","verdammt","verga","w1chsen","wank","wichsen","x0ch0ta","x0chota","xana","xoch0ta","xochota","z0cc01a","z0cc0la","z0cco1a","z0ccola","z1z1","z1zi","ziz1","zizi","zocc01a","zocc0la","zocco1a","zoccola"])};class ku{constructor(e){var t,i,n;let r=null!==(t=null==e?void 0:e.alphabet)&&void 0!==t?t:kc.alphabet,a=null!==(i=null==e?void 0:e.minLength)&&void 0!==i?i:kc.minLength,s=null!==(n=null==e?void 0:e.blocklist)&&void 0!==n?n:kc.blocklist;if(new Blob([r]).size!==r.length)throw Error("Alphabet cannot contain multibyte characters");if(r.length<3)throw Error("Alphabet length must be at least 3");if(new Set(r).size!==r.length)throw Error("Alphabet must contain unique characters");if("number"!=typeof a||a<0||a>255)throw Error("Minimum length has to be between 0 and 255");let o=new Set,l=r.toLowerCase().split("");for(let e of s)if(e.length>=3){let t=e.toLowerCase(),i=t.split("");i.filter(e=>l.includes(e)).length===i.length&&o.add(t)}this.alphabet=this.shuffle(r),this.minLength=a,this.blocklist=o}encode(e){if(0===e.length)return"";if(e.filter(e=>e>=0&&e<=this.maxValue()).length!==e.length)throw Error(`Encoding supports numbers between 0 and ${this.maxValue()}`);return this.encodeNumbers(e)}decode(e){let t=[];if(""===e)return t;let i=this.alphabet.split("");for(let n of e.split(""))if(!i.includes(n))return t;let n=e.charAt(0),r=this.alphabet.indexOf(n),a=this.alphabet.slice(r)+this.alphabet.slice(0,r);a=a.split("").reverse().join("");let s=e.slice(1);for(;s.length>0;){let e=a.slice(0,1),i=s.split(e);if(i.length>0){if(""===i[0])return t;t.push(this.toNumber(i[0],a.slice(1))),i.length>1&&(a=this.shuffle(a))}s=i.slice(1).join(e)}return t}encodeNumbers(e,t=0){if(t>this.alphabet.length)throw Error("Reached max attempts to re-generate the ID");let i=e.reduce((e,t,i)=>this.alphabet[t%this.alphabet.length].codePointAt(0)+i+e,e.length)%this.alphabet.length;i=(i+t)%this.alphabet.length;let n=this.alphabet.slice(i)+this.alphabet.slice(0,i),r=n.charAt(0);n=n.split("").reverse().join("");let a=[r];for(let t=0;t!==e.length;t++){let i=e[t];a.push(this.toId(i,n.slice(1))),t<e.length-1&&(a.push(n.slice(0,1)),n=this.shuffle(n))}let s=a.join("");if(this.minLength>s.length)for(s+=n.slice(0,1);this.minLength-s.length>0;)n=this.shuffle(n),s+=n.slice(0,Math.min(this.minLength-s.length,n.length));return this.isBlockedId(s)&&(s=this.encodeNumbers(e,t+1)),s}shuffle(e){let t=e.split("");for(let e=0,i=t.length-1;i>0;e++,i--){let n=(e*i+t[e].codePointAt(0)+t[i].codePointAt(0))%t.length;[t[e],t[n]]=[t[n],t[e]]}return t.join("")}toId(e,t){let i=[],n=t.split(""),r=e;do i.unshift(n[r%n.length]),r=Math.floor(r/n.length);while(r>0);return i.join("")}toNumber(e,t){let i=t.split("");return e.split("").reduce((e,t)=>e*i.length+i.indexOf(t),0)}isBlockedId(e){let t=e.toLowerCase();for(let e of this.blocklist)if(e.length<=t.length){if(t.length<=3||e.length<=3){if(t===e)return!0}else if(/\d/.test(e)){if(t.startsWith(e)||t.endsWith(e))return!0}else if(t.includes(e))return!0}return!1}maxValue(){return Number.MAX_SAFE_INTEGER}}function kp(e){if("number"==typeof e)return e;let t=e.split(/(\d+)/).filter(Boolean);return Number(t[0])*({s:1,m:60,h:3600,d:86400})[(t[1]??"s").trim().slice(0,1)]}class kh extends f5{constructor(e){let t="string"==typeof e?{code:"INTERNAL_SERVER_ERROR",message:e}:e;super({message:t.message??function(e,t){return"string"==typeof e?e:e instanceof Error||e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:t??"An unknown error occurred"}(t.cause,t.code)}),this._tag="UploadThingError",this.name="UploadThingError",this.code=t.code,this.data=t.data,t.cause instanceof Error?this.cause=t.cause:ea(t.cause)&&U(t.cause.status)&&q(t.cause.statusText)?this.cause=Error(`Response ${t.cause.status} ${t.cause.statusText}`):q(t.cause)?this.cause=Error(t.cause):this.cause=t.cause}static toObject(e){return{code:e.code,message:e.message,data:e.data}}static serialize(e){return JSON.stringify(kh.toObject(e))}}let kd={name:"HMAC",hash:"SHA-256"},kf=new TextEncoder,km=(e,t)=>fw(function*(){let i=yield*fg({try:()=>crypto.subtle.importKey("raw",kf.encode(ko(t)),kd,!1,["sign"]),catch:e=>new kh({code:"BAD_REQUEST",message:"Invalid signing secret",cause:e})}),n=yield*fE(fg({try:()=>crypto.subtle.sign(kd,i,kf.encode(e)),catch:e=>new kh({code:"BAD_REQUEST",cause:e})}),e=>ke(new Uint8Array(e)));return`hmac-sha256=${n}`}).pipe(fU("signPayload")),kg=(e,t,i)=>fh(()=>{let n=JSON.stringify(i?.(e)??[e.name,e.size,e.type,e.lastModified,Date.now()]),r=function(e,t){let i,n;let r=e.split(""),a=ek(t);for(let e=0;e<r.length;e++)n=(a%(e+1)+e)%r.length,i=r[e],r[e]=r[n],r[n]=i;return r.join("")}(kc.alphabet,t),a=new ku({alphabet:r,minLength:36}).encode([Math.abs(ek(n))]);return new ku({alphabet:r,minLength:12}).encode([Math.abs(ek(t))])+a}).pipe(fU("generateKey")),kx=(e,t,i)=>fw(function*(){let n=new URL(e),r=i.ttlInSeconds?kp(i.ttlInSeconds):3600,a=Date.now()+1e3*r;n.searchParams.append("expires",a.toString()),i.data&&Object.entries(i.data).forEach(([e,t])=>{if(null==t)return;let i=encodeURIComponent(t);n.searchParams.append(e,i)});let s=yield*km(n.toString(),t);return n.searchParams.append("signature",s),n.href}).pipe(fU("generateSignedURL")),kb=C(2,(e,t)=>c8(vb,t)(e)),kv=e=>_0(v9(vE,ad(e))),ky=e=>_9(ch(e,kv)),kw=e=>Se(ch(e,kv)),k_=e=>_0(v9(vE,af(e))),kS=C(2,(e,t)=>_K(k_(e),()=>kv(t))),kk=C(2,(e,t)=>_K(k_(e),()=>ky(t))),kO=C(2,(e,t)=>_K(k_(e),()=>kw(t))),kE=e=>_V(ch(e,()=>tL())),kF=e=>_0(vG(e)),kj=Symbol.for("@effect/platform/Cookies"),kI=Symbol.for("@effect/platform/Cookies/Cookie"),kC={[kj]:kj,...eD,toJSON(){return{_id:"@effect/platform/Cookies",cookies:iw(this.cookies,e=>e.toJSON())}},pipe(){return eK(this,arguments)}},kR=e=>{let t=Object.create(kC);return t.cookies=e,t},kT=e=>{let t={};for(let i of e)t[i.name]=i;return kR(t)},kN=e=>{let t=[];for(let i of"string"==typeof e?[e]:e){let e=function(e){let t=e.split(";").map(e=>e.trim()).filter(e=>""!==e);if(0===t.length)return t7();let i=t[0].indexOf("=");if(-1===i)return t7();let n=t[0].slice(0,i);if(!kz.test(n))return t7();let r=t[0].slice(i+1),a=kM(r);if(1===t.length)return tg(Object.assign(Object.create(kA),{name:n,value:a,valueEncoded:r}));let s={};for(let e=1;e<t.length;e++){let i=t[e],n=i.indexOf("="),r=-1===n?i:i.slice(0,n).trim(),a=-1===n?void 0:i.slice(n+1).trim();switch(r.toLowerCase()){case"domain":{if(void 0===a)break;let e=a.trim().replace(/^\./,"");e&&(s.domain=e);break}case"expires":{if(void 0===a)break;let e=new Date(a);isNaN(e.getTime())||(s.expires=e);break}case"max-age":{if(void 0===a)break;let e=parseInt(a,10);isNaN(e)||(s.maxAge=rc(e));break}case"path":if(void 0===a)break;"/"===a[0]&&(s.path=a);break;case"priority":if(void 0===a)break;switch(a.toLowerCase()){case"low":s.priority="low";break;case"medium":s.priority="medium";break;case"high":s.priority="high"}break;case"httponly":s.httpOnly=!0;break;case"secure":s.secure=!0;break;case"partitioned":s.partitioned=!0;break;case"samesite":if(void 0===a)break;switch(a.toLowerCase()){case"lax":s.sameSite="lax";break;case"strict":s.sameSite="strict";break;case"none":s.sameSite="none"}}}return tg(Object.assign(Object.create(kA),{name:n,value:a,valueEncoded:r,options:Object.keys(s).length>0?s:void 0}))}(i.trim());tf(e)&&t.push(e.value)}return kT(t)},kz=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,kA={[kI]:kI,...eD,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}},kM=((e,t)=>kR({...e.cookies,...t.cookies}),e=>{try{return decodeURIComponent(e)}catch(t){return e}}),kD=Symbol.for("effect/BigDecimal"),kP={[kD]:kD,[ex](){let e=kH(this);return M(eb(e.value),ey(eS(e.scale)),ej(this))},[eI](e){return kL(e)&&kG(this,e)},toString(){return`BigDecimal(${kQ(this)})`},toJSON(){return{_id:"BigDecimal",value:String(this.value),scale:this.scale}},[ez](){return this.toJSON()},pipe(){return eK(this,arguments)}},kL=e=>X(e,kD),k$=(e,t)=>{let i=Object.create(kP);return i.value=e,i.scale=t,i},kq=(e,t)=>{if(e!==kU&&e%kB===kU)throw RangeError("Value must be normalized");let i=k$(e,t);return i.normalized=i,i},kU=BigInt(0),kB=BigInt(10),kJ=kq(kU,0),kH=e=>{if(void 0===e.normalized){if(e.value===kU)e.normalized=kJ;else{let t=`${e.value}`,i=0;for(let e=t.length-1;e>=0;e--)if("0"===t[e])i++;else break;0===i&&(e.normalized=e);let n=BigInt(t.substring(0,t.length-i)),r=e.scale-i;e.normalized=kq(n,r)}}return e.normalized},kK=C(2,(e,t)=>t>e.scale?k$(e.value*kB**BigInt(t-e.scale),t):t<e.scale?k$(e.value/kB**BigInt(e.scale-t),t):e),kW=e=>e.value<kU?k$(-e.value,e.scale):e,kV=t3((e,t)=>e.scale>t.scale?kK(t,e.scale).value===e.value:e.scale<t.scale?kK(e,t.scale).value===t.value:e.value===t.value),kG=C(2,(e,t)=>kV(e,t)),kQ=e=>{let t,i;let n=kH(e);if(Math.abs(n.scale)>=16)return kY(n);let r=n.value<kU,a=r?`${n.value}`.substring(1):`${n.value}`;if(n.scale>=a.length)t="0",i="0".repeat(n.scale-a.length)+a;else{let e=a.length-n.scale;if(e>a.length){let n=e-a.length;t=`${a}${"0".repeat(n)}`,i=""}else i=a.slice(e),t=a.slice(0,e)}let s=""===i?t:`${t}.${i}`;return r?`-${s}`:s},kY=e=>{if(kZ(e))return"0e+0";let t=kH(e),i=`${kW(t).value}`,n=i.slice(0,1),r=i.slice(1),a=`${kX(t)?"-":""}${n}`;""!==r&&(a+=`.${r}`);let s=r.length-t.scale;return`${a}e${s>=0?"+":""}${s}`},kZ=e=>e.value===kU,kX=e=>e.value<kU,k0=e=>pK(e,void 0,pH),k1=Symbol.for("effect/Config"),k2={...tr,[k1]:{_A:e=>e},commit(){return h2(this)}},k3=C(2,(e,t)=>k4(e,e=>tQ(t(e)))),k5=C(2,(e,t)=>k4(e,e=>{try{return tQ(t(e))}catch(e){return tG(p$([],e instanceof Error?e.message:`${e}`))}})),k4=C(2,(e,t)=>{let i=Object.create(k2);return i._tag=p2,i.original=e,i.mapOrFail=t,i}),k6=C(2,(e,t)=>{let i=Object.create(k2);return i._tag=p3,i.name=t,i.config=e,i}),k7=C(2,(e,t)=>{let i=Object.create(k2);return i._tag=p0,i.first=e,i.second=Oi(t),i.condition=N,i}),k8=C(2,(e,t)=>{let i=Object.create(k2);return i._tag=p0,i.first=e,i.second=Oi(t.orElse),i.condition=t.if,i}),k9=(e,t)=>{let i=Object.create(k2);return i._tag=p5,i.description=e,i.parse=t,i},Oe=e=>{let t=k9("a text property",tQ);return void 0===e?t:k6(t,e)},Ot=e=>{let t=Object.create(k2);return t._tag=pX,t.value=e,t.parse=()=>tQ(e),t},Oi=e=>{let t=Object.create(k2);return t._tag=p1,t.config=e,t},On=C(2,(e,t)=>k8(e,{orElse:()=>Ot(t),if:k0})),Or=((e,t,i)=>{let n=Object.create(k2);return n._tag=p4,n.left=e,n.right=t,n.zip=i,n},function(){let e=Symbol.for("effect/Data/Error/plainArgs");return class extends uI{constructor(t){super(t?.message,t?.cause?{cause:t.cause}:void 0),t&&(Object.assign(this,t),Object.defineProperty(this,e,{value:t,enumerable:!1}))}toJSON(){return{...this[e],...this}}}}()),Oa=e=>{class t extends Or{constructor(...t){super(...t),this._tag=e}}return t.prototype.name=e,t},Os=(e,t)=>{switch(t._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(e);case"SymbolKeyword":return Object.getOwnPropertySymbols(e);case"Refinement":return Os(e,t.from)}},Oo=e=>Object.keys(e).concat(Object.getOwnPropertySymbols(e)),Ol=e=>{let t,i=!1;return()=>(i||(t=e(),i=!0),t)},Oc=e=>{try{return e.toISOString()}catch(t){return String(e)}},Ou=e=>{if(q(e))return JSON.stringify(e);if(U(e)||null==e||B(e)||H(e))return String(e);if(en(e))return Oc(e);if(J(e))return String(e)+"n";if(!iz(e)&&X(e,"toString")&&K(e.toString)&&e.toString!==Object.prototype.toString)return e.toString();try{if(JSON.stringify(e),iz(e))return`[${e.map(Ou).join(",")}]`;return`{${Oo(e).map(t=>`${q(t)?JSON.stringify(t):String(t)}:${Ou(e[t])}`).join(",")}}`}catch(t){return String(e)}},Op=e=>"string"==typeof e?JSON.stringify(e):String(e),Oh=e=>Array.isArray(e),Od=e=>!Array.isArray(e),Of=e=>`[${Op(e)}]`,Om=e=>Oh(e)?e.map(Of).join(""):Of(e),Og=(e,t,i,n)=>{let r=e;return i&&iM(i)&&(r+=`
at path: ${Om(i)}`),void 0!==t&&(r+=`
details: ${t}`),n&&(r+=`
schema (${n._tag}): ${n}`),r},Ox=(e,t,i)=>Og("Unsupported schema or overlapping types",`cannot extend ${e} with ${t}`,i),Ob=e=>Og("Unsupported key schema",void 0,void 0,e),Ov=e=>Og("Unsupported literal",`literal value: ${Ou(e)}`),Oy=e=>Og("Duplicate index signature",`${e} index signature`),Ow=Og("Unsupported index signature parameter","An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types"),O_=Og("Invalid element","A required element cannot follow an optional element. ts(1257)"),OS=e=>Og("Duplicate property signature transformation",`Duplicate key ${Ou(e)}`),Ok=e=>Og("Duplicate property signature",`Duplicate key ${Ou(e)}`),OO=Symbol.for("effect/SchemaId/GreaterThanOrEqualTo"),OE=Symbol.for("effect/SchemaId/Int"),OF=Symbol.for("effect/SchemaId/MinLength"),Oj=Symbol.for("effect/annotation/Brand"),OI=Symbol.for("effect/annotation/SchemaId"),OC=Symbol.for("effect/annotation/Message"),OR=Symbol.for("effect/annotation/MissingMessage"),OT=Symbol.for("effect/annotation/Identifier"),ON=Symbol.for("effect/annotation/Title"),Oz=Symbol.for("effect/annotation/AutoTitle"),OA=Symbol.for("effect/annotation/Description"),OM=Symbol.for("effect/annotation/Examples"),OD=Symbol.for("effect/annotation/Default"),OP=Symbol.for("effect/annotation/JSONSchema"),OL=Symbol.for("effect/annotation/Arbitrary"),O$=Symbol.for("effect/annotation/Pretty"),Oq=Symbol.for("effect/annotation/Equivalence"),OU=Symbol.for("effect/annotation/Documentation"),OB=Symbol.for("effect/annotation/Concurrency"),OJ=Symbol.for("effect/annotation/Batching"),OH=Symbol.for("effect/annotation/ParseIssueTitle"),OK=Symbol.for("effect/annotation/ParseOptions"),OW=Symbol.for("effect/annotation/DecodingFallback"),OV=Symbol.for("effect/annotation/Surrogate"),OG=Symbol.for("effect/annotation/StableFilter"),OQ=C(2,(e,t)=>Object.prototype.hasOwnProperty.call(e.annotations,t)?tg(e.annotations[t]):t7()),OY=OQ(Oj),OZ=OQ(OC),OX=OQ(OR),O0=OQ(ON),O1=OQ(Oz),O2=OQ(OT),O3=OQ(OA),O5=OQ(OB),O4=OQ(OJ),O6=OQ(OH),O7=OQ(OK),O8=OQ(OW),O9=OQ(OV),Ee=OQ(OG),Et=e=>im(Ee(e),e=>!0===e),Ei=Symbol.for("effect/annotation/JSONIdentifier"),En=OQ(Ei),Er=e=>ie(En(e),()=>O2(e)),Ea=Symbol.for("effect/schema/ParseJson");class Es{constructor(e,t,i,n={}){this._tag="Declaration",this.typeParameters=e,this.decodeUnknown=t,this.encodeUnknown=i,this.annotations=n}toString(){return t9(Fy(this),()=>"<declaration schema>")}toJSON(){return{_tag:this._tag,typeParameters:this.typeParameters.map(e=>e.toJSON()),annotations:Fm(this.annotations)}}}let Eo=e=>t=>t._tag===e;class El{constructor(e,t={}){this._tag="Literal",this.literal=e,this.annotations=t}toString(){return t9(Fy(this),()=>Ou(this.literal))}toJSON(){return{_tag:this._tag,literal:J(this.literal)?String(this.literal):this.literal,annotations:Fm(this.annotations)}}}let Ec=Eo("Literal"),Eu=new El(null);class Ep{constructor(e,t={}){this._tag="UniqueSymbol",this.symbol=e,this.annotations=t}toString(){return t9(Fy(this),()=>Ou(this.symbol))}toJSON(){return{_tag:this._tag,symbol:String(this.symbol),annotations:Fm(this.annotations)}}}class Eh{constructor(e={}){this._tag="UndefinedKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Ed=new Eh({[ON]:"undefined"});class Ef{constructor(e={}){this._tag="NeverKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Em=new Ef({[ON]:"never"});class Eg{constructor(e={}){this._tag="UnknownKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Ex=new Eg({[ON]:"unknown"});class Eb{constructor(e={}){this._tag="AnyKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Ev=new Eb({[ON]:"any"});class Ey{constructor(e={}){this._tag="StringKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Ew=new Ey({[ON]:"string",[OA]:"a string"}),E_=Eo("StringKeyword");class ES{constructor(e={}){this._tag="NumberKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let Ek=new ES({[ON]:"number",[OA]:"a number"}),EO=Eo("NumberKeyword");class EE{constructor(e={}){this._tag="BooleanKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let EF=new EE({[ON]:"boolean",[OA]:"a boolean"}),Ej=Eo("BooleanKeyword");class EI{constructor(e={}){this._tag="BigIntKeyword",this.annotations=e}toString(){return Fb(this)}toJSON(){return{_tag:this._tag,annotations:Fm(this.annotations)}}}let EC=Eo("SymbolKeyword"),ER=e=>{switch(e._tag){case"Literal":case"NumberKeyword":case"StringKeyword":case"TemplateLiteral":return!0;case"Union":return e.types.every(ER)}return!1},ET=e=>{switch(e._tag){case"Literal":return JSON.stringify(String(e.literal));case"StringKeyword":return"string";case"NumberKeyword":return"number";case"TemplateLiteral":return String(e);case"Union":return e.types.map(ET).join(" | ")}};class EN{constructor(e,t={}){this.type=e,this.annotations=t}toJSON(){return{type:this.type.toJSON(),annotations:Fm(this.annotations)}}toString(){return String(this.type)}}class Ez extends EN{constructor(e,t,i={}){super(e,i),this.isOptional=t}toJSON(){return{type:this.type.toJSON(),isOptional:this.isOptional,annotations:Fm(this.annotations)}}toString(){return String(this.type)+(this.isOptional?"?":"")}}let EA=e=>e.map(e=>e.type);class EM{constructor(e,t,i,n={}){this._tag="TupleType",this.elements=e,this.rest=t,this.isReadonly=i,this.annotations=n;let r=!1,a=!1;for(let t of e)if(t.isOptional)r=!0;else if(r){a=!0;break}if(a||r&&t.length>1)throw Error(O_)}toString(){return t9(Fy(this),()=>ED(this))}toJSON(){return{_tag:this._tag,elements:this.elements.map(e=>e.toJSON()),rest:this.rest.map(e=>e.toJSON()),isReadonly:this.isReadonly,annotations:Fm(this.annotations)}}}let ED=e=>{let t=e.elements.map(String).join(", ");return iC(e.rest,{onEmpty:()=>`readonly [${t}]`,onNonEmpty:(i,n)=>{let r=String(i),a=r.includes(" | ")?`(${r})`:r;if(n.length>0){let i=n.map(String).join(", ");return e.elements.length>0?`readonly [${t}, ...${a}[], ${i}]`:`readonly [...${a}[], ${i}]`}return e.elements.length>0?`readonly [${t}, ...${a}[]]`:`ReadonlyArray<${r}>`}})};class EP extends Ez{constructor(e,t,i,n,r){super(t,i,r),this.name=e,this.isReadonly=n}toString(){return(this.isReadonly?"readonly ":"")+String(this.name)+(this.isOptional?"?":"")+": "+this.type}toJSON(){return{name:String(this.name),type:this.type.toJSON(),isOptional:this.isOptional,isReadonly:this.isReadonly,annotations:Fm(this.annotations)}}}let EL=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return EL(e.from)}return!1};class E${constructor(e,t,i){if(this.type=t,this.isReadonly=i,EL(e))this.parameter=e;else throw Error(Ow)}toString(){return(this.isReadonly?"readonly ":"")+`[x: ${this.parameter}]: ${this.type}`}toJSON(){return{parameter:this.parameter.toJSON(),type:this.type.toJSON(),isReadonly:this.isReadonly}}}class Eq{constructor(e,t,i={}){this._tag="TypeLiteral",this.annotations=i;let n={};for(let t=0;t<e.length;t++){let i=e[t].name;if(Object.prototype.hasOwnProperty.call(n,i))throw Error(Ok(i));n[i]=null}let r={string:!1,symbol:!1};for(let e=0;e<t.length;e++){let i=Fg(t[e].parameter);if(E_(i)){if(r.string)throw Error(Oy("string"));r.string=!0}else if(EC(i)){if(r.symbol)throw Error(Oy("symbol"));r.symbol=!0}}this.propertySignatures=e,this.indexSignatures=t}toString(){return t9(Fy(this),()=>EB(this))}toJSON(){return{_tag:this._tag,propertySignatures:this.propertySignatures.map(e=>e.toJSON()),indexSignatures:this.indexSignatures.map(e=>e.toJSON()),annotations:Fm(this.annotations)}}}let EU=e=>e.map(String).join("; "),EB=e=>{if(e.propertySignatures.length>0){let t=e.propertySignatures.map(String).join("; ");return e.indexSignatures.length>0?`{ ${t}; ${EU(e.indexSignatures)} }`:`{ ${t} }`}return e.indexSignatures.length>0?`{ ${EU(e.indexSignatures)} }`:"{}"},EJ=Eo("TypeLiteral"),EH=iQ(iv(ib,e=>{switch(e._tag){case"AnyKeyword":return 0;case"UnknownKeyword":return 1;case"ObjectKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3}return 4})),EK={string:"StringKeyword",number:"NumberKeyword",boolean:"BooleanKeyword",bigint:"BigIntKeyword"},EW=e=>i8(e,e=>EZ(e)?EW(e.types):[e]),EV=e=>{let t=EH(e),i=[],n={},r=[];for(let e of t)switch(e._tag){case"NeverKeyword":break;case"AnyKeyword":return[Ev];case"UnknownKeyword":return[Ex];case"ObjectKeyword":case"UndefinedKeyword":case"VoidKeyword":case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"SymbolKeyword":n[e._tag]||(n[e._tag]=e,i.push(e));break;case"Literal":{let t=typeof e.literal;switch(t){case"string":case"number":case"bigint":case"boolean":n[EK[t]]||r.includes(e.literal)||(r.push(e.literal),i.push(e));break;case"object":r.includes(e.literal)||(r.push(e.literal),i.push(e))}break}case"UniqueSymbol":n.SymbolKeyword||r.includes(e.symbol)||(r.push(e.symbol),i.push(e));break;case"TupleType":n.ObjectKeyword||i.push(e);break;case"TypeLiteral":0===e.propertySignatures.length&&0===e.indexSignatures.length?n["{}"]||(n["{}"]=e,i.push(e)):n.ObjectKeyword||i.push(e);break;default:i.push(e)}return i};class EG{static{this.make=(e,t)=>EY(e)?new EG(e,t):1===e.length?e[0]:Em}static{this.unify=(e,t)=>EG.make(EV(EW(e)),t)}constructor(e,t={}){this._tag="Union",this.types=e,this.annotations=t}toString(){return t9(Fy(this),()=>this.types.map(String).join(" | "))}toJSON(){return{_tag:this._tag,types:this.types.map(e=>e.toJSON()),annotations:Fm(this.annotations)}}}let EQ=(e,t)=>e.map(t),EY=e=>e.length>1,EZ=Eo("Union"),EX=$(Symbol.for("effect/Schema/AST/toJSONMemoMap"),()=>new WeakMap);class E0{constructor(e,t={}){this._tag="Suspend",this.f=e,this.annotations=t,this.f=Ol(e)}toString(){return Fy(this).pipe(ie(()=>il(ia(this.f)(),e=>Fy(e))),t9(()=>"<suspended schema>"))}toJSON(){let e=this.f(),t=EX.get(e);return t||(EX.set(e,{_tag:this._tag}),t={_tag:this._tag,ast:e.toJSON(),annotations:Fm(this.annotations)},EX.set(e,t)),t}}class E1{constructor(e,t,i={}){this._tag="Refinement",this.from=e,this.filter=t,this.annotations=i}toString(){return O2(this).pipe(t9(()=>t8(Fv(this),{onNone:()=>`{ ${this.from} | filter }`,onSome:e=>E2(this.from)?String(this.from)+" & "+e:e})))}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),annotations:Fm(this.annotations)}}}let E2=Eo("Refinement"),E3={};class E5{constructor(e,t,i,n={}){this._tag="Transformation",this.from=e,this.to=t,this.transformation=i,this.annotations=n}toString(){return t9(Fy(this),()=>`(${String(this.from)} <-> ${String(this.to)})`)}toJSON(){return{_tag:this._tag,from:this.from.toJSON(),to:this.to.toJSON(),annotations:Fm(this.annotations)}}}class E4{constructor(e,t){this._tag="FinalTransformation",this.decode=e,this.encode=t}}class E6{constructor(){this._tag="ComposeTransformation"}}let E7=new E6;class E8{constructor(e,t,i,n){this.from=e,this.to=t,this.decode=i,this.encode=n}}class E9{constructor(e){this._tag="TypeLiteralTransformation",this.propertySignatureTransformations=e;let t={},i={};for(let n of e){let e=n.from;if(t[e])throw Error(OS(e));t[e]=!0;let r=n.to;if(i[r])throw Error(OS(r));i[r]=!0}}}let Fe=e=>"TypeLiteralTransformation"===e._tag,Ft=(e,t)=>{let i=Object.getOwnPropertyDescriptors(e),n={...e.annotations,...t},r=O9(e);return tf(r)&&(n[OV]=Ft(r.value,t)),i.annotations.value=n,Object.create(Object.getPrototypeOf(e),i)},Fi=(e,t)=>{switch(e._tag){case"Literal":return pR(String(e.literal));case"StringKeyword":return".*";case"NumberKeyword":return"[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?";case"TemplateLiteral":return Fr(e,t,!1);case"Union":return e.types.map(e=>Fi(e,t)).join("|")}},Fn=(e,t,i,n)=>{if(EZ(e)){if(i&&!n)return`(?:${t})`}else if(!i||!n)return t;return`(${t})`},Fr=(e,t,i)=>{let n="";if(""!==e.head){let r=pR(e.head);n+=t&&i?`(${r})`:r}for(let r of e.spans){let e=Fi(r.type,t);if(n+=Fn(r.type,e,t,i),""!==r.literal){let e=pR(r.literal);n+=t&&i?`(${e})`:e}}return n},Fa=e=>RegExp(`^${Fr(e,!1,!0)}$`),Fs=e=>{switch(e._tag){case"TupleType":{let t=!1,i=[];for(let n of e.elements)n.isOptional&&(t=!0),i.push(n.type);return t&&i.push(Ed),i=i.concat(EA(e.rest)),EG.make(i)}case"Refinement":return Fs(e.from);case"Union":return EG.make(e.types.map(Fs));case"Suspend":return Fs(e.f())}throw Error(errors_.getASTUnsupportedSchemaErrorMessage(e))},Fo=(e,t)=>{let i=[],n=[],r=e=>{switch(e._tag){case"NeverKeyword":break;case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":case"Refinement":n.push(new E$(e,t,!0));break;case"Literal":if(q(e.literal)||U(e.literal))i.push(new EP(e.literal,t,!1,!0));else throw Error(Ov(e.literal));break;case"Enums":for(let[n,r]of e.enums)i.push(new EP(r,t,!1,!0));break;case"UniqueSymbol":i.push(new EP(e.symbol,t,!1,!0));break;case"Union":e.types.forEach(r);break;default:throw Error(Ob(e))}};return r(e),{propertySignatures:i,indexSignatures:n}},Fl=e=>{switch(e._tag){case"TupleType":return!1===e.isReadonly?e:new EM(e.elements,e.rest,!1,e.annotations);case"TypeLiteral":{let t=Fp(e.propertySignatures,e=>!1===e.isReadonly?e:new EP(e.name,e.type,e.isOptional,!1,e.annotations)),i=Fp(e.indexSignatures,e=>!1===e.isReadonly?e:new E$(e.parameter,e.type,!1));return t===e.propertySignatures&&i===e.indexSignatures?e:new Eq(t,i,e.annotations)}case"Union":{let t=Fp(e.types,Fl);return t===e.types?e:EG.make(t,e.annotations)}case"Suspend":return new E0(()=>Fl(e.f()),e.annotations);case"Refinement":{let t=Fl(e.from);return t===e.from?e:new E1(t,e.filter,e.annotations)}case"Transformation":{let t=Fl(e.from),i=Fl(e.to);return t===e.from&&i===e.to?e:new E5(t,i,e.transformation,e.annotations)}}return e},Fc=e=>{switch(e._tag){case"Declaration":{let t=Fp(e.typeParameters,Fc);return t===e.typeParameters?e:new Es(t,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let t=Fp(e.elements,e=>{let t=Fc(e.type);return t===e.type?e:new Ez(t,e.isOptional)}),i=EA(e.rest),n=Fp(i,Fc);return t===e.elements&&n===i?e:new EM(t,n.map(e=>new EN(e)),e.isReadonly,e.annotations)}case"TypeLiteral":{let t=Fp(e.propertySignatures,e=>{let t=Fc(e.type);return t===e.type?e:new EP(e.name,t,e.isOptional,e.isReadonly)}),i=Fp(e.indexSignatures,e=>{let t=Fc(e.type);return t===e.type?e:new E$(e.parameter,t,e.isReadonly)});return t===e.propertySignatures&&i===e.indexSignatures?e:new Eq(t,i,e.annotations)}case"Union":{let t=Fp(e.types,Fc);return t===e.types?e:EG.make(t,e.annotations)}case"Suspend":return new E0(()=>Fc(e.f()),e.annotations);case"Refinement":{let t=Fc(e.from);return t===e.from?e:new E1(t,e.filter,e.annotations)}case"Transformation":return Fc(e.to)}return e},Fu=e=>t8(Er(e),{onNone:()=>void 0,onSome:e=>({[Ei]:e})});function Fp(e,t){let i=!1,n=iO(e.length);for(let r=0;r<e.length;r++){let a=e[r],s=t(a);s!==a&&(i=!0),n[r]=s}return i?n:e}let Fh=e=>{switch(e._tag){case"Transformation":return e.from;case"Refinement":return Fh(e.from);case"Suspend":return Fh(e.f())}},Fd=(e,t)=>{switch(e._tag){case"Declaration":{let i=Fp(e.typeParameters,e=>Fd(e,t));return i===e.typeParameters?e:new Es(i,e.decodeUnknown,e.encodeUnknown,e.annotations)}case"TupleType":{let i=Fp(e.elements,e=>{let i=Fd(e.type,t);return i===e.type?e:new Ez(i,e.isOptional)}),n=EA(e.rest),r=Fp(n,e=>Fd(e,t));return i===e.elements&&r===n?e:new EM(i,r.map(e=>new EN(e)),e.isReadonly,Fu(e))}case"TypeLiteral":{let i=Fp(e.propertySignatures,e=>{let i=Fd(e.type,t);return i===e.type?e:new EP(e.name,i,e.isOptional,e.isReadonly)}),n=Fp(e.indexSignatures,e=>{let i=Fd(e.type,t);return i===e.type?e:new E$(e.parameter,i,e.isReadonly)});return i===e.propertySignatures&&n===e.indexSignatures?e:new Eq(i,n,Fu(e))}case"Union":{let i=Fp(e.types,e=>Fd(e,t));return i===e.types?e:EG.make(i,Fu(e))}case"Suspend":return new E0(()=>Fd(e.f(),t),Fu(e));case"Refinement":{let i=Fd(e.from,t);if(t){if(i===e.from)return e;if(void 0===Fh(e.from)&&Et(e))return new E1(i,e.filter,e.annotations)}let n=Fu(e);return n?Ft(i,n):i}case"Transformation":{let i=Fu(e);return Fd(i?Ft(e.from,i):e.from,t)}}return e},Ff=e=>Fd(e,!1),Fm=e=>{let t={};for(let i of Object.getOwnPropertySymbols(e))t[String(i)]=e[i];return t},Fg=e=>{switch(e._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return e;case"Refinement":return Fg(e.from)}},Fx=(e,t)=>new E5(e,t,E7),Fb=e=>t9(Fy(e),()=>e._tag),Fv=e=>O0(e).pipe(ie(()=>O3(e)),ie(()=>O1(e)),io(t=>t+t8(OY(e),{onNone:()=>"",onSome:e=>e.map(e=>` & Brand<${Ou(e)}>`).join("")}))),Fy=e=>ie(O2(e),()=>Fv(e));class Fw{constructor(e,t,i){this._tag="Pointer",this.path=e,this.actual=t,this.issue=i}}class F_{constructor(e,t){this._tag="Unexpected",this.actual=e,this.message=t}}class FS{constructor(e,t){this._tag="Missing",this.actual=void 0,this.ast=e,this.message=t}}class Fk{constructor(e,t,i,n){this._tag="Composite",this.ast=e,this.actual=t,this.issues=i,this.output=n}}class FO{constructor(e,t,i,n){this._tag="Refinement",this.ast=e,this.actual=t,this.kind=i,this.issue=n}}class FE{constructor(e,t,i,n){this._tag="Transformation",this.ast=e,this.actual=t,this.kind=i,this.issue=n}}class FF{constructor(e,t,i){this._tag="Type",this.ast=e,this.actual=t,this.message=i}}class Fj{constructor(e,t,i){this._tag="Forbidden",this.ast=e,this.actual=t,this.message=i}}let FI=Symbol.for("effect/Schema/ParseErrorTypeId");class FC extends Oa("ParseError"){get message(){return this.toString()}toString(){return F8.formatIssueSync(this.issue)}toJSON(){return{_id:"ParseError",message:this.toString()}}[ez](){return this.toJSON()}constructor(...e){super(...e),this[FI]=FI}}let FR=e=>new FC({issue:e}),FT=C(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?t(e.right):l9(e,t)),FN=C(2,(e,t)=>"Left"===e._tag?e:"Right"===e._tag?tQ(t(e.right)):ch(e,t)),Fz=C(2,(e,t)=>"Left"===e._tag?tG(t(e.left)):"Right"===e._tag?e:cf(e,t)),FA=e=>{if("Left"===e._tag||"Right"===e._tag)return e},FM=C(2,(e,t)=>"Left"===e._tag?tG(t.onFailure(e.left)):"Right"===e._tag?tQ(t.onSuccess(e.right)):cd(e,t)),FD=C(2,(e,t)=>"Left"===e._tag?t(e.left):"Right"===e._tag?e:lV(e,t)),FP=(e,t)=>void 0===t||U(t)?e:void 0===e?t:{...e,...t},FL=(e,t,i)=>{let n=FG(e,t);return(e,t)=>n(e,FP(i,t))},F$=(e,t,i)=>{let n=FL(e,t,i);return(e,t)=>t2(n(e,t),FR)},Fq=(e,t,i)=>{let n=FG(e,t);return(e,t)=>n(e,{...FP(i,t),isEffectAllowed:!0})},FU=(e,t)=>FL(e.ast,!0,t),FB=(e,t)=>Fq(e.ast,!0,t),FJ=(e,t)=>Fq(e.ast,!1,t),FH=(e,t)=>F$(Fc(e.ast),!0,t),FK=(e,t)=>{let i=FG(Fc(e.ast),!0);return(e,n)=>tV(i(e,{exact:!0,...FP(t,n)}))},FW=$(Symbol.for("effect/Schema/Parser/decodeMemoMap"),()=>new WeakMap),FV=$(Symbol.for("effect/Schema/Parser/encodeMemoMap"),()=>new WeakMap),FG=(e,t)=>{let i=t?FW:FV,n=i.get(e);if(n)return n;let r=FZ(e,t),a=O7(e),s=tf(a)?(e,t)=>r(e,FP(t,a.value)):r,o=O8(e),l=t&&tf(o)?(t,i)=>F3(FD(s(t,i),o.value),e,t,i):s;return i.set(e,l),l},FQ=e=>ir(O5(e)),FY=e=>ir(O4(e)),FZ=(e,t)=>{switch(e._tag){case"Refinement":if(t){let t=FG(e.from,!0);return(i,n)=>{n=n??E3;let r=n?.errors==="all";return F3(FT(FD(t(i,n),t=>{let a=new FO(e,i,"From",t);return r&&Et(e)&&js(t)?t8(e.filter(i,n,e),{onNone:()=>tG(a),onSome:t=>tG(new Fk(e,i,[a,new FO(e,i,"Predicate",t)]))}):tG(a)}),t=>t8(e.filter(t,n,e),{onNone:()=>tQ(t),onSome:t=>tG(new FO(e,i,"Predicate",t))})),e,i,n)}}{let t=FG(Fc(e),!0),i=FG(F2(e.from),!1);return(n,r)=>F3(FT(t(n,r),e=>i(e,r)),e,n,r)}case"Transformation":{let i=F6(e.transformation,t),n=t?FG(e.from,!0):FG(e.to,!1),r=t?FG(e.to,!0):FG(e.from,!1);return(a,s)=>F3(FT(Fz(n(a,s),i=>new FE(e,a,t?"Encoded":"Type",i)),n=>FT(Fz(i(n,s??E3,e,a),t=>new FE(e,a,"Transformation",t)),i=>Fz(r(i,s),i=>new FE(e,a,t?"Type":"Encoded",i)))),e,a,s)}case"Declaration":{let i=t?e.decodeUnknown(...e.typeParameters):e.encodeUnknown(...e.typeParameters);return(t,n)=>F3(i(t,n??E3,e),e,t,n)}case"Literal":return FX(e,t=>t===e.literal);case"UniqueSymbol":return FX(e,t=>t===e.symbol);case"UndefinedKeyword":return FX(e,W);case"NeverKeyword":return FX(e,Q);case"UnknownKeyword":case"AnyKeyword":case"VoidKeyword":return tQ;case"StringKeyword":return FX(e,q);case"NumberKeyword":return FX(e,U);case"BooleanKeyword":return FX(e,B);case"BigIntKeyword":return FX(e,J);case"SymbolKeyword":return FX(e,H);case"ObjectKeyword":return FX(e,Z);case"Enums":return FX(e,t=>e.enums.some(([e,i])=>i===t));case"TemplateLiteral":{let t=Fa(e);return FX(e,e=>q(e)&&t.test(e))}case"TupleType":{let i=e.elements.map(e=>FG(e.type,t)),n=e.rest.map(e=>FG(e.type,t)),r=e.elements.filter(e=>!e.isOptional);e.rest.length>0&&(r=r.concat(e.rest.slice(1)));let a=r.length,s=e.elements.length>0?e.elements.map((e,t)=>t).join(" | "):"never",o=FQ(e),l=FY(e);return(t,c)=>{let u;if(!iz(t))return tG(new FF(e,t));let p=c?.errors==="all",h=[],d=0,f=[],m=t.length;for(let i=m;i<=a-1;i++){let n=new Fw(i,t,new FS(r[i-m]));if(!p)return tG(new Fk(e,t,n,f));h.push([d++,n])}if(0===e.rest.length)for(let i=e.elements.length;i<=m-1;i++){let n=new Fw(i,t,new F_(t[i],`is unexpected, expected: ${s}`));if(!p)return tG(new Fk(e,t,n,f));h.push([d++,n])}let g=0;for(;g<i.length;g++)if(m<g+1){if(e.elements[g].isOptional)continue}else{let n=(0,i[g])(t[g],c),r=FA(n);if(r){if(tW(r)){let i=new Fw(g,t,r.left);if(!p)return tG(new Fk(e,t,i,F4(f)));h.push([d++,i]);continue}f.push([d++,r.right])}else{let i=d++,r=g;u||(u=[]),u.push(({es:a,output:s})=>l9(l1(n),n=>{if(tW(n)){let o=new Fw(r,t,n.left);return p?(a.push([i,o]),cI):tG(new Fk(e,t,o,F4(s)))}return s.push([i,n.right]),cI}))}}if(iM(n)){let[i,...r]=n;for(;g<m-r.length;g++){let n=i(t[g],c),r=FA(n);if(r){if(tW(r)){let i=new Fw(g,t,r.left);if(!p)return tG(new Fk(e,t,i,F4(f)));h.push([d++,i]);continue}f.push([d++,r.right])}else{let i=d++,r=g;u||(u=[]),u.push(({es:a,output:s})=>l9(l1(n),n=>{if(!tW(n))return s.push([i,n.right]),cI;{let o=new Fw(r,t,n.left);return p?(a.push([i,o]),cI):tG(new Fk(e,t,o,F4(s)))}}))}}for(let i=0;i<r.length;i++)if(!(m<(g+=i)+1)){let n=r[i](t[g],c),a=FA(n);if(a){if(tW(a)){let i=new Fw(g,t,a.left);if(!p)return tG(new Fk(e,t,i,F4(f)));h.push([d++,i]);continue}f.push([d++,a.right])}else{let i=d++,r=g;u||(u=[]),u.push(({es:a,output:s})=>l9(l1(n),n=>{if(tW(n)){let o=new Fw(r,t,n.left);return p?(a.push([i,o]),cI):tG(new Fk(e,t,o,F4(s)))}return s.push([i,n.right]),cI}))}}}let x=({es:i,output:n})=>t6(i)?tG(new Fk(e,t,F4(i),F4(n))):tQ(F4(n));if(u&&u.length>0){let e=u;return c_(()=>{let t={es:i2(h),output:i2(f)};return l9(vz(e,e=>e(t),{concurrency:o,batching:l,discard:!0}),()=>x(t))})}return x({output:f,es:h})}}case"TypeLiteral":{if(0===e.propertySignatures.length&&0===e.indexSignatures.length)return FX(e,ei);let i=[],n={},r=[];for(let a of e.propertySignatures)i.push([FG(a.type,t),a]),n[a.name]=null,r.push(a.name);let a=e.indexSignatures.map(e=>[FG(e.parameter,t),FG(e.type,t),e.parameter]),s=EG.make(e.indexSignatures.map(e=>e.parameter).concat(r.map(e=>H(e)?new Ep(e):new El(e)))),o=FG(s,t),l=FQ(e),c=FY(e);return(t,u)=>{let p,h;if(!ea(t))return tG(new FF(e,t));let d=u?.errors==="all",f=[],m=0,g=u?.onExcessProperty==="error",x=u?.onExcessProperty==="preserve",b={};if(g||x){for(let i of p=Oo(t))if(tW(FA(o(i,u)))){if(g){let n=new Fw(i,t,new F_(t[i],`is unexpected, expected: ${String(s)}`));if(!d)return tG(new Fk(e,t,n,b));f.push([m++,n]);continue}b[i]=t[i]}}let v=u?.exact===!0;for(let n=0;n<i.length;n++){let r=i[n][1],a=r.name,s=Object.prototype.hasOwnProperty.call(t,a);if(!s){if(r.isOptional)continue;if(v){let i=new Fw(a,t,new FS(r));if(!d)return tG(new Fk(e,t,i,b));f.push([m++,i]);continue}}let o=(0,i[n][0])(t[a],u),l=FA(o);if(l){if(tW(l)){let i=new Fw(a,t,s?l.left:new FS(r));if(!d)return tG(new Fk(e,t,i,b));f.push([m++,i]);continue}b[a]=l.right}else{let i=m++;h||(h=[]),h.push(({es:n,output:l})=>l9(l1(o),o=>{if(tW(o)){let c=new Fw(a,t,s?o.left:new FS(r));return d?(n.push([i,c]),cI):tG(new Fk(e,t,c,l))}return l[a]=o.right,cI}))}}for(let i=0;i<a.length;i++){let r=a[i],s=r[0],o=r[1];for(let i of Os(t,r[2])){let r=FA(s(i,u));if(r&&tV(r)){let r=o(t[i],u),a=FA(r);if(a){if(tW(a)){let n=new Fw(i,t,a.left);if(!d)return tG(new Fk(e,t,n,b));f.push([m++,n]);continue}Object.prototype.hasOwnProperty.call(n,i)||(b[i]=a.right)}else{let a=m++,s=i;h||(h=[]),h.push(({es:o,output:l})=>l9(l1(r),r=>{if(!tW(r))return Object.prototype.hasOwnProperty.call(n,i)||(l[i]=r.right),cI;{let i=new Fw(s,t,r.left);return d?(o.push([a,i]),cI):tG(new Fk(e,t,i,l))}}))}}}}let y=({es:i,output:n})=>{if(t6(i))return tG(new Fk(e,t,F4(i),n));if(u?.propertyOrder==="original"){let e=p||Oo(t);for(let t of r)-1===e.indexOf(t)&&e.push(t);let i={};for(let t of e)Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t]);return tQ(i)}return tQ(n)};if(h&&h.length>0){let e=h;return c_(()=>{let t={es:i2(f),output:Object.assign({},b)};return l9(vz(e,e=>e(t),{concurrency:l,batching:c,discard:!0}),()=>y(t))})}return y({es:f,output:b})}}case"Union":{let i=F1(e.types,t),n=Oo(i.keys),r=n.length,a=new Map;for(let i=0;i<e.types.length;i++)a.set(e.types[i],FG(e.types[i],t));let s=FQ(e)??1,o=FY(e);return(t,l)=>{let c;let u=[],p=0,h=[];if(r>0){if(Y(t))for(let e=0;e<r;e++){let r=n[e],a=i.keys[r].buckets;if(Object.prototype.hasOwnProperty.call(t,r)){let e=String(t[r]);if(Object.prototype.hasOwnProperty.call(a,e))h=h.concat(a[e]);else{let e=EG.make(i.keys[r].literals);u.push([p++,new Fk(new Eq([new EP(r,e,!1,!0)],[]),t,new Fw(r,t,new FF(e,t[r])))])}}else{let e=EG.make(i.keys[r].literals),n=new EP(r,e,!1,!0);u.push([p++,new Fk(new Eq([n],[]),t,new Fw(r,t,new FS(n)))])}}else u.push([p++,new FF(e,t)])}i.otherwise.length>0&&(h=h.concat(i.otherwise));for(let e=0;e<h.length;e++){let i=h[e],n=a.get(i)(t,l),r=c&&0!==c.length?void 0:FA(n);if(r){if(tV(r))return r;u.push([p++,r.left])}else{let e=p++;c||(c=[]),c.push(t=>c_(()=>"finalResult"in t?cI:l9(l1(n),i=>(tV(i)?t.finalResult=i:t.es.push([e,i.left]),cI))))}}let d=i=>t6(i)?1===i.length&&"Type"===i[0][1]._tag?tG(i[0][1]):tG(new Fk(e,t,F4(i))):tG(new FF(e,t));if(c&&c.length>0){let e=c;return c_(()=>{let t={es:i2(u)};return l9(vz(e,e=>e(t),{concurrency:s,batching:o,discard:!0}),()=>"finalResult"in t?t.finalResult:d(t.es))})}return d(u)}}case"Suspend":{let i=Ol(()=>FG(Ft(e.f(),e.annotations),t));return(e,t)=>i()(e,t)}}},FX=(e,t)=>i=>t(i)?tQ(i):tG(new FF(e,i)),F0=(e,t)=>{switch(e._tag){case"Declaration":{let i=O9(e);if(tf(i))return F0(i.value,t);break}case"TypeLiteral":{let i=[];for(let n=0;n<e.propertySignatures.length;n++){let r=e.propertySignatures[n],a=t?Ff(r.type):Fc(r.type);Ec(a)&&!r.isOptional&&i.push([r.name,a])}return i}case"TupleType":{let i=[];for(let n=0;n<e.elements.length;n++){let r=e.elements[n],a=t?Ff(r.type):Fc(r.type);Ec(a)&&!r.isOptional&&i.push([n,a])}return i}case"Refinement":return F0(e.from,t);case"Suspend":return F0(e.f(),t);case"Transformation":return F0(t?e.from:e.to,t)}return[]},F1=(e,t)=>{let i={},n=[];for(let r=0;r<e.length;r++){let a=e[r],s=F0(a,t);if(s.length>0)for(let e=0;e<s.length;e++){let[t,n]=s[e],r=String(n.literal);i[t]=i[t]||{buckets:{},literals:[]};let o=i[t].buckets;if(Object.prototype.hasOwnProperty.call(o,r)){if(e<s.length-1)continue;o[r].push(a),i[t].literals.push(n)}else{o[r]=[a],i[t].literals.push(n);break}}else n.push(a)}return{keys:i,otherwise:n}},F2=e=>E2(e)?F2(e.from):e,F3=(e,t,i,n)=>{let r=FA(e);if(r)return r;if(n?.isEffectAllowed===!0)return e;try{return _I(l1(e))}catch(e){return tG(new Fj(t,i,"cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work"))}},F5=([e],[t])=>e>t?1:e<t?-1:0;function F4(e){return e.sort(F5).map(e=>e[1])}let F6=(e,t)=>{switch(e._tag){case"FinalTransformation":return t?e.decode:e.encode;case"ComposeTransformation":return tQ;case"TypeLiteralTransformation":return i=>{let n=tQ(i);for(let i of e.propertySignatureTransformations){let[e,r]=t?[i.from,i.to]:[i.to,i.from],a=t?i.decode:i.encode;n=FN(n,t=>{let i=a(Object.prototype.hasOwnProperty.call(t,e)?tg(t[e]):t7());return delete t[e],tf(i)&&(t[r]=i.value),t})}return n}}},F7=(e,t=[])=>({value:e,forest:t}),F8={formatIssue:e=>ch(jx(e),F9),formatIssueSync:e=>_I(F8.formatIssue(e)),formatError:e=>F8.formatIssue(e.issue),formatErrorSync:e=>F8.formatIssueSync(e.issue)},F9=e=>e.value+je("\n",e.forest),je=(e,t)=>{let i,n="",r=t.length;for(let a=0;a<r;a++){i=t[a];let s=a===r-1;n+=e+(s?"└":"├")+"─ "+i.value,n+=je(e+(r>1&&!s?"│  ":"   "),i.forest)}return n},jt=e=>{switch(e){case"Encoded":return"Encoded side transformation failure";case"Transformation":return"Transformation process failure";case"Type":return"Type side transformation failure"}},ji=e=>{switch(e){case"From":return"From side refinement failure";case"Predicate":return"Predicate refinement failure"}},jn=e=>"ast"in e?tg(e.ast):t7(),jr=e=>jn(e).pipe(il(OZ),l9(t=>{let i=t(e);return q(i)?cw({message:i,override:!1}):lP(i)?ch(i,e=>({message:e,override:!1})):q(i.message)?cw({message:i.message,override:i.override}):ch(i.message,e=>({message:e,override:i.override}))})),ja=e=>t=>t._tag===e,js=ja("Composite"),jo=ja("Refinement"),jl=ja("Transformation"),jc=e=>jr(e).pipe(l9(t=>!t.override&&(js(e)||jo(e)&&"From"===e.kind||jl(e)&&"Transformation"!==e.kind)?jl(e)||jo(e)?jc(e.issue):t7():cw(t.message))),ju=e=>jn(e).pipe(il(O6),iu(t=>ii(t(e)))),jp=e=>jc(e).pipe(cx(()=>ju(e)),lV(()=>cw(function(e){var t;if(void 0!==e.message)return e.message;let i=E2(e.ast)?O3(t=e.ast).pipe(ie(()=>O0(t)),ie(()=>O1(t)),ie(()=>O2(t)),t9(()=>`{ ${t.from} | filter }`)):String(e.ast);return`Expected ${i}, actual ${Ou(e.actual)}`}(e)))),jh=e=>t9(ju(e),()=>String(e.ast)),jd=e=>e.message??"is forbidden",jf=e=>e.message??"is unexpected",jm=e=>OX(e.ast).pipe(l9(e=>{let t=e();return q(t)?cw(t):t}),lV(()=>cw(e.message??"is missing"))),jg=(e,t)=>ca(jc(e),{onFailure:t,onSuccess:e=>cw(F7(e))}),jx=e=>{switch(e._tag){case"Type":return ch(jp(e),F7);case"Forbidden":return cw(F7(jh(e),[F7(jd(e))]));case"Unexpected":return cw(F7(jf(e)));case"Missing":return ch(jm(e),F7);case"Transformation":return jg(e,()=>ch(jx(e.issue),t=>F7(jh(e),[F7(jt(e.kind),[t])])));case"Refinement":return jg(e,()=>ch(jx(e.issue),t=>F7(jh(e),[F7(ji(e.kind),[t])])));case"Pointer":return ch(jx(e.issue),t=>F7(Om(e.path),[t]));case"Composite":{let t=jh(e);return jg(e,()=>Oh(e.issues)?ch(vz(e.issues,jx),e=>F7(t,e)):ch(jx(e.issues),e=>F7(t,[e])))}}},jb=e=>cw([e]),jv=C(e=>Z(e[0]),(e,...t)=>{let i={};for(let n of t)n in e&&(i[n]=e[n]);return i}),jy=C(e=>Z(e[0]),(e,...t)=>{let i={...e};for(let e of t)delete i[e];return i}),jw=Symbol.for("effect/Schema"),j_=e=>class{static{this[jw]=jS}static{this.ast=e}static annotations(e){return j_(jE(this.ast,e))}static pipe(){return eK(this,arguments)}static toString(){return String(e)}constructor(){this[jw]=jS}},jS={_A:e=>e,_I:e=>e,_R:e=>e},jk={schemaId:OI,message:OC,missingMessage:OR,identifier:OT,title:ON,description:OA,examples:OM,default:OD,documentation:OU,jsonSchema:OP,arbitrary:OL,pretty:O$,equivalence:Oq,concurrency:OB,batching:OJ,parseIssueTitle:OH,parseOptions:OK,decodingFallback:OW},jO=e=>{if(!e)return{};let t={...e};for(let i in jk)i in e&&(t[jk[i]]=e[i],delete t[i]);return t},jE=(e,t)=>Ft(e,jO(t)),jF=e=>String(e.ast),jj=e=>j_(Ff(e.ast)),jI=e=>j_(Fc(e.ast)),jC=(e,t)=>{let i=FB(e,t);return(e,t)=>Fz(i(e,t),FR)},jR=e=>X(e,jw)&&Z(e[jw]),jT=e=>EY(e)?EG.make(EQ(e,e=>new El(e))):new El(e[0]),jN=(e,t=jT(e))=>class extends j_(t){static annotations(e){return jN(this.literals,jE(this.ast,e))}static{this.literals=[...e]}};function jz(...e){return iM(e)?jN(e):j$}let jA=(e,t,i)=>j_(new Es(e.map(e=>e.ast),(...e)=>t.decode(...e.map(j_)),(...e)=>t.encode(...e.map(j_)),jO(i))),jM=(e,t)=>{let i=()=>(t,i,n)=>e(t)?tQ(t):tG(new FF(n,t));return j_(new Es([],i,i,jO(t)))},jD=function(){if(Array.isArray(arguments[0])){let e=arguments[0],t=arguments[1],i=arguments[2];return jA(e,t,i)}let e=arguments[0],t=arguments[1];return jM(e,t)};class jP extends j_(Ed){}class jL extends j_(Eu){}class j$ extends j_(Em){}class jq extends j_(Ex){}class jU extends j_(Ew){}class jB extends j_(Ek){}class jJ extends j_(EF){}let jH=e=>EG.make(e.map(e=>e.ast)),jK=(e,t=jH(e))=>class extends j_(t){static annotations(e){return jK(this.members,jE(this.ast,e))}static{this.members=[...e]}};function jW(...e){return EY(e)?jK(e):iM(e)?e[0]:j$}let jV=e=>jW(e,jL),jG=e=>jW(e,jP),jQ=e=>jW(e,jL,jP);class jY{constructor(e,t){this.ast=e,this.from=t}annotations(e){return new jY(new Ez(this.ast.type,this.ast.isOptional,{...this.ast.annotations,...jO(e)}),this.from)}toString(){return`${this.ast.type}${this.ast.isOptional?"?":""}`}}let jZ=(e,t)=>new EM(e.map(e=>jR(e)?new Ez(e.ast,!1):e.ast),t.map(e=>jR(e)?new EN(e.ast):e.ast),!0),jX=(e,t,i=jZ(e,t))=>class extends j_(i){static annotations(e){return jX(this.elements,this.rest,jE(this.ast,e))}static{this.elements=[...e]}static{this.rest=[...t]}},j0=(e,t)=>class extends jX([],[e],t){static annotations(e){return j0(this.value,jE(this.ast,e))}static{this.value=e}},j1=e=>j0(e),j2=(e,t)=>class extends jX([e],[e],t){static annotations(e){return j2(this.value,jE(this.ast,e))}static{this.value=e}},j3=e=>e?'"?:"':'":"';class j5 extends Ez{constructor(e,t,i,n,r){super(e,t,n),this._tag="PropertySignatureDeclaration",this.isReadonly=i,this.defaultValue=r}toString(){let e=j3(this.isOptional),t=String(this.type);return`PropertySignature<${e}, ${t}, never, ${e}, ${t}>`}}class j4 extends Ez{constructor(e,t,i,n,r){super(e,t,n),this.isReadonly=i,this.fromKey=r}}class j6 extends Ez{constructor(e,t,i,n,r){super(e,t,n),this.isReadonly=i,this.defaultValue=r}}let j7=e=>void 0===e?"never":q(e)?JSON.stringify(e):String(e);class j8{constructor(e,t,i,n){this._tag="PropertySignatureTransformation",this.from=e,this.to=t,this.decode=i,this.encode=n}toString(){return`PropertySignature<${j3(this.to.isOptional)}, ${this.to.type}, ${j7(this.from.fromKey)}, ${j3(this.from.isOptional)}, ${this.from.type}>`}}let j9=(e,t)=>{switch(e._tag){case"PropertySignatureDeclaration":return new j5(e.type,e.isOptional,e.isReadonly,{...e.annotations,...t},e.defaultValue);case"PropertySignatureTransformation":return new j8(new j4(e.from.type,e.from.isOptional,e.from.isReadonly,e.from.annotations),new j6(e.to.type,e.to.isOptional,e.to.isReadonly,{...e.to.annotations,...t},e.to.defaultValue),e.decode,e.encode)}},Ie=Symbol.for("effect/PropertySignature"),It=e=>X(e,Ie);class Ii{constructor(e){this[Ie]=null,this.ast=e}pipe(){return eK(this,arguments)}annotations(e){return new Ii(j9(this.ast,jO(e)))}toString(){return String(this.ast)}}let In=e=>new Ii(e);class Ir extends Ii{constructor(e,t){super(e),this.from=t}annotations(e){return new Ir(j9(this.ast,jO(e)),this.from)}}let Ia=C(2,(e,t)=>{let i=e.ast;switch(i._tag){case"PropertySignatureDeclaration":return In(new j5(i.type,i.isOptional,i.isReadonly,i.annotations,t));case"PropertySignatureTransformation":return In(new j8(i.from,new j6(i.to.type,i.to.isOptional,i.to.isReadonly,i.to.annotations,t),i.decode,i.encode))}}),Is=e=>AST.pruneUndefined(e,Is,e=>{let t=Is(e.to);if(t)return new AST.Transformation(e.from,t,e.transformation)}),Io=(e,t,i)=>In(new j8(new j4(e.ast,!0,!0,{},void 0),new j6(t.ast,!1,!0,{},void 0),e=>tg(i.decode(e)),il(i.encode))),Il=(e,t,i)=>In(new j8(new j4(e.ast,!0,!0,{},void 0),new j6(t.ast,!0,!0,{},void 0),i.decode,i.encode)),Ic=(e,t)=>{let i=t?.exact,n=t?.default,r=t?.nullable,a=t?.as=="Option",s=t?.onNoneEncoding?ie(t.onNoneEncoding):R;return i?n?r?Ia(Io(jV(e),jI(e),{decode:t8({onNone:n,onSome:e=>null===e?n():e}),encode:tg}),n).ast:Ia(Io(e,jI(e),{decode:t8({onNone:n,onSome:R}),encode:tg}),n).ast:a?r?Io(jV(e),IY(jI(e)),{decode:ip(G),encode:s}).ast:Io(e,IY(jI(e)),{decode:R,encode:R}).ast:r?Il(jV(e),jI(e),{decode:ip(G),encode:R}).ast:new j5(e.ast,!0,!0,{},void 0):n?r?Ia(Io(jQ(e),jI(e),{decode:t8({onNone:n,onSome:e=>null==e?n():e}),encode:tg}),n).ast:Ia(Io(jG(e),jI(e),{decode:t8({onNone:n,onSome:e=>void 0===e?n():e}),encode:tg}),n).ast:a?r?Io(jQ(e),IY(jI(e)),{decode:ip(e=>null!=e),encode:s}).ast:Io(jG(e),IY(jI(e)),{decode:ip(V),encode:s}).ast:r?Il(jQ(e),jG(jI(e)),{decode:ip(G),encode:R}).ast:new j5(jG(e).ast,!0,!0,{},void 0)},Iu=C(e=>jR(e[0]),(e,t)=>new Ir(Ic(e,t),e)),Ip=(v=[OR],e=>{let t;for(let i of v)Object.prototype.hasOwnProperty.call(e.annotations,i)&&(void 0===t&&(t={}),t[i]=e.annotations[i]);return t}),Ih=(e,t)=>{let i=Oo(e),n=[];if(i.length>0){let r=[],a=[],s=[];for(let t=0;t<i.length;t++){let o=i[t],l=e[o];if(It(l)){let e=l.ast;switch(e._tag){case"PropertySignatureDeclaration":{let t=e.type,i=e.isOptional,s=e.annotations;r.push(new EP(o,t,i,!0,Ip(e))),a.push(new EP(o,Fc(t),i,!0,s)),n.push(new EP(o,t,i,!0,s));break}case"PropertySignatureTransformation":{let t=e.from.fromKey??o;r.push(new EP(t,e.from.type,e.from.isOptional,!0,e.from.annotations)),a.push(new EP(o,e.to.type,e.to.isOptional,!0,e.to.annotations)),s.push(new E8(t,o,e.decode,e.encode))}}}else r.push(new EP(o,l.ast,!1,!0)),a.push(new EP(o,Fc(l.ast),!1,!0)),n.push(new EP(o,l.ast,!1,!0))}if(iM(s)){let e=[],i=[];for(let n of t){let{indexSignatures:t,propertySignatures:s}=Fo(n.key.ast,n.value.ast);s.forEach(e=>{r.push(e),a.push(new EP(e.name,Fc(e.type),e.isOptional,e.isReadonly,e.annotations))}),t.forEach(t=>{e.push(t),i.push(new E$(t.parameter,Fc(t.type),t.isReadonly))})}return new E5(new Eq(r,e,{[Oz]:"Struct (Encoded side)"}),new Eq(a,i,{[Oz]:"Struct (Type side)"}),new E9(s))}}let r=[];for(let e of t){let{indexSignatures:t,propertySignatures:i}=Fo(e.key.ast,e.value.ast);i.forEach(e=>n.push(e)),t.forEach(e=>r.push(e))}return new Eq(n,r)},Id=(e,t)=>{for(let i of Oo(e)){let n=e[i];if(void 0===t[i]&&It(n)){let e=n.ast,r="PropertySignatureDeclaration"===e._tag?e.defaultValue:e.to.defaultValue;void 0!==r&&(t[i]=r())}}return t},If=(e,t,i=Ih(e,t))=>class extends j_(i){static annotations(e){return If(this.fields,this.records,jE(this.ast,e))}static{this.fields={...e}}static{this.records=[...t]}static{this.make=(t,i)=>{let n=Id(e,{...t});return I4(i)?n:FH(this)(n)}}static pick(...t){return Im(jv(e,...t))}static omit(...t){return Im(jy(e,...t))}};function Im(e,...t){return If(e,t)}let Ig=(e,t,i)=>{if(EJ(e)&&EJ(t)){let n=[...e.propertySignatures];for(let e of t.propertySignatures){let t=e.name,r=n.findIndex(e=>e.name===t);if(-1===r)n.push(e);else{let{isOptional:a,type:s}=n[r];n[r]=new EP(t,Iv(s,e.type,i.concat(t)),a,!0)}}return new Eq(n,e.indexSignatures.concat(t.indexSignatures))}throw Error(Ox(e,t,i))},Ix=(y=[OT],e=>{let t={...e.annotations};for(let e of y)delete t[e];return t}),Ib=(e,t)=>t.map(t=>new E1(t,e.filter,Ix(e))),Iv=(e,t,i)=>EG.make(Iw([e],[t],i)),Iy=e=>EZ(e)?e.types:[e],Iw=(e,t,i)=>i8(e,e=>i8(t,t=>{switch(t._tag){case"Literal":if(q(t.literal)&&E_(e)||U(t.literal)&&EO(e)||B(t.literal)&&Ej(e))return[t];break;case"StringKeyword":if(t===Ew){if(E_(e)||Ec(e)&&q(e.literal))return[e];if(E2(e))return Ib(e,Iw(Iy(e.from),[t],i))}else if(e===Ew)return[t];break;case"NumberKeyword":if(t===Ek){if(EO(e)||Ec(e)&&U(e.literal))return[e];if(E2(e))return Ib(e,Iw(Iy(e.from),[t],i))}else if(e===Ek)return[t];break;case"BooleanKeyword":if(t===EF){if(Ej(e)||Ec(e)&&B(e.literal))return[e];if(E2(e))return Ib(e,Iw(Iy(e.from),[t],i))}else if(e===EF)return[t];break;case"Union":return Iw(Iy(e),t.types,i);case"Suspend":return[new E0(()=>Iv(e,t.f(),i))];case"Refinement":return Ib(t,Iw(Iy(e),Iy(t.from),i));case"TypeLiteral":switch(e._tag){case"Union":return Iw(e.types,[t],i);case"Suspend":return[new E0(()=>Iv(e.f(),t,i))];case"Refinement":return Ib(e,Iw(Iy(e.from),[t],i));case"TypeLiteral":return[Ig(e,t,i)];case"Transformation":if(Fe(e.transformation))return[new E5(Ig(e.from,t,i),Ig(e.to,Fc(t),i),new E9(e.transformation.propertySignatureTransformations))]}break;case"Transformation":if(Fe(t.transformation))switch(e._tag){case"Union":return Iw(e.types,[t],i);case"Suspend":return[new E0(()=>Iv(e.f(),t,i))];case"Refinement":return Ib(e,Iw(Iy(e.from),[t],i));case"TypeLiteral":return[new E5(Ig(e,t.from,i),Ig(Fc(e),t.to,i),new E9(t.transformation.propertySignatureTransformations))];case"Transformation":if(Fe(e.transformation))return[new E5(Ig(e.from,t.from,i),Ig(e.to,t.to,i),new E9(t.transformation.propertySignatureTransformations.concat(e.transformation.propertySignatureTransformations)))]}}throw Error(Ox(e,t,i))})),I_=C(2,(e,t)=>j_(Iv(e.ast,t.ast,[]))),IS=C(e=>jR(e[1]),(e,t)=>j_(Fx(e.ast,t.ast))),Ik=e=>j_(new E0(()=>e().ast)),IO=Symbol.for("effect/SchemaId/Refine"),IE=(e,t,i)=>class extends j_(i){static annotations(e){return IE(this.from,this.filter,jE(this.ast,e))}static{this[IO]=e}static{this.from=e}static{this.filter=t}static{this.make=(e,t)=>I4(t)?e:FH(this)(e)}},IF=(e,t,i)=>{if(B(e))return e?t7():tg(new FF(t,i));if(q(e))return tg(new FF(t,i,e));if(void 0!==e){if("_tag"in e)return tg(e);let n=new FF(t,i,e.message);return tg(iM(e.path)?new Fw(e.path,i,n):n)}return t7()},Ij=(e,t,i)=>{if(Od(e))return IF(e,t,i);if(iM(e)){let n=ne(e,e=>IF(e,t,i));if(iM(n))return tg(1===n.length?n[0]:new Fk(t,i,n))}return t7()};function II(e,t){return i=>{function n(t,i,n){return Ij(e(t,i,n),n,t)}let r=new E1(i.ast,n,jO(t));return IE(i,n,r)}}let IC=(e,t,i)=>class extends j_(i){static annotations(e){return IC(this.from,this.to,jE(this.ast,e))}static{this.from=e}static{this.to=t}},IR=C(e=>jR(e[0])&&jR(e[1]),(e,t,i)=>IC(e,t,new E5(e.ast,t.ast,new E4(i.decode,i.encode)))),IT=C(e=>jR(e[0])&&jR(e[1]),(e,t,i)=>IR(e,t,{strict:!0,decode:(e,t,n,r)=>tQ(i.decode(e,r)),encode:(e,t,n,r)=>tQ(i.encode(e,r))})),IN=Symbol.for("effect/SchemaId/Trimmed"),Iz=Symbol.for("effect/SchemaId/StartsWith"),IA=jU.annotations({[OT]:"JsonString",[ON]:"JsonString",[OA]:"a string that will be parsed as JSON"}),IM=e=>IR(IA,jq,{strict:!0,decode:(t,i,n)=>tZ({try:()=>JSON.parse(t,e?.reviver),catch:e=>new FF(n,t,e.message)}),encode:(t,i,n)=>tZ({try:()=>JSON.stringify(t,e?.replacer,e?.space),catch:e=>new FF(n,t,e.message)})}).annotations({schemaId:Ea}),ID=(e,t)=>jR(e)?IS(ID(t),e):IM(e),IP=(e,t)=>i=>i.pipe(II(t=>t>=e,{schemaId:OO,title:`greaterThanOrEqualTo(${e})`,description:0===e?"a non-negative number":`a number greater than or equal to ${e}`,jsonSchema:{minimum:e},...t})),IL=e=>t=>t.pipe(II(e=>Number.isSafeInteger(e),{schemaId:OE,title:"int",description:"an integer",jsonSchema:{type:"integer"},...e}));class I$ extends jB.pipe(IL({identifier:"Int"})){}let Iq=e=>t=>e(t).map(ks),IU=(e,t,i,n)=>FM(e,{onFailure:e=>new Fk(i,n,e),onSuccess:t}),IB=e=>(t,i,n)=>ka(t)?IU(e(ko(t),i),ks,n,t):tG(new FF(n,t)),IJ=e=>jD([e],{decode:e=>IB(FB(e)),encode:e=>IB(FJ(e))},{description:"Redacted(<redacted>)",pretty:()=>()=>"Redacted(<redacted>)",arbitrary:Iq,equivalence:kl}),IH=jD(e=>e instanceof Uint8Array,{identifier:"Uint8ArrayFromSelf",pretty:()=>e=>`new Uint8Array(${JSON.stringify(Array.from(e))})`,arbitrary:()=>e=>e.uint8Array(),equivalence:()=>t4(eC)}),IK=(w="Uint8ArrayFromBase64",_=e=>S2(e),S=e=>"string"==typeof e?S1(S0.encode(e)):S1(e),IR(jU.annotations({description:"a string that will be parsed into a Uint8Array"}),IH,{strict:!0,decode:(e,t,i)=>tX(_(e),t=>new FF(i,e,t.message)),encode:e=>tQ(S(e))}).annotations({identifier:w})),IW=e=>"None"===e._tag?t7():tg(e.value),IV=(e,t)=>i=>i.oneof(t,i.record({_tag:i.constant("None")}),i.record({_tag:i.constant("Some"),value:e(i)})).map(IW),IG=e=>t8({onNone:()=>"none()",onSome:t=>`some(${e(t)})`}),IQ=e=>(t,i,n)=>th(t)?td(t)?tQ(t7()):IU(e(t.value,i),tg,n,t):tG(new FF(n,t)),IY=e=>jD([e],{decode:e=>IQ(FB(e)),encode:e=>IQ(FJ(e))},{description:`Option<${jF(e)}>`,pretty:IG,arbitrary:IV,equivalence:ih}),IZ=e=>jR(e)||It(e),IX=e=>Oo(e).every(t=>IZ(e[t])),I0=e=>"fields"in e?e.fields:I0(e[IO]),I1=e=>IX(e)?Im(e):jR(e)?e:Im(I0(e)),I2=e=>IX(e)?e:I0(e),I3=e=>(t,i)=>I8({kind:"Class",identifier:e,schema:I1(t),fields:I2(t),Base:sc,annotations:i}),I5=(e,t)=>{let i={...e};for(let n of Oo(t)){if(n in e)throw Error(Ok(n));i[n]=t[n]}return i},I4=e=>B(e)?e:e?.disableValidation??!1,I6=$("effect/Schema/astCache",()=>new WeakMap),I7=e=>void 0===e?[]:Array.isArray(e)?e:[e],I8=({Base:e,annotations:t,disableToString:i,fields:n,identifier:r,kind:a,schema:s})=>{let o=Symbol.for(`effect/Schema/${a}/${r}`),[l,c,u]=I7(t),p=jI(s),h=p.annotations({identifier:r,...l}),d=p.annotations({[Oz]:`${r} (Type side)`,...l}),f=s.annotations({[Oz]:`${r} (Constructor)`,...l}),m=s.annotations({[Oz]:`${r} (Encoded side)`,...u}),g=s.annotations({[Ei]:r,...u,...l,...c}),x=e=>X(e,o)&&FK(d)(e),b=class extends e{constructor(e={},t=!1){e={...e},"Class"!==a&&delete e._tag,e=Id(n,e),I4(t)||(e=FH(f)(e)),super(e,!0)}static{this[jw]=jS}static get ast(){let e=I6.get(this);return e||(e=IT(m,jD([d],{decode:()=>(e,t,i)=>e instanceof this||x(e)?tQ(e):tG(new FF(i,e)),encode:()=>(e,t)=>e instanceof this?tQ(e):FN(FJ(d)(e,t),e=>new this(e,!0))},{identifier:r,pretty:e=>t=>`${r}(${e(t)})`,arbitrary:e=>t=>e(t).map(e=>new this(e)),equivalence:R,[OV]:h.ast,...l}),{strict:!0,decode:e=>new this(e,!0),encode:R}).annotations({[OV]:g.ast,...c}).ast,I6.set(this,e)),e}static pipe(){return eK(this,arguments)}static annotations(e){return j_(this.ast).annotations(e)}static toString(){return`(${String(m)} <-> ${r})`}static make(...e){return new this(...e)}static{this.fields={...n}}static{this.identifier=r}static extend(e){return(t,i)=>{let r=I2(t),o=I1(t),l=I5(n,r);return I8({kind:a,identifier:e,schema:I_(s,o),fields:l,Base:this,annotations:i})}}static transformOrFail(e){return(t,i,r)=>{let o=I5(n,t);return I8({kind:a,identifier:e,schema:IR(s,jI(Im(o)),i),fields:o,Base:this,annotations:r})}}static transformOrFailFrom(e){return(t,i,r)=>{let o=I5(n,t);return I8({kind:a,identifier:e,schema:IR(jj(s),Im(o),i),fields:o,Base:this,annotations:r})}}get[o](){return o}};return!0!==i&&Object.defineProperty(b.prototype,"toString",{value(){return`${r}({ ${Oo(n).map(e=>`${Op(e)}: ${Ou(this[e])}`).join(", ")} })`},configurable:!0}),b},I9=jW(Im({_tag:jz("None")}).annotations({identifier:"FiberIdNoneEncoded"}),Im({_tag:jz("Runtime"),id:I$,startTimeMillis:I$}).annotations({identifier:"FiberIdRuntimeEncoded"}),Im({_tag:jz("Composite"),left:Ik(()=>I9),right:Ik(()=>I9)}).annotations({identifier:"FiberIdCompositeEncoded"})).annotations({identifier:"FiberIdEncoded"}),Ce=e=>e.letrec(t=>({None:e.record({_tag:e.constant("None")}),Runtime:e.record({_tag:e.constant("Runtime"),id:e.integer(),startTimeMillis:e.integer()}),Composite:e.record({_tag:e.constant("Composite"),left:t("FiberId"),right:t("FiberId")}),FiberId:e.oneof(t("None"),t("Runtime"),t("Composite"))})).FiberId.map(Ci),Ct=e=>{switch(e._tag){case"None":return"FiberId.none";case"Runtime":return`FiberId.runtime(${e.id}, ${e.startTimeMillis})`;case"Composite":return`FiberId.composite(${Ct(e.right)}, ${Ct(e.left)})`}},Ci=e=>{switch(e._tag){case"None":return aK;case"Runtime":return aW(e.id,e.startTimeMillis);case"Composite":return aV(Ci(e.left),Ci(e.right))}},Cn=e=>Im({_tag:jz("Die"),defect:e}),Cr=Im({_tag:jz("Empty")}),Ca=e=>Im({_tag:jz("Fail"),error:e}),Cs=Im({_tag:jz("Interrupt"),fiberId:I9}),Co=e=>Im({_tag:jz("Parallel"),left:e,right:e}),Cl=e=>Im({_tag:jz("Sequential"),left:e,right:e}),Cc=(e,t)=>{let i=Ik(()=>n),n=jW(Cr,Ca(e),Cn(t),Cs,Cl(i),Co(i)).annotations({title:`CauseEncoded<${jF(e)}>`});return n},Cu=(e,t)=>i=>i.letrec(n=>({Empty:i.record({_tag:i.constant("Empty")}),Fail:i.record({_tag:i.constant("Fail"),error:e(i)}),Die:i.record({_tag:i.constant("Die"),defect:t(i)}),Interrupt:i.record({_tag:i.constant("Interrupt"),fiberId:Ce(i)}),Sequential:i.record({_tag:i.constant("Sequential"),left:n("Cause"),right:n("Cause")}),Parallel:i.record({_tag:i.constant("Parallel"),left:n("Cause"),right:n("Cause")}),Cause:i.oneof(n("Empty"),n("Fail"),n("Die"),n("Interrupt"),n("Sequential"),n("Parallel"))})).Cause.map(Cf),Cp=e=>t=>{let i=t=>{switch(t._tag){case"Empty":return"Cause.empty";case"Fail":return`Cause.fail(${e(t.error)})`;case"Die":return`Cause.die(${cause_.pretty(t)})`;case"Interrupt":return`Cause.interrupt(${Ct(t.fiberId)})`;case"Sequential":return`Cause.sequential(${i(t.left)}, ${i(t.right)})`;case"Parallel":return`Cause.parallel(${i(t.left)}, ${i(t.right)})`}};return i(t)},Ch=e=>(t,i,n)=>cause_.isCause(t)?IU(e(function e(t){switch(t._tag){case"Empty":return{_tag:"Empty"};case"Fail":return{_tag:"Fail",error:t.error};case"Die":return{_tag:"Die",defect:t.defect};case"Interrupt":return{_tag:"Interrupt",fiberId:t.fiberId};case"Sequential":return{_tag:"Sequential",left:e(t.left),right:e(t.right)};case"Parallel":return{_tag:"Parallel",left:e(t.left),right:e(t.right)}}}(t),i),Cf,n,t):ParseResult.fail(new ParseResult.Type(n,t)),Cd=({defect:e,error:t})=>jD([t,e],{decode:(e,t)=>Ch(ParseResult.decodeUnknown(Cc(e,t))),encode:(e,t)=>Ch(ParseResult.encodeUnknown(Cc(e,t)))},{title:`Cause<${t.ast}>`,pretty:Cp,arbitrary:Cu});function Cf(e){switch(e._tag){case"Empty":return cause_.empty;case"Fail":return cause_.fail(e.error);case"Die":return cause_.die(e.defect);case"Interrupt":return cause_.interrupt(Ci(e.fiberId));case"Sequential":return cause_.sequential(Cf(e.left),Cf(e.right));case"Parallel":return cause_.parallel(Cf(e.left),Cf(e.right))}}let Cm=(e,t)=>Im({_tag:jz("Failure"),cause:Cc(e,t)}),Cg=e=>Im({_tag:jz("Success"),value:e}),Cx=e=>{switch(e._tag){case"Failure":return exit_.failCause(Cf(e.cause));case"Success":return exit_.succeed(e.value)}},Cb=(e,t,i)=>n=>n.oneof(n.record({_tag:n.constant("Failure"),cause:Cu(t,i)(n)}),n.record({_tag:n.constant("Success"),value:e(n)})).map(Cx),Cv=(e,t)=>i=>"Failure"===i._tag?`Exit.failCause(${Cp(t)(i.cause)})`:`Exit.succeed(${e(i.value)})`,Cy=(e,t)=>(i,n,r)=>exit_.isExit(i)?exit_.match(i,{onFailure:e=>IU(t(e,n),exit_.failCause,r,i),onSuccess:t=>IU(e(t,n),exit_.succeed,r,i)}):ParseResult.fail(new ParseResult.Type(r,i)),Cw=Symbol.for("@effect/platform/Headers"),C_=Object.assign(Object.create(null),{[Cw]:Cw,[eq](e){return CC(this,dm(e,CR))}}),CS=e=>Object.assign(Object.create(C_),e),Ck=Object.create(C_),CO=e=>{if(void 0===e)return Ck;if(Symbol.iterator in e){let t=Object.create(C_);for(let[i,n]of e)t[i.toLowerCase()]=n;return t}let t=Object.create(C_);for(let[i,n]of Object.entries(e))Array.isArray(n)?t[i.toLowerCase()]=n.join(", "):void 0!==n&&(t[i.toLowerCase()]=n);return t},CE=e=>Object.setPrototypeOf(e,C_),CF=C(3,(e,t,i)=>{let n=CS(e);return n[t.toLowerCase()]=i,n}),Cj=C(2,(e,t)=>CS({...e,...CO(t)})),CI=C(2,(e,t)=>{let i=CS(e);return delete i[t.toLowerCase()],i}),CC=C(2,(e,t)=>{let i={...e},n=t=>{if("string"==typeof t){let n=t.toLowerCase();n in e&&(i[n]=ks(e[n]))}else for(let n in e)t.test(n)&&(i[n]=ks(e[n]))};if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else n(t);return i}),CR=$("@effect/platform/Headers/currentRedactedNames",()=>ue(["authorization","cookie","set-cookie","x-api-key"])),CT=(e,t)=>{class i extends Or{constructor(...e){super(...e),this._tag=t}}return i.prototype[e]=e,i.prototype.name=t,i},CN=Symbol.for("@effect/platform/HttpClientError"),Cz=e=>X(e,CN);class CA extends CT(CN,"RequestError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}}class CM extends CT(CN,"ResponseError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){let e=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${e})`:`${this.reason} error (${e})`}}let CD=e=>CE({b3:`${e.traceId}-${e.spanId}-${e.sampled?"1":"0"}${"Some"===e.parent._tag?`-${e.parent.value.spanId}`:""}`,traceparent:`00-${e.traceId}-${e.spanId}-${e.sampled?"01":"00"}`}),CP=e=>{let t=Symbol.iterator in e?iF(e):Object.entries(e),i=[];for(let[e,n]of t)if(Array.isArray(n))for(let t=0;t<n.length;t++)void 0!==n[t]&&i.push([e,String(n[t])]);else void 0!==n&&i.push([e,String(n)]);return i},CL=((e,t,i)=>iT(nr(e,([e])=>e!==t),[t,String(i)]),C(2,(e,t)=>{let i=CP(t),n=i.map(([e])=>e);return iN(nr(e,([e])=>n.includes(e)),i)})),C$=((e,t,i)=>iT(e,[t,String(i)]),(e,t,i)=>{try{let n=new URL(e,Cq());for(let e=0;e<t.length;e++){let[i,r]=t[e];void 0!==r&&n.searchParams.append(i,r)}return"Some"===i._tag&&(n.hash=i.value),tQ(n)}catch(e){return tG(e)}}),Cq=()=>{if("location"in globalThis&&void 0!==globalThis.location&&void 0!==globalThis.location.origin&&void 0!==globalThis.location.pathname)return location.origin+location.pathname},CU=Symbol.for("effect/QueueEnqueue"),CB=Symbol.for("effect/QueueDequeue"),CJ=Symbol.for("effect/QueueStrategy"),CH=Symbol.for("effect/BackingQueue"),CK={_A:e=>e},CW={_A:e=>e},CV={_In:e=>e},CG={_Out:e=>e};class CQ extends h7{constructor(e,t,i,n,r){super(),this[CU]=CV,this[CB]=CG,this.queue=e,this.takers=t,this.shutdownHook=i,this.shutdownFlag=n,this.strategy=r}pipe(){return eK(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return c_(()=>lV(this.unsafeSize(),()=>cl))}unsafeSize(){return aE(this.shutdownFlag)?t7():tg(this.queue.length()-Sv(this.takers)+this.strategy.surplusSize())}get isEmpty(){return ch(this.size,e=>e<=0)}get isFull(){return ch(this.size,e=>e>=this.capacity())}get shutdown(){return cF(lL(e=>(M(this.shutdownFlag,aF(!0)),M(vM(Rs(this.takers),t=>pc(t,e.id()),!1,!1),cP(this.strategy.shutdown),cR(pu(this.shutdownHook,void 0)),lU))))}get isShutdown(){return cS(()=>aE(this.shutdownFlag))}get awaitShutdown(){return pa(this.shutdownHook)}isActive(){return!aE(this.shutdownFlag)}unsafeOffer(e){let t;if(aE(this.shutdownFlag))return!1;if(0===this.queue.length()){let i=M(this.takers,Sk(Sf));i!==Sf?(Rr(i,e),t=!0):t=!1}else t=!1;if(t)return!0;let i=this.queue.offer(e);return Rc(this.strategy,this.queue,this.takers),i}offer(e){return c_(()=>{let t;if(aE(this.shutdownFlag))return cl;if(0===this.queue.length()){let i=M(this.takers,Sk(Sf));i!==Sf?(Rr(i,e),t=!0):t=!1}else t=!1;if(t)return cw(!0);let i=this.queue.offer(e);return Rc(this.strategy,this.queue,this.takers),i?cw(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)})}offerAll(e){return c_(()=>{if(aE(this.shutdownFlag))return cl;let t=iF(e),i=0===this.queue.length()?iF(Ro(this.takers,t.length)):i4,[n,r]=M(t,i0(i.length));for(let e=0;e<i.length;e++)Rr(i[e],n[e]);if(0===r.length)return cw(!0);let a=this.queue.offerAll(r);return Rc(this.strategy,this.queue,this.takers),nq(a)?cw(!0):this.strategy.handleSurplus(a,this.queue,this.takers,this.shutdownFlag)})}get take(){return lL(e=>{if(aE(this.shutdownFlag))return cl;let t=this.queue.poll(Sf);if(t!==Sf)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),cw(t);{let t=pi(e.id());return M(c_(()=>(M(this.takers,S_(t)),Rc(this.strategy,this.queue,this.takers),aE(this.shutdownFlag)?cl:pa(t))),cg(()=>cS(()=>Rl(this.takers,t))))}})}get takeAll(){return c_(()=>aE(this.shutdownFlag)?cl:cS(()=>{let e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nS(e)}))}takeUpTo(e){return c_(()=>aE(this.shutdownFlag)?cl:cS(()=>{let t=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nS(t)}))}takeBetween(e,t){return c_(()=>CY(this,e,t,ny()))}}let CY=(e,t,i,n)=>i<t?cw(n):M(C4(e,i),l9(r=>{let a=t-r.length;return 1===a?M(C5(e),ch(e=>M(n,nM(r),nR(e)))):a>1?M(C5(e),l9(t=>CY(e,a-1,i-r.length-1,M(n,nM(r),nR(t))))):cw(M(n,nM(r)))})),CZ=(e,t,i,n,r)=>new CQ(e,t,i,n,r),CX=(e,t)=>M(pn(),ch(i=>CZ(e,Sb(),i,ak(!1),t)));class C0{constructor(e){this[CH]=CW,this.mutable=e}poll(e){return Sk(this.mutable,e)}pollUpTo(e){return SO(this.mutable,e)}offerAll(e){return SS(this.mutable,e)}offer(e){return S_(this.mutable,e)}capacity(){return Sw(this.mutable)}length(){return Sv(this.mutable)}}let C1=e=>new C0(e),C2=C(2,(e,t)=>e.offer(t)),C3=C(2,(e,t)=>e.offerAll(t)),C5=e=>e.take,C4=C(2,(e,t)=>e.takeUpTo(t)),C6=C(3,(e,t,i)=>e.takeBetween(t,i)),C7=C(2,(e,t)=>e.takeBetween(t,t)),C8=()=>new Rt,C9=()=>new Ri,Re=()=>new Rn;class Rt{surplusSize(){return Sv(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!Sy(this.putters)&&!Sy(e);){let t=Sk(e,void 0),i=Sk(this.putters,void 0);i[2]&&Rr(i[1],!0),Rr(t,i[0])}}get shutdown(){return M(l7,l9(e=>M(cS(()=>Rs(this.putters)),l9(t=>vM(t,([t,i,n])=>n?M(pc(i,e),lU):cI,!1,!1)))))}handleSurplus(e,t,i,n){return lL(r=>{let a=pi(r.id());return M(c_(()=>(this.unsafeOffer(e,a),this.unsafeOnQueueEmptySpace(t,i),Rc(this,t,i),aE(n)?cl:pa(a))),cg(()=>cS(()=>this.unsafeRemove(a))))})}unsafeOnQueueEmptySpace(e,t){let i=!0;for(;i&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){let n=M(this.putters,Sk(Sf));if(n===Sf)i=!1;else{let i=e.offer(n[0]);i&&n[2]?Rr(n[1],!0):i||Ra(this.putters,M(Rs(this.putters),nT(n))),Rc(this,e,t)}}}unsafeOffer(e,t){let i=iF(e);for(let e=0;e<i.length;e++){let n=i[e];e===i.length-1?M(this.putters,S_([n,t,!0])):M(this.putters,S_([n,t,!1]))}}unsafeRemove(e){Ra(this.putters,M(Rs(this.putters),nP(([,t])=>t!==e)))}constructor(){this[CJ]=CK,this.putters=Sb()}}class Ri{surplusSize(){return 0}get shutdown(){return cI}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,i,n){return cw(!1)}unsafeOnQueueEmptySpace(e,t){}constructor(){this[CJ]=CK}}class Rn{surplusSize(){return 0}get shutdown(){return cI}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,t,i,n){return cS(()=>(this.unsafeOffer(t,e),Rc(this,t,i),!0))}unsafeOnQueueEmptySpace(e,t){}unsafeOffer(e,t){let i;let n=t[Symbol.iterator](),r=!0;for(;!(i=n.next()).done&&r;){if(0===e.capacity())return;e.poll(Sf),r=e.offer(i.value)}}constructor(){this[CJ]=CK}}let Rr=(e,t)=>pp(e,cw(t)),Ra=(e,t)=>M(e,SS(t)),Rs=e=>M(e,SO(Number.POSITIVE_INFINITY)),Ro=(e,t)=>M(e,SO(t)),Rl=(e,t)=>{Ra(e,M(Rs(e),nP(e=>t!==e)))},Rc=(e,t,i)=>{let n=!0;for(;n&&0!==t.length();){let r=M(i,Sk(Sf));if(r!==Sf){let a=t.poll(Sf);a!==Sf?(Rr(r,a),e.unsafeOnQueueEmptySpace(t,i)):Ra(i,M(Rs(i),nT(r))),n=!0}else n=!1}n&&0===t.length()&&!Sy(i)&&e.onCompleteTakersWithEmptyQueue(i)},Ru=e=>M(cS(()=>Sx(e)),l9(e=>CX(C1(e),C8()))),Rp=e=>M(cS(()=>Sx(e)),l9(e=>CX(C1(e),C9()))),Rh=e=>M(cS(()=>Sx(e)),l9(e=>CX(C1(e),Re()))),Rd=()=>M(cS(()=>Sb()),l9(e=>CX(C1(e),C9()))),Rf=e=>e.capacity(),Rm=e=>e.size,Rg=e=>e.isEmpty,Rx=e=>e.isFull,Rb=e=>e.isShutdown,Rv=e=>e.awaitShutdown,Ry=e=>e.shutdown,Rw=e=>ch(e.takeUpTo(1),nB),R_=e=>e.takeAll,RS=Symbol.for("effect/PubSub/AbsentValue"),Rk=(e,t)=>i=>{i.has(e)||i.set(e,new Set),i.get(e).add(t)},RO=(e,t)=>i=>{if(!i.has(e))return;let n=i.get(e);n.delete(t),0===n.size&&i.delete(e)},RE=e=>{let t="number"==typeof e?{capacity:e}:e;RB(t.capacity);let i=t.replay&&t.replay>0?new R2(Math.ceil(t.replay)):void 0;return 1===t.capacity?new Rz(i):pI(t.capacity)===t.capacity?new RT(t.capacity,i):new RC(t.capacity,i)},RF=e=>new RM(e?.replay?new R2(e.replay):void 0),Rj=(e,t,i)=>ch(pn(),n=>RI(e,t,e.subscribe(),Sb(),n,ak(!1),i)),RI=(e,t,i,n,r,a,s)=>new RP(e,t,i,n,r,a,s,e.replayWindow());class RC{constructor(e,t){this.publisherIndex=0,this.subscriberCount=0,this.subscribersIndex=0,this.capacity=e,this.replayBuffer=t,this.array=Array.from({length:e}),this.subscribers=Array.from({length:e})}replayWindow(){return this.replayBuffer?new R3(this.replayBuffer):R5}isEmpty(){return this.publisherIndex===this.subscribersIndex}isFull(){return this.publisherIndex===this.subscribersIndex+this.capacity}size(){return this.publisherIndex-this.subscribersIndex}publish(e){if(this.isFull())return!1;if(0!==this.subscriberCount){let t=this.publisherIndex%this.capacity;this.array[t]=e,this.subscribers[t]=this.subscriberCount,this.publisherIndex+=1}return this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),ny();let t=nS(e),i=t.length,n=this.publisherIndex-this.subscribersIndex,r=Math.min(i,this.capacity-n);if(0===r)return t;let a=0,s=this.publisherIndex+r;for(;this.publisherIndex!==s;){let e=nC(t,a++),i=this.publisherIndex%this.capacity;this.array[i]=e,this.subscribers[i]=this.subscriberCount,this.publisherIndex+=1,this.replayBuffer&&this.replayBuffer.offer(e)}return nz(t,a)}slide(){if(this.subscribersIndex!==this.publisherIndex){let e=this.subscribersIndex%this.capacity;this.array[e]=RS,this.subscribers[e]=0,this.subscribersIndex+=1}this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new RR(this,this.publisherIndex,!1)}}class RR{constructor(e,t,i){this.self=e,this.subscriberIndex=t,this.unsubscribed=i}isEmpty(){return this.unsubscribed||this.self.publisherIndex===this.subscriberIndex||this.self.publisherIndex===this.self.subscribersIndex}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;if(this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex),this.subscriberIndex!==this.self.publisherIndex){let e=this.subscriberIndex%this.self.capacity,t=this.self.array[e];return this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),this.subscriberIndex+=1,t}return e}pollUpTo(e){if(this.unsubscribed)return ny();this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);let t=Math.min(e,this.self.publisherIndex-this.subscriberIndex);if(t<=0)return ny();let i=[],n=this.subscriberIndex+t;for(;this.subscriberIndex!==n;){let e=this.subscriberIndex%this.self.capacity,t=this.self.array[e];this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),i.push(t),this.subscriberIndex+=1}return nS(i)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);this.subscriberIndex!==this.self.publisherIndex;){let e=this.subscriberIndex%this.self.capacity;this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),this.subscriberIndex+=1}}}class RT{constructor(e,t){this.publisherIndex=0,this.subscriberCount=0,this.subscribersIndex=0,this.capacity=e,this.replayBuffer=t,this.array=Array.from({length:e}),this.mask=e-1,this.subscribers=Array.from({length:e})}replayWindow(){return this.replayBuffer?new R3(this.replayBuffer):R5}isEmpty(){return this.publisherIndex===this.subscribersIndex}isFull(){return this.publisherIndex===this.subscribersIndex+this.capacity}size(){return this.publisherIndex-this.subscribersIndex}publish(e){if(this.isFull())return!1;if(0!==this.subscriberCount){let t=this.publisherIndex&this.mask;this.array[t]=e,this.subscribers[t]=this.subscriberCount,this.publisherIndex+=1}return this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),ny();let t=nS(e),i=t.length,n=this.publisherIndex-this.subscribersIndex,r=Math.min(i,this.capacity-n);if(0===r)return t;let a=0,s=this.publisherIndex+r;for(;this.publisherIndex!==s;){let e=nC(t,a++),i=this.publisherIndex&this.mask;this.array[i]=e,this.subscribers[i]=this.subscriberCount,this.publisherIndex+=1,this.replayBuffer&&this.replayBuffer.offer(e)}return nz(t,a)}slide(){if(this.subscribersIndex!==this.publisherIndex){let e=this.subscribersIndex&this.mask;this.array[e]=RS,this.subscribers[e]=0,this.subscribersIndex+=1}this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new RN(this,this.publisherIndex,!1)}}class RN{constructor(e,t,i){this.self=e,this.subscriberIndex=t,this.unsubscribed=i}isEmpty(){return this.unsubscribed||this.self.publisherIndex===this.subscriberIndex||this.self.publisherIndex===this.self.subscribersIndex}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;if(this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex),this.subscriberIndex!==this.self.publisherIndex){let e=this.subscriberIndex&this.self.mask,t=this.self.array[e];return this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),this.subscriberIndex+=1,t}return e}pollUpTo(e){if(this.unsubscribed)return ny();this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);let t=Math.min(e,this.self.publisherIndex-this.subscriberIndex);if(t<=0)return ny();let i=[],n=this.subscriberIndex+t;for(;this.subscriberIndex!==n;){let e=this.subscriberIndex&this.self.mask,t=this.self.array[e];this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),i.push(t),this.subscriberIndex+=1}return nS(i)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex=Math.max(this.subscriberIndex,this.self.subscribersIndex);this.subscriberIndex!==this.self.publisherIndex;){let e=this.subscriberIndex&this.self.mask;this.self.subscribers[e]-=1,0===this.self.subscribers[e]&&(this.self.array[e]=RS,this.self.subscribersIndex+=1),this.subscriberIndex+=1}}}class Rz{constructor(e){this.publisherIndex=0,this.subscriberCount=0,this.subscribers=0,this.value=RS,this.capacity=1,this.replayBuffer=e}replayWindow(){return this.replayBuffer?new R3(this.replayBuffer):R5}pipe(){return eK(this,arguments)}isEmpty(){return 0===this.subscribers}isFull(){return!this.isEmpty()}size(){return this.isEmpty()?0:1}publish(e){return!this.isFull()&&(0!==this.subscriberCount&&(this.value=e,this.subscribers=this.subscriberCount,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0)}publishAll(e){if(0===this.subscriberCount)return this.replayBuffer&&this.replayBuffer.offerAll(e),ny();let t=nS(e);return nq(t)?t:this.publish(nJ(t))?nz(t,1):t}slide(){this.isFull()&&(this.subscribers=0,this.value=RS),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.subscriberCount+=1,new RA(this,this.publisherIndex,!1)}}class RA{constructor(e,t,i){this.self=e,this.subscriberIndex=t,this.unsubscribed=i}isEmpty(){return this.unsubscribed||0===this.self.subscribers||this.subscriberIndex===this.self.publisherIndex}size(){return this.isEmpty()?0:1}poll(e){if(this.isEmpty())return e;let t=this.self.value;return this.self.subscribers-=1,0===this.self.subscribers&&(this.self.value=RS),this.subscriberIndex+=1,t}pollUpTo(e){if(this.isEmpty()||e<1)return ny();let t=this.self.value;return this.self.subscribers-=1,0===this.self.subscribers&&(this.self.value=RS),this.subscriberIndex+=1,n_(t)}unsubscribe(){this.unsubscribed||(this.unsubscribed=!0,this.self.subscriberCount-=1,this.subscriberIndex===this.self.publisherIndex||(this.self.subscribers-=1,0!==this.self.subscribers||(this.self.value=RS)))}}class RM{constructor(e){this.publisherHead={value:RS,subscribers:0,next:null},this.publisherTail=this.publisherHead,this.publisherIndex=0,this.subscribersIndex=0,this.capacity=Number.MAX_SAFE_INTEGER,this.replayBuffer=e}replayWindow(){return this.replayBuffer?new R3(this.replayBuffer):R5}isEmpty(){return this.publisherHead===this.publisherTail}isFull(){return!1}size(){return this.publisherIndex-this.subscribersIndex}publish(e){let t=this.publisherTail.subscribers;return 0!==t&&(this.publisherTail.next={value:e,subscribers:t,next:null},this.publisherTail=this.publisherTail.next,this.publisherIndex+=1),this.replayBuffer&&this.replayBuffer.offer(e),!0}publishAll(e){if(0!==this.publisherTail.subscribers)for(let t of e)this.publish(t);else this.replayBuffer&&this.replayBuffer.offerAll(e);return ny()}slide(){this.publisherHead!==this.publisherTail&&(this.publisherHead=this.publisherHead.next,this.publisherHead.value=RS,this.subscribersIndex+=1),this.replayBuffer&&this.replayBuffer.slide()}subscribe(){return this.publisherTail.subscribers+=1,new RD(this,this.publisherTail,this.publisherIndex,!1)}}class RD{constructor(e,t,i,n){this.self=e,this.subscriberHead=t,this.subscriberIndex=i,this.unsubscribed=n}isEmpty(){if(this.unsubscribed)return!0;let e=!0,t=!0;for(;t;)this.subscriberHead===this.self.publisherTail?t=!1:this.subscriberHead.next.value!==RS?(e=!1,t=!1):(this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1);return e}size(){return this.unsubscribed?0:this.self.publisherIndex-Math.max(this.subscriberIndex,this.self.subscribersIndex)}poll(e){if(this.unsubscribed)return e;let t=!0,i=e;for(;t;)if(this.subscriberHead===this.self.publisherTail)t=!1;else{let e=this.subscriberHead.next.value;e!==RS&&(i=e,this.subscriberHead.subscribers-=1,0===this.subscriberHead.subscribers&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=RS,this.self.subscribersIndex+=1),t=!1),this.subscriberHead=this.subscriberHead.next,this.subscriberIndex+=1}return i}pollUpTo(e){let t=[],i=0;for(;i!==e;){let n=this.poll(RS);n===RS?i=e:(t.push(n),i+=1)}return nS(t)}unsubscribe(){if(!this.unsubscribed)for(this.unsubscribed=!0,this.self.publisherTail.subscribers-=1;this.subscriberHead!==this.self.publisherTail;)this.subscriberHead.next.value!==RS&&(this.subscriberHead.subscribers-=1,0===this.subscriberHead.subscribers&&(this.self.publisherHead=this.self.publisherHead.next,this.self.publisherHead.value=RS,this.self.subscribersIndex+=1)),this.subscriberHead=this.subscriberHead.next}}class RP extends h7{static{l=CB}constructor(e,t,i,n,r,a,s,o){super(),this[l]=CG,this.pubsub=e,this.subscribers=t,this.subscription=i,this.pollers=n,this.shutdownHook=r,this.shutdownFlag=a,this.strategy=s,this.replayWindow=o}commit(){return this.take}pipe(){return eK(this,arguments)}capacity(){return this.pubsub.capacity}isActive(){return!aE(this.shutdownFlag)}get size(){return c_(()=>aE(this.shutdownFlag)?cl:cw(this.subscription.size()+this.replayWindow.remaining))}unsafeSize(){return aE(this.shutdownFlag)?t7():tg(this.subscription.size()+this.replayWindow.remaining)}get isFull(){return c_(()=>aE(this.shutdownFlag)?cl:cw(this.subscription.size()===this.capacity()))}get isEmpty(){return ch(this.size,e=>0===e)}get shutdown(){return cF(lL(e=>(aF(this.shutdownFlag,!0),M(vA(RK(this.pollers),t=>pc(t,e.id()),!1),cP(cS(()=>{this.subscribers.delete(this.subscription),this.subscription.unsubscribe(),this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers)})),cR(pu(this.shutdownHook,void 0)),lU))))}get isShutdown(){return cS(()=>aE(this.shutdownFlag))}get awaitShutdown(){return pa(this.shutdownHook)}get take(){return lL(e=>{if(aE(this.shutdownFlag))return cl;if(this.replayWindow.remaining>0)return cw(this.replayWindow.take());let t=Sy(this.pollers)?this.subscription.poll(Sf):Sf;if(t!==Sf)return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),cw(t);{let t=pi(e.id());return M(c_(()=>(M(this.pollers,S_(t)),M(this.subscribers,Rk(this.subscription,this.pollers)),this.strategy.unsafeCompletePollers(this.pubsub,this.subscribers,this.subscription,this.pollers),aE(this.shutdownFlag)?cl:pa(t))),cg(()=>cS(()=>RQ(this.pollers,t))))}})}get takeAll(){return c_(()=>{if(aE(this.shutdownFlag))return cl;let e=Sy(this.pollers)?RW(this.subscription):ny();return(this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),this.replayWindow.remaining>0)?cw(nM(this.replayWindow.takeAll(),e)):cw(e)})}takeUpTo(e){return c_(()=>{let t;if(aE(this.shutdownFlag))return cl;if(this.replayWindow.remaining>=e)return cw(this.replayWindow.takeN(e));this.replayWindow.remaining>0&&(t=this.replayWindow.takeAll(),e-=t.length);let i=Sy(this.pollers)?RV(this.subscription,e):ny();return this.strategy.unsafeOnPubSubEmptySpace(this.pubsub,this.subscribers),t?cw(nM(t,i)):cw(i)})}takeBetween(e,t){return c_(()=>RL(this,e,t,ny()))}}let RL=(e,t,i,n)=>i<t?cw(n):M(e.takeUpTo(i),l9(r=>{let a=t-r.length;return 1===a?M(e.take,ch(e=>M(n,nM(r),nR(e)))):a>1?M(e.take,l9(t=>RL(e,a-1,i-r.length-1,M(n,nM(r),nR(t))))):cw(M(n,nM(r)))}));class R${static{c=CU,u=CB}constructor(e,t,i,n,r,a){this[c]=CV,this[u]=CG,this.pubsub=e,this.subscribers=t,this.scope=i,this.shutdownHook=n,this.shutdownFlag=r,this.strategy=a}capacity(){return this.pubsub.capacity}get size(){return c_(()=>aE(this.shutdownFlag)?cl:cS(()=>this.pubsub.size()))}unsafeSize(){return aE(this.shutdownFlag)?t7():tg(this.pubsub.size())}get isFull(){return ch(this.size,e=>e===this.capacity())}get isEmpty(){return ch(this.size,e=>0===e)}get awaitShutdown(){return pa(this.shutdownHook)}get isShutdown(){return cS(()=>aE(this.shutdownFlag))}get shutdown(){return cF(lL(e=>(M(this.shutdownFlag,aF(!0)),M(this.scope.close(u2(e.id())),cP(this.strategy.shutdown),cR(pu(this.shutdownHook,void 0)),lU))))}publish(e){return c_(()=>aE(this.shutdownFlag)?cl:this.pubsub.publish(e)?(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),cw(!0)):this.strategy.handleSurplus(this.pubsub,this.subscribers,n_(e),this.shutdownFlag))}isActive(){return!aE(this.shutdownFlag)}unsafeOffer(e){return!aE(this.shutdownFlag)&&!!this.pubsub.publish(e)&&(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),!0)}publishAll(e){return c_(()=>{if(aE(this.shutdownFlag))return cl;let t=RG(this.pubsub,e);return(this.strategy.unsafeCompleteSubscribers(this.pubsub,this.subscribers),nq(t))?cw(!0):this.strategy.handleSurplus(this.pubsub,this.subscribers,t,this.shutdownFlag)})}get subscribe(){return ch(vj(ck(vN([this.scope.fork(de),Rj(this.pubsub,this.subscribers,this.strategy)]),e=>e[0].addFinalizer(()=>e[1].shutdown)),(e,t)=>e[0].close(t)),e=>e[1])}offer(e){return this.publish(e)}offerAll(e){return this.publishAll(e)}pipe(){return eK(this,arguments)}}let Rq=(e,t)=>l9(v4(),i=>ch(pn(),n=>RU(e,new Map,i,n,ak(!1),t))),RU=(e,t,i,n,r,a)=>new R$(e,t,i,n,r,a),RB=e=>{if(e<=0)throw new uq(`Cannot construct PubSub with capacity of ${e}`)},RJ=(e,t)=>{pp(e,cw(t))},RH=(e,t)=>M(e,SS(t)),RK=e=>M(e,SO(Number.POSITIVE_INFINITY)),RW=e=>e.pollUpTo(Number.POSITIVE_INFINITY),RV=(e,t)=>e.pollUpTo(t),RG=(e,t)=>e.publishAll(t),RQ=(e,t)=>{RH(e,M(RK(e),nP(e=>e!==t)))};class RY{get shutdown(){return l9(l7,e=>l9(cS(()=>RK(this.publishers)),t=>vM(t,([t,i,n])=>n?M(pc(i,e),lU):cI,!1,!1)))}handleSurplus(e,t,i,n){return lL(r=>{let a=pi(r.id());return M(c_(()=>(this.unsafeOffer(i,a),this.unsafeOnPubSubEmptySpace(e,t),this.unsafeCompleteSubscribers(e,t),aE(n)?cl:pa(a))),cg(()=>cS(()=>this.unsafeRemove(a))))})}unsafeOnPubSubEmptySpace(e,t){let i=!0;for(;i&&!e.isFull();){let n=M(this.publishers,Sk(Sf));if(n===Sf)i=!1;else{let i=e.publish(n[0]);i&&n[2]?RJ(n[1],!0):i||RH(this.publishers,M(RK(this.publishers),nT(n))),this.unsafeCompleteSubscribers(e,t)}}}unsafeCompletePollers(e,t,i,n){return R0(this,e,t,i,n)}unsafeCompleteSubscribers(e,t){return R1(this,e,t)}unsafeOffer(e,t){let i=e[Symbol.iterator](),n=i.next();if(!n.done)for(;;){let e=n.value;if((n=i.next()).done){M(this.publishers,S_([e,t,!0]));break}M(this.publishers,S_([e,t,!1]))}}unsafeRemove(e){RH(this.publishers,M(RK(this.publishers),nP(([t,i])=>i!==e)))}constructor(){this.publishers=Sb()}}class RZ{get shutdown(){return cI}handleSurplus(e,t,i,n){return cw(!1)}unsafeOnPubSubEmptySpace(e,t){}unsafeCompletePollers(e,t,i,n){return R0(this,e,t,i,n)}unsafeCompleteSubscribers(e,t){return R1(this,e,t)}}class RX{get shutdown(){return cI}handleSurplus(e,t,i,n){return cS(()=>(this.unsafeSlidingPublish(e,i),this.unsafeCompleteSubscribers(e,t),!0))}unsafeOnPubSubEmptySpace(e,t){}unsafeCompletePollers(e,t,i,n){return R0(this,e,t,i,n)}unsafeCompleteSubscribers(e,t){return R1(this,e,t)}unsafeSlidingPublish(e,t){let i=t[Symbol.iterator](),n=i.next();if(!n.done&&e.capacity>0){let t=n.value,r=!0;for(;r;){e.slide();let a=e.publish(t);a&&(n=i.next())&&!n.done?t=n.value:a&&(r=!1)}}}}let R0=(e,t,i,n,r)=>{let a=!0;for(;a&&!n.isEmpty();){let s=M(r,Sk(Sf));if(s===Sf)M(i,RO(n,r)),Sy(r)?a=!1:M(i,Rk(n,r));else{let a=n.poll(Sf);a===Sf?RH(r,M(RK(r),nT(s))):(RJ(s,a),e.unsafeOnPubSubEmptySpace(t,i))}}},R1=(e,t,i)=>{for(let[n,r]of i)for(let a of r)e.unsafeCompletePollers(t,i,n,a)};class R2{constructor(e){this.head={value:RS,next:null},this.tail=this.head,this.size=0,this.index=0,this.capacity=e}slide(){this.index++}offer(e){this.tail.value=e,this.tail.next={value:RS,next:null},this.tail=this.tail.next,this.size===this.capacity?this.head=this.head.next:this.size+=1}offerAll(e){for(let t of e)this.offer(t)}}class R3{constructor(e){this.buffer=e,this.index=e.index,this.remaining=e.size,this.head=e.head}fastForward(){for(;this.index<this.buffer.index;)this.head=this.head.next,this.index++}take(){if(0===this.remaining)return;this.index<this.buffer.index&&this.fastForward(),this.remaining--;let e=this.head.value;return this.head=this.head.next,e}takeN(e){if(0===this.remaining)return ny();this.index<this.buffer.index&&this.fastForward();let t=Math.min(e,this.remaining),i=Array(t);for(let e=0;e<t;e++){let t=this.head.value;this.head=this.head.next,i[e]=t}return this.remaining-=t,nj(i)}takeAll(){return this.takeN(this.remaining)}}let R5={remaining:0,take:()=>void 0,takeN:()=>ny(),takeAll:()=>ny()},R4=e=>c_(()=>Rq(RE(e),new RY)),R6=e=>c_(()=>Rq(RE(e),new RZ)),R7=e=>c_(()=>Rq(RE(e),new RX)),R8=e=>c_(()=>Rq(RF(e),new RZ)),R9=e=>e.shutdown,Te=e=>e.subscribe,Tt="Continue",Ti=Symbol.for("effect/ChannelChildExecutorDecision"),Tn={[Ti]:Ti},Tr=e=>{let t=Object.create(Tn);return t._tag=Tt,t},Ta="ContinuationK",Ts=Symbol.for("effect/ChannelContinuation"),To={_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutDone:e=>e,_OutErr2:e=>e,_OutElem:e=>e,_OutDone2:e=>e};class Tl{constructor(e,t){this._tag=Ta,this[Ts]=To,this.onSuccess=e,this.onHalt=t}onExit(e){return uK(e)?this.onHalt(e.cause):this.onSuccess(e.value)}}class Tc{constructor(e){this._tag="ContinuationFinalizer",this[Ts]=To,this.finalizer=e}}let Tu="PullAfterNext",Tp={[Symbol.for("effect/ChannelUpstreamPullStrategy")]:{_A:e=>e}},Th=e=>{let t=Object.create(Tp);return t._tag=Tu,t.emitSeparator=e,t},Td="BracketOut",Tf="Bridge",Tm="ConcatAll",Tg="Emit",Tx="Ensuring",Tb="Fail",Tv="Fold",Ty="FromEffect",Tw="PipeTo",T_="Provide",TS="Read",Tk="Succeed",TO="SucceedNow",TE="Suspend",TF=Symbol.for("effect/Channel"),Tj={[TF]:{_Env:e=>e,_InErr:e=>e,_InElem:e=>e,_InDone:e=>e,_OutErr:e=>e,_OutElem:e=>e,_OutDone:e=>e},pipe(){return eK(this,arguments)}},TI=e=>X(e,TF)||lP(e),TC=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Td,i.acquire=()=>e,i.finalizer=t,i}),TR=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tv,i.channel=e,i.k=new Tl(TV,t),i}),TT=e=>TQ(()=>{let t=[];return Tq(TJ(e,TN(t)),e=>TY(()=>[nS(t),e]))}),TN=e=>TK({onInput:t=>Tq(TY(()=>{e.push(t)}),()=>TN(e)),onFailure:TP,onDone:TG}),Tz=(e,t,i)=>{let n=Object.create(Tj);return n._tag=Tm,n.combineInners=t,n.combineAll=i,n.onPull=()=>Th(t7()),n.onEmit=()=>Tr,n.value=()=>e,n.k=R,n},TA=C(4,(e,t,i,n)=>{let r=Object.create(Tj);return r._tag=Tm,r.combineInners=i,r.combineAll=n,r.onPull=()=>Th(t7()),r.onEmit=()=>Tr,r.value=()=>e,r.k=t,r}),TM=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tf,i.input=t,i.channel=e,i}),TD=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tx,i.channel=e,i.finalizer=t,i}),TP=e=>TL(oJ(e)),TL=e=>T$(()=>e),T$=e=>{let t=Object.create(Tj);return t._tag=Tb,t.error=e,t},Tq=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tv,i.channel=e,i.k=new Tl(t,TL),i}),TU=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tv,i.channel=e,i.k=new Tl(t.onSuccess,t.onFailure),i}),TB=e=>{let t=Object.create(Tj);return t._tag=Ty,t.effect=()=>e,t},TJ=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=Tw,i.left=()=>e,i.right=()=>t,i}),TH=C(2,(e,t)=>{let i=Object.create(Tj);return i._tag=T_,i.context=()=>t,i.inner=e,i}),TK=e=>TW({onInput:e.onInput,onFailure:t=>t0(o5(t),{onLeft:e.onFailure,onRight:TL}),onDone:e.onDone}),TW=e=>{let t=Object.create(Tj);return t._tag=TS,t.more=e.onInput,t.done=new Tl(e.onDone,e.onFailure),t},TV=e=>TY(()=>e),TG=e=>{let t=Object.create(Tj);return t._tag=TO,t.terminal=e,t},TQ=e=>{let t=Object.create(Tj);return t._tag=TE,t.channel=e,t},TY=e=>{let t=Object.create(Tj);return t._tag=Tk,t.evaluate=e,t},TZ=TG(void 0),TX=e=>{let t=Object.create(Tj);return t._tag=Tg,t.out=e,t},T0="Done",T1="Emit",T2="FromEffect",T3="Read",T5={[Symbol.for("effect/ChannelState")]:{_E:e=>e,_R:e=>e}},T4=()=>{let e=Object.create(T5);return e._tag=T0,e},T6=()=>{let e=Object.create(T5);return e._tag=T1,e},T7=e=>{let t=Object.create(T5);return t._tag=T2,t.effect=e,t},T8=(e,t,i,n)=>{let r=Object.create(T5);return r._tag=T3,r.upstream=e,r.onEffect=t,r.onEmit=i,r.onDone=n,r},T9=e=>e._tag===T2,Ne=e=>T9(e)?e.effect:cI,Nt=e=>T9(e)?SV(e.effect):void 0,Ni="PullFromChild",Nn="PullFromUpstream",Nr="DrainChildExecutors",Na="Emit";class Ns{constructor(e,t,i){this._tag=Ni,this.childExecutor=e,this.parentSubexecutor=t,this.onEmit=i}close(e){let t=this.childExecutor.close(e),i=this.parentSubexecutor.close(e);return void 0!==t&&void 0!==i?vX(l2(t),l2(i),(e,t)=>M(e,u9(t))):void 0!==t?t:void 0!==i?i:void 0}enqueuePullFromChild(e){return this}}class No{constructor(e,t,i,n,r,a,s,o){this._tag=Nn,this.upstreamExecutor=e,this.createChild=t,this.lastDone=i,this.activeChildExecutors=n,this.combineChildResults=r,this.combineWithChildResult=a,this.onPull=s,this.onEmit=o}close(e){let t=this.upstreamExecutor.close(e);return[...this.activeChildExecutors.map(t=>void 0!==t?t.childExecutor.close(e):void 0),t].reduce((e,t)=>void 0!==e&&void 0!==t?vX(e,l2(t),(e,t)=>u9(e,t)):void 0!==e?e:void 0!==t?l2(t):void 0,void 0)}enqueuePullFromChild(e){return new No(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}}class Nl{constructor(e,t,i,n,r,a,s){this._tag=Nr,this.upstreamExecutor=e,this.lastDone=t,this.activeChildExecutors=i,this.upstreamDone=n,this.combineChildResults=r,this.combineWithChildResult=a,this.onPull=s}close(e){let t=this.upstreamExecutor.close(e);return[...this.activeChildExecutors.map(t=>void 0!==t?t.childExecutor.close(e):void 0),t].reduce((e,t)=>void 0!==e&&void 0!==t?vX(e,l2(t),(e,t)=>u9(e,t)):void 0!==e?e:void 0!==t?l2(t):void 0,void 0)}enqueuePullFromChild(e){return new Nl(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}}class Nc{constructor(e,t){this._tag=Na,this.value=e,this.next=t}close(e){return this.next.close(e)}enqueuePullFromChild(e){return this}}let Nu={[Symbol.for("effect/ChannelUpstreamPullRequest")]:{_A:e=>e}},Np=e=>{let t=Object.create(Nu);return t._tag="Pulled",t.value=e,t},Nh=e=>{let t=Object.create(Nu);return t._tag="NoUpstream",t.activeDownstreamCount=e,t};class Nd{constructor(e,t,i){this._activeSubexecutor=void 0,this._cancelled=void 0,this._closeLastSubstream=void 0,this._done=void 0,this._doneStack=[],this._emitted=void 0,this._input=void 0,this._inProgressFinalizer=void 0,this._currentChannel=e,this._executeCloseLastSubstream=i,this._providedEnv=t}run(){let e;for(;void 0===e;)if(void 0!==this._cancelled)e=this.processCancellation();else if(void 0!==this._activeSubexecutor)e=this.runSubexecutor();else try{if(void 0===this._currentChannel)e=T4();else switch(lP(this._currentChannel)&&(this._currentChannel=TB(this._currentChannel)),this._currentChannel._tag){case Td:e=this.runBracketOut(this._currentChannel);break;case Tf:{let t=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,void 0!==this._input){let i=this._input;this._input=void 0;let n=()=>l9(t.awaitRead(),()=>c_(()=>{let e=i.run();switch(e._tag){case T0:return u5(i.getDone(),{onFailure:e=>t.error(e),onSuccess:e=>t.done(e)});case T1:return l9(t.emit(i.getEmit()),()=>n());case T2:return cr(e.effect,{onFailure:e=>t.error(e),onSuccess:()=>n()});case T3:return Ng(e,()=>n(),e=>t.error(e))}}));e=T7(l9(vP(cu(n())),e=>cS(()=>this.addFinalizer(t=>l9(c$(e),()=>c_(()=>{let e=this.restorePipe(t,i);return void 0!==e?e:cI}))))))}break}case Tm:{let e=new Nd(this._currentChannel.value(),this._providedEnv,e=>cS(()=>{let t=void 0===this._closeLastSubstream?cI:this._closeLastSubstream;this._closeLastSubstream=M(t,vZ(e))}));e._input=this._input;let t=this._currentChannel;this._activeSubexecutor=new No(e,e=>t.k(e),void 0,[],(e,i)=>t.combineInners(e,i),(e,i)=>t.combineAll(e,i),e=>t.onPull(e),e=>t.onEmit(e)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case Tg:this._emitted=this._currentChannel.out,this._currentChannel=void 0!==this._activeSubexecutor?void 0:TZ,e=T6();break;case Tx:this.runEnsuring(this._currentChannel);break;case Tb:e=this.doneHalt(this._currentChannel.error());break;case Tv:this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break;case Ty:{let t=void 0===this._providedEnv?this._currentChannel.effect():M(this._currentChannel.effect(),Sn(this._providedEnv));e=T7(cr(t,{onFailure:e=>{let t=this.doneHalt(e);return void 0!==t&&T9(t)?t.effect:cI},onSuccess:e=>{let t=this.doneSucceed(e);return void 0!==t&&T9(t)?t.effect:cI}}));break}case Tw:{let e=this._input,t=new Nd(this._currentChannel.left(),this._providedEnv,e=>this._executeCloseLastSubstream(e));t._input=e,this._input=t,this.addFinalizer(t=>{let i=this.restorePipe(t,e);return void 0!==i?i:cI}),this._currentChannel=this._currentChannel.right();break}case T_:{let e=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>cS(()=>{this._providedEnv=e}));break}case TS:{let t=this._currentChannel;e=T8(this._input,R,e=>{try{this._currentChannel=t.more(e)}catch(e){this._currentChannel=t.done.onExit(uY(e))}},e=>{let i=e=>t.done.onExit(e);this._currentChannel=i(e)});break}case Tk:e=this.doneSucceed(this._currentChannel.evaluate());break;case TO:e=this.doneSucceed(this._currentChannel.terminal);break;case TE:this._currentChannel=this._currentChannel.channel();break;default:this._currentChannel._tag}}catch(e){this._currentChannel=TL(oH(e))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){let t=[],i=this._doneStack.pop();for(;i;)"ContinuationFinalizer"===i._tag&&t.push(i.finalizer),i=this._doneStack.pop();let n=0===t.length?cI:Nm(t,e);return this.storeInProgressFinalizer(n),n}popNextFinalizers(){let e=[];for(;0!==this._doneStack.length;){let t=this._doneStack[this._doneStack.length-1];if(t._tag===Ta)break;e.push(t),this._doneStack.pop()}return e}restorePipe(e,t){let i=this._input;return(this._input=t,void 0!==i)?i.close(e):cI}close(e){let t,i;let n=this._inProgressFinalizer;void 0!==n&&(t=M(n,ys(cS(()=>this.clearInProgressFinalizer()))));let r=this.popAllFinalizers(e);void 0!==r&&(i=M(r,ys(cS(()=>this.clearInProgressFinalizer()))));let a=void 0===this._activeSubexecutor?void 0:this._activeSubexecutor.close(e);if(void 0!==a||void 0!==t||void 0!==i)return M(l2(Nf(a)),vQ(l2(Nf(t))),vQ(l2(Nf(i))),ch(([[e,t],i])=>M(e,u9(t),u9(i))),cF,l9(e=>c_(()=>e)))}doneSucceed(e){if(0===this._doneStack.length)return this._done=u6(e),this._currentChannel=void 0,T4();let t=this._doneStack[this._doneStack.length-1];if(t._tag===Ta){this._doneStack.pop(),this._currentChannel=t.onSuccess(e);return}let i=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=i.reverse(),this._done=u6(e),this._currentChannel=void 0,T4();let n=Nm(i.map(e=>e.finalizer),u6(e));return this.storeInProgressFinalizer(n),T7(M(n,ys(cS(()=>this.clearInProgressFinalizer())),cF,l9(()=>cS(()=>this.doneSucceed(e)))))}doneHalt(e){if(0===this._doneStack.length)return this._done=uX(e),this._currentChannel=void 0,T4();let t=this._doneStack[this._doneStack.length-1];if(t._tag===Ta){this._doneStack.pop(),this._currentChannel=t.onHalt(e);return}let i=this.popNextFinalizers();if(0===this._doneStack.length)return this._doneStack=i.reverse(),this._done=uX(e),this._currentChannel=void 0,T4();let n=Nm(i.map(e=>e.finalizer),uX(e));return this.storeInProgressFinalizer(n),T7(M(n,ys(cS(()=>this.clearInProgressFinalizer())),cF,l9(()=>cS(()=>this.doneHalt(e)))))}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,T4()}runBracketOut(e){return T7(cF(cr(this.provide(e.acquire()),{onFailure:e=>cS(()=>{this._currentChannel=TL(e)}),onSuccess:t=>cS(()=>{this.addFinalizer(i=>this.provide(e.finalizer(t,i))),this._currentChannel=TX(t)})})))}provide(e){return void 0===this._providedEnv?e:M(e,Sn(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new Tc(e))}runSubexecutor(){let e=this._activeSubexecutor;switch(e._tag){case Ni:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case Nn:return this.pullFromUpstream(e);case Nr:return this.drainChildExecutors(e);case Na:return this._emitted=e.value,this._activeSubexecutor=e.next,T6()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){let t=u5(e,{onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)});return this._activeSubexecutor=void 0,void 0===t?cI:Ne(t)}finishSubexecutorWithCloseEffect(e,...t){this.addFinalizer(()=>M(t,vz(t=>M(cS(()=>t(e)),l9(e=>void 0!==e?e:cI)),{discard:!0})));let i=M(e,u5({onFailure:e=>this.doneHalt(e),onSuccess:e=>this.doneSucceed(e)}));return this._activeSubexecutor=void 0,i}applyUpstreamPullStrategy(e,t,i){switch(i._tag){case Tu:{let n=!e||t.some(e=>void 0!==e);return[i.emitSeparator,n?[void 0,...t]:t]}case"PullAfterAllEnqueued":{let n=!e||t.some(e=>void 0!==e);return[i.emitSeparator,n?[...t,void 0]:t]}}}pullFromChild(e,t,i,n){return T8(e,R,r=>{let a=i(r);switch(a._tag){case Tt:break;case"Close":this.finishWithDoneValue(e,t,a.value);break;case"Yield":{let e=t.enqueuePullFromChild(n);this.replaceSubexecutor(e)}}this._activeSubexecutor=new Nc(r,this._activeSubexecutor)},u5({onFailure:i=>{let n=this.handleSubexecutorFailure(e,t,i);return void 0===n?void 0:Nt(n)},onSuccess:i=>{this.finishWithDoneValue(e,t,i)}}))}finishWithDoneValue(e,t,i){switch(t._tag){case Nn:{let n=new No(t.upstreamExecutor,t.createChild,void 0!==t.lastDone?t.combineChildResults(t.lastDone,i):i,t.activeChildExecutors,t.combineChildResults,t.combineWithChildResult,t.onPull,t.onEmit);this._closeLastSubstream=e.close(u6(i)),this.replaceSubexecutor(n);break}case Nr:{let n=new Nl(t.upstreamExecutor,void 0!==t.lastDone?t.combineChildResults(t.lastDone,i):i,t.activeChildExecutors,t.upstreamDone,t.combineChildResults,t.combineWithChildResult,t.onPull);this._closeLastSubstream=e.close(u6(i)),this.replaceSubexecutor(n)}}}handleSubexecutorFailure(e,t,i){return this.finishSubexecutorWithCloseEffect(uX(i),e=>t.close(e),t=>e.close(t))}pullFromUpstream(e){if(0===e.activeChildExecutors.length)return this.performPullFromUpstream(e);let t=e.activeChildExecutors[0],i=new No(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(void 0===t)return this.performPullFromUpstream(i);this.replaceSubexecutor(new Ns(t.childExecutor,i,t.onEmit))}performPullFromUpstream(e){return T8(e.upstreamExecutor,e=>{let t=void 0===this._closeLastSubstream?cI:this._closeLastSubstream;return this._closeLastSubstream=void 0,M(this._executeCloseLastSubstream(t),vZ(e))},t=>{if(void 0!==this._closeLastSubstream){let i=this._closeLastSubstream;return this._closeLastSubstream=void 0,M(this._executeCloseLastSubstream(i),ch(()=>{let i=new Nd(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);i._input=this._input;let[n,r]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Np(t)));this._activeSubexecutor=new Ns(i,new No(e.upstreamExecutor,e.createChild,e.lastDone,r,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),tf(n)&&(this._activeSubexecutor=new Nc(n.value,this._activeSubexecutor))}))}let i=new Nd(e.createChild(t),this._providedEnv,this._executeCloseLastSubstream);i._input=this._input;let[n,r]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Np(t)));this._activeSubexecutor=new Ns(i,new No(e.upstreamExecutor,e.createChild,e.lastDone,r,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),tf(n)&&(this._activeSubexecutor=new Nc(n.value,this._activeSubexecutor))},t=>{if(e.activeChildExecutors.some(e=>void 0!==e)){let t=new Nl(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(void 0!==this._closeLastSubstream){let e=this._closeLastSubstream;return this._closeLastSubstream=void 0,M(this._executeCloseLastSubstream(e),ch(()=>this.replaceSubexecutor(t)))}return void this.replaceSubexecutor(t)}let i=this._closeLastSubstream,n=this.finishSubexecutorWithCloseEffect(M(t,u3(t=>e.combineWithChildResult(e.lastDone,t))),()=>i,t=>e.upstreamExecutor.close(t));return void 0===n?void 0:Nt(n)})}drainChildExecutors(e){if(0===e.activeChildExecutors.length){let t=this._closeLastSubstream;return void 0!==t&&this.addFinalizer(()=>cw(t)),this.finishSubexecutorWithCloseEffect(e.upstreamDone,()=>t,t=>e.upstreamExecutor.close(t))}let t=e.activeChildExecutors[0],i=e.activeChildExecutors.slice(1);if(void 0===t){let[t,n]=this.applyUpstreamPullStrategy(!0,i,e.onPull(Nh(i.reduce((e,t)=>void 0!==t?e+1:e,0))));return(this.replaceSubexecutor(new Nl(e.upstreamExecutor,e.lastDone,n,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),tf(t))?(this._emitted=t.value,T6()):void 0}let n=new Nl(e.upstreamExecutor,e.lastDone,i,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new Ns(t.childExecutor,n,t.onEmit))}}let Nf=e=>void 0!==e?e:cI,Nm=(e,t)=>M(vz(e,e=>l2(e(t))),ch(e=>M(uQ(e),t9(()=>u7))),l9(e=>c_(()=>e))),Ng=(e,t,i)=>{let n=[e],r=()=>{let e=n.pop();if(void 0===e||void 0===e.upstream)return l0("Unexpected end of input for channel execution");let a=e.upstream.run();switch(a._tag){case T1:{let a=e.onEmit(e.upstream.getEmit());if(0===n.length){if(void 0===a)return c_(t);return M(a,cr({onFailure:i,onSuccess:t}))}if(void 0===a)return c_(()=>r());return M(a,cr({onFailure:i,onSuccess:()=>r()}))}case T0:{let a=e.onDone(e.upstream.getDone());if(0===n.length){if(void 0===a)return c_(t);return M(a,cr({onFailure:i,onSuccess:t}))}if(void 0===a)return c_(()=>r());return M(a,cr({onFailure:i,onSuccess:()=>r()}))}case T2:return n.push(e),M(e.onEffect(a.effect),lW(t=>c_(()=>{let i=e.onDone(uX(t));return void 0===i?cI:i})),cr({onFailure:i,onSuccess:()=>r()}));case T3:return n.push(e),n.push(a),c_(()=>r())}};return r()},Nx=C(2,(e,t)=>{let i=(t,i,n)=>l$(cS(()=>new Nd(e,void 0,R)),e=>c_(()=>Nb(e.run(),e).pipe(cp(t),vZ(pa(t)),vY(pa(i)))),(e,t)=>{let i=e.close(t);return void 0===i?cI:gc(i,e=>uk(n,l4(e)))});return cj(e=>vN([uF(t,de),pn(),pn()]).pipe(l9(([n,r,a])=>e(i(r,a,n)).pipe(w1(t),l9(i=>t.addFinalizer(()=>h4(r).pipe(l9(e=>e?pu(a,void 0).pipe(vZ(gP(i)),vZ(_s(i))):pu(a,void 0).pipe(vZ(c$(i)),vZ(_s(i)))))).pipe(vZ(e(pa(r)))))))))}),Nb=(e,t)=>{switch(e._tag){case T2:return M(e.effect,l9(()=>Nb(t.run(),t)));case T1:return Nb(t.run(),t);case T0:return c_(()=>t.getDone());case T3:return Ng(e,()=>Nb(t.run(),t),l4)}},Nv="Done",Ny={[Symbol.for("effect/ChannelMergeDecision")]:{_R:e=>e,_E0:e=>e,_Z0:e=>e,_E:e=>e,_Z:e=>e}},Nw=e=>{let t=Object.create(Ny);return t._tag=Nv,t.effect=e,t},N_=e=>{let t=Object.create(Ny);return t._tag="Await",t.f=e,t},NS="BothRunning",Nk="LeftDone",NO="RightDone",NE=Symbol.for("effect/ChannelMergeState"),NF={[NE]:NE},Nj=(e,t)=>{let i=Object.create(NF);return i._tag=NS,i.left=e,i.right=t,i},NI=e=>{let t=Object.create(NF);return t._tag=Nk,t.f=e,t},NC=e=>{let t=Object.create(NF);return t._tag=NO,t.f=e,t},NR="BackPressure",NT="BufferSliding",NN=Symbol.for("effect/ChannelMergeStrategy"),Nz={[NN]:NN},NA=e=>{let t=Object.create(Nz);return t._tag=NR,t},NM=e=>{let t=Object.create(Nz);return t._tag=NT,t},ND=C(2,(e,{onBackPressure:t,onBufferSliding:i})=>{switch(e._tag){case NR:return t();case NT:return i()}}),NP="Empty",NL="Emit",N$="Error",Nq="Done",NU=e=>({_tag:NP,notifyProducer:e}),NB=e=>({_tag:NL,notifyConsumers:e}),NJ=e=>({_tag:N$,cause:e}),NH=e=>({_tag:Nq,done:e});class NK{constructor(e){this.ref=e}awaitRead(){return ci(mr(this.ref,e=>e._tag===NP?[pa(e.notifyProducer),e]:[cI,e]))}get close(){return l8(e=>this.error(oK(e)))}done(e){return ci(mr(this.ref,t=>{switch(t._tag){case NP:return[pa(t.notifyProducer),t];case NL:return[vz(t.notifyConsumers,t=>pu(t,tG(e)),{discard:!0}),NH(e)];case N$:case Nq:return[cl,t]}}))}emit(e){return l9(pn(),t=>ci(mr(this.ref,i=>{switch(i._tag){case NP:return[pa(i.notifyProducer),i];case NL:{let n=i.notifyConsumers[0],r=i.notifyConsumers.slice(1);if(void 0!==n)return[pu(n,tQ(e)),0===r.length?NU(t):NB(r)];throw Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case N$:case Nq:return[cl,i]}})))}error(e){return ci(mr(this.ref,t=>{switch(t._tag){case NP:return[pa(t.notifyProducer),t];case NL:return[vz(t.notifyConsumers,t=>pl(t,e),{discard:!0}),NJ(e)];case N$:case Nq:return[cl,t]}}))}get take(){return this.takeWith(e=>uX(o9(e,tG)),e=>u6(e),e=>uZ(tQ(e)))}takeWith(e,t,i){return l9(pn(),n=>ci(mr(this.ref,r=>{switch(r._tag){case NP:return[vZ(pu(r.notifyProducer,void 0),cn(pa(n),{onFailure:e,onSuccess:t0({onLeft:i,onRight:t})})),NB([n])];case NL:return[cn(pa(n),{onFailure:e,onSuccess:t0({onLeft:i,onRight:t})}),NB([...r.notifyConsumers,n])];case N$:return[cw(e(r.cause)),r];case Nq:return[cw(i(r.done)),r]}})))}}let NW=()=>M(pn(),l9(e=>me(NU(e))),ch(e=>new NK(e))),NV=C(2,(e,t)=>ze(e,()=>t)),NG=C(2,(e,t)=>TR(e,e=>t0(o5(e),{onLeft:t,onRight:TL}))),NQ=C(2,(e,t)=>TA(e,t,()=>void 0,()=>void 0)),NY=e=>TK({onInput:t=>Tq(TY(()=>{e.push(t)}),()=>NY(e)),onFailure:TP,onDone:TV}),NZ=e=>{let t=TW({onInput:()=>t,onFailure:TL,onDone:TV});return TJ(e,t)},NX=C(2,(e,t)=>TD(e,()=>t)),N0=()=>TB(pf()),N1=e=>Tq(N0(),e),N2=e=>Tq(e,R),N3=C(2,(e,t)=>TU(e,{onFailure:e=>{let i=o5(e);switch(i._tag){case"Left":return t.onFailure(i.left);case"Right":return TL(i.right)}},onSuccess:t.onSuccess})),N5=e=>zk(e.takeWith(TL,t=>Tq(TX(t),()=>N5(e)),TV)),N4=e=>TQ(()=>N6(e)),N6=e=>M(TB(C5(e)),Tq(t0({onLeft:u5({onFailure:TL,onSuccess:TG}),onRight:t=>Tq(TX(t),()=>N6(e))}))),N7=()=>TK({onInput:e=>Tq(TX(e),()=>N7()),onFailure:TP,onDone:TG}),N8=C(2,(e,t)=>zu(e,{other:TB(t),onSelfDone:e=>Nw(c_(()=>e)),onOtherDone:e=>Nw(c_(()=>e))})),N9=C(2,(e,t)=>N8(e,pa(t))),ze=C(2,(e,t)=>Tq(e,e=>TY(()=>t(e)))),zt=C(2,(e,t)=>Tq(e,e=>TB(t(e)))),zi=C(2,(e,t)=>zn(e,o9(t))),zn=C(2,(e,t)=>TR(e,e=>TL(t(e)))),zr=C(2,(e,t)=>{let i=TK({onInput:e=>Tq(TX(t(e)),()=>i),onFailure:TP,onDone:TG});return TJ(e,i)}),za=C(2,(e,t)=>{let i=TW({onInput:e=>M(TB(t(e)),Tq(TX),Tq(()=>i)),onFailure:TL,onDone:TG});return TJ(e,i)}),zs=C(3,(e,t,i)=>zE(n=>SK(function*(){let r=yield*NW(),a=N5(r),s=yield*Ru(i);yield*uk(n,Ry(s));let o=yield*pn(),l=i===Number.POSITIVE_INFINITY?e=>R:(yield*SY(i)).withPermits,c=yield*a.pipe(TJ(e),zy(n));yield*c.pipe(cr({onFailure:e=>C2(s,l4(e)),onSuccess:t0({onLeft:e=>vZ(cu(l(i)(cI)),lU(C2(s,cw(tG(e))))),onRight:e=>SK(function*(){let i=yield*pn(),r=yield*pn();yield*C2(s,ch(pa(i),tQ)),yield*pu(r,void 0).pipe(vZ(cj(i=>l2(i(pa(o))).pipe(w3(l2(i(t(e)))),l9(R))).pipe(gc(e=>pl(o,e)),cp(i))),l(1),w1(n)),yield*pa(r)})})}),m3,cu,w1(n));let u=zk(cn(ci(C5(s)),{onFailure:TL,onSuccess:t0({onLeft:TG,onRight:e=>Tq(TX(e),()=>u)})}));return TM(u,r)}))),zo=e=>t=>zl(e)(t,A),zl=({bufferSize:e=16,concurrency:t,mergeStrategy:i=NA()})=>(n,r)=>zE(a=>SK(function*(){let s="unbounded"===t?Number.MAX_SAFE_INTEGER:t,o=yield*NW(),l=N5(o),c=yield*Ru(e);yield*uk(a,Ry(c));let u=yield*Rd();yield*uk(a,Ry(u));let p=yield*me(t7()),h=yield*pn(),d=(yield*SY(s)).withPermits,f=yield*zy(TJ(l,n),a);function m(e){return e.pipe(l9(t0({onLeft:e=>cw(tg(e)),onRight:e=>lq(C2(c,cw(tQ(e))),t7())})),wq({until:e=>tf(e)}),l9(e=>ma(p,t8({onNone:()=>tg(e.value),onSome:t=>tg(r(t,e.value))}))),lW(e=>oZ(e)?l4(e):C2(c,l4(e)).pipe(vZ(pu(h,void 0)),lU)))}yield*f.pipe(cr({onFailure:e=>C2(c,l4(e)).pipe(vZ(cw(!1))),onSuccess:t0({onLeft:e=>yi(cu(pa(h)),cu(d(s)(cI)),{onSelfDone:(e,t)=>lq(c$(t),!1),onOtherDone:(t,i)=>vZ(c$(i),mt(p).pipe(l9(t8({onNone:()=>C2(c,cw(tG(e))),onSome:t=>C2(c,cw(tG(r(t,e))))})),lq(!1)))}),onRight:e=>ND(i,{onBackPressure:()=>SK(function*(){let t=yield*pn(),i=vW(t=>zy(TJ(l,e),t).pipe(l9(e=>yn(l2(m(e)),l2(cu(pa(h))))),l9(R)));return yield*pu(t,void 0).pipe(vZ(i),d(1),w1(a)),yield*pa(t),!(yield*h4(h))}),onBufferSliding:()=>SK(function*(){let t=yield*pn(),i=yield*pn(),n=yield*Rm(u);yield*C5(u).pipe(l9(e=>pu(e,void 0)),gd(()=>n>=s)),yield*C2(u,t);let r=vW(i=>zy(TJ(l,e),i).pipe(l9(e=>l2(m(e)).pipe(yn(l2(cu(pa(h)))),yn(l2(cu(pa(t)))))),l9(R)));return yield*pu(i,void 0).pipe(vZ(r),d(1),w1(a)),yield*pa(i),!(yield*h4(h))})})})}),wq({while:e=>e}),w1(a));let g=M(C5(c),ci,cn({onFailure:TL,onSuccess:t0({onLeft:TG,onRight:e=>Tq(TX(e),()=>g)})}),zk);return TM(g,o)})),zc=C(3,(e,t,i)=>zo(i)(zr(e,t))),zu=C(2,(e,t)=>zE(function(i){return SK(function*(){let n=yield*NW(),r=N5(n),a=yield*zy(TJ(r,e),i),s=yield*zy(TJ(r,t.other),i);function o(e,t,n){return(r,a,s)=>{function o(e){return e._tag===Nv?cw(TB(vZ(c$(t),e.effect))):ch(gP(t),u5({onFailure:t=>TB(e.f(uX(t))),onSuccess:t0({onLeft:t=>TB(e.f(u6(t))),onRight:t=>zT(TX(t),l(s(e.f)))})}))}return u5(e,{onFailure:e=>o(r(uX(e))),onSuccess:t0({onLeft:e=>o(r(u6(e))),onRight:e=>cw(Tq(TX(e),()=>Tq(TB(w1(cu(n),i)),e=>l(a(e,t)))))})})}}function l(e){switch(e._tag){case NS:return zk(yi(cu(gL(e.left)),cu(gL(e.right)),{onSelfDone:(i,n)=>vZ(c$(n),o(i,e.right,a)(t.onSelfDone,Nj,e=>NI(e))),onOtherDone:(i,n)=>vZ(c$(n),o(i,e.left,s)(t.onOtherDone,(e,t)=>Nj(t,e),e=>NC(e)))}));case Nk:return zk(ch(l2(s),u5({onFailure:t=>TB(e.f(uX(t))),onSuccess:t0({onLeft:t=>TB(e.f(u6(t))),onRight:t=>Tq(TX(t),()=>l(NI(e.f)))})})));case NO:return zk(ch(l2(a),u5({onFailure:t=>TB(e.f(uX(t))),onSuccess:t0({onLeft:t=>TB(e.f(u6(t))),onRight:t=>Tq(TX(t),()=>l(NC(e.f)))})})))}}return TB(lL(e=>{let t=lL(t=>(t.transferChildren(e.scope()),cI));return vX(cu(a).pipe(ys(t),w1(i)),cu(s).pipe(ys(t),w1(i)),(e,t)=>Nj(e,t))})).pipe(Tq(l),TM(n))})})),zp=((e,t)=>NG(e,e=>{throw t(e)}),C(2,(e,t)=>NG(e,t))),zh=C(2,(e,t)=>TQ(()=>{let i;let n=TK({onInput:e=>Tq(TX(e),()=>n),onFailure:e=>TL(oH(i=zz(e))),onDone:TG}),r=TW({onInput:e=>M(TX(e),Tq(()=>r)),onFailure:e=>oQ(e)&&zA(e.defect)&&eC(e.defect,i)?TP(e.defect.error):TL(e),onDone:TG});return TJ(TJ(TJ(e,n),t),r)})),zd=e=>vW(t=>Nx(e,t)),zf=e=>zd(NZ(e)),zm=e=>vK(t=>Nx(e,t)),zg=e=>zk(cj(t=>ch(v4(),i=>TC(gc(t(v6(e,i)),e=>uE(i,uX(e))),(e,t)=>uE(i,t))))),zx=e=>zO(ch(v1,t=>Tq(TB(e(t)),TX))),zb=e=>z_(e),zv=e=>l9(v1,t=>zy(e,t)),zy=C(2,(e,t)=>vQ(cS(()=>new Nd(e,void 0,R)),_S()).pipe(ck(([e,i])=>uO(t,t=>{let n=e.close(t);return void 0!==n?Sn(n,i):cI})),cF,ch(([e])=>c_(()=>zw(e.run(),e))))),zw=(e,t)=>{switch(e._tag){case T0:return u5(t.getDone(),{onFailure:l4,onSuccess:e=>cw(tG(e))});case T1:return cw(tQ(t.getEmit()));case T2:return M(e.effect,l9(()=>zw(t.run(),t)));case T3:return Ng(e,()=>zw(t.run(),t),e=>l4(e))}},z_=e=>TQ(()=>zS(e)),zS=e=>TW({onInput:t=>Tq(TB(C2(e,tQ(t))),()=>zS(e)),onFailure:t=>TB(M(C2(e,tG(uX(t))))),onDone:t=>TB(M(C2(e,tG(u6(t)))))}),zk=e=>N2(TB(e)),zO=e=>Tz(zg(e),(e,t)=>e,(e,t)=>e),zE=e=>Tz(zx(e),(e,t)=>e,(e,t)=>e),zF=(...e)=>zj(nS(e)),zj=e=>zI(0,e.length,e),zI=(e,t,i)=>e===t?TZ:M(TX(M(i,nC(e))),Tq(()=>zI(e+1,t,i))),zC=C(e=>TI(e[1]),(e,t,i)=>i?.concurrent?zu(e,{other:t,onSelfDone:e=>N_(t=>c_(()=>u8(e,t))),onOtherDone:e=>N_(t=>c_(()=>u8(t,e)))}):Tq(e,e=>ze(t,t=>[e,t]))),zR=C(e=>TI(e[1]),(e,t,i)=>i?.concurrent?ze(zC(e,t,{concurrent:!0}),e=>e[0]):Tq(e,e=>NV(t,e))),zT=C(e=>TI(e[1]),(e,t,i)=>i?.concurrent?ze(zC(e,t,{concurrent:!0}),e=>e[1]):Tq(e,()=>t)),zN=Symbol.for("effect/Channel/ChannelException"),zz=e=>({_tag:"ChannelException",[zN]:zN,error:e}),zA=e=>X(e,zN),zM=Symbol.for("effect/RcRef"),zD={_tag:"Empty"},zP={_A:R,_E:R};class zL extends h7{static{p=f4}constructor(e,t,i,n){super(),this[zM]=zP,this[p]=f4,this.state=zD,this.semaphore=wY(1),this.acquire=e,this.context=t,this.scope=i,this.idleTimeToLive=n,this.get=z$(this)}commit(){return this.get}}let z$=e=>cj(t=>c_(()=>{switch(e.state._tag){case"Closed":return cl;case"Acquired":return e.state.refCount++,e.state.fiber?lq(c$(e.state.fiber),e.state):cw(e.state);case"Empty":return v4().pipe(m0("scope"),mX("value",({scope:i})=>t(c8(e.acquire,ua,tC(e.context,v0,i)))),ch(({scope:t,value:i})=>{let n={_tag:"Acquired",value:i,scope:t,fiber:void 0,refCount:1};return e.state=n,n}))}})).pipe(e.semaphore.withPermits(1),m0("state"),mX("scope",()=>v0),ck(({scope:t,state:i})=>t.addFinalizer(()=>c_(()=>(i.refCount--,i.refCount>0)?cI:void 0===e.idleTimeToLive?(e.state=zD,uE(i.scope,u7)):mD(e.idleTimeToLive).pipe(cu,cP(c_(()=>"Acquired"===e.state._tag&&0===e.state.refCount?(e.state=zD,uE(i.scope,u7)):cI)),ys(cS(()=>{i.fiber=void 0})),w1(e.scope),ck(e=>{i.fiber=e}),e.semaphore.withPermits(1))))),ch(({state:e})=>e.value)),zq={_tag:"Left"},zU={_tag:"Right"},zB={_tag:"Both"},zJ={_tag:"Either"},zH=e=>{switch(e){case"left":return zq;case"right":return zU;case"both":return zB;case"either":return zJ;default:return e}},zK=Symbol.for("effect/Sink"),zW={_A:e=>e,_In:e=>e,_L:e=>e,_E:e=>e,_R:e=>e};class zV{constructor(e){this[zK]=zW,this.channel=e}pipe(){return eK(this,arguments)}}let zG=e=>X(e,zK),zQ=e=>new zV(TQ(()=>As(e()))),zY=((e,t)=>M(e,zY(nK(t))),C(2,(e,t)=>{let i=TK({onInput:e=>M(TX(t(e)),Tq(()=>i)),onFailure:TP,onDone:TV});return new zV(M(i,TJ(As(e))))})),zZ=C(2,(e,t)=>{let i=TK({onInput:e=>M(TB(t(e)),Tq(TX),Tq(()=>i)),onFailure:TP,onDone:TV});return new zV(M(i,zh(As(e))))}),zX=e=>new zV(TP(e)),z0=(e,t,i)=>zQ(()=>new zV(z1(e,t,i))),z1=(e,t,i)=>t(e)?TK({onInput:n=>{let[r,a]=z2(e,n,t,i,0,n.length);return nU(a)?M(TX(a),NV(r)):z1(r,t,i)},onFailure:TP,onDone:()=>TG(e)}):TG(e),z2=(e,t,i,n,r,a)=>{if(r===a)return[e,ny()];let s=n(e,M(t,nC(r)));return i(s)?z2(s,t,i,n,r+1,a):[s,M(t,nz(r+1))]},z3=C(2,(e,t)=>new zV(M(As(e),TT,N3({onFailure:e=>As(t.onFailure(e)),onSuccess:([e,i])=>TQ(()=>{let n={ref:M(e,nP(nU))},r=M(TY(()=>{let e=n.ref;return n.ref=ny(),e}),Tq(e=>zj(e)));return Tq(TT(M(r,zT(N7()),TJ(As(t.onSuccess(i))))),([e,t])=>M(TV(n.ref),Tq(zj),zT(zj(e)),NV(t)))})})))),z5=(e,t,i)=>t(e)?TK({onInput:n=>z5(i(e,n),t,i),onFailure:TP,onDone:()=>TG(e)}):TG(e),z4=(e,t,i)=>zQ(()=>new zV(z6(e,t,i))),z6=(e,t,i)=>t(e)?TK({onInput:n=>M(TB(z7(e,n,t,i)),Tq(([e,n])=>M(n,t8({onNone:()=>z6(e,t,i),onSome:t=>M(TX(t),NV(e))})))),onFailure:TP,onDone:()=>TG(e)}):TG(e),z7=(e,t,i,n)=>z8(e,t,0,t.length,i,n),z8=(e,t,i,n,r,a)=>i===n?cw([e,t7()]):M(a(e,M(t,nC(i))),l9(e=>r(e)?z8(e,t,i+1,n,r,a):cw([e,tg(M(t,nz(i+1)))]))),z9=C(2,(e,t)=>z3(e,{onFailure:zX,onSuccess:t})),Ae=e=>{let t=TW({onInput:i=>M(TB(vz(i,t=>e(t),{discard:!0})),Tq(()=>t)),onFailure:TL,onDone:()=>TZ});return new zV(t)},At=e=>{let t=TW({onInput:i=>M(TB(e(i)),Tq(()=>t)),onFailure:TL,onDone:()=>TZ});return new zV(t)},Ai=e=>new zV(TB(e)),An=(e,t)=>t?.shutdown?Ao(ch(vj(cw(e),Ry),An)):At(t=>M(C3(e,t))),Ar=C(2,(e,t)=>new zV(M(As(e),ze(t)))),Aa=((e,t)=>new zV(M(As(e),zt(t))),C(2,(e,t)=>Al(function(i){return SK(function*(){let n=yield*R4(t?.capacity??16),r=yield*v6(Te(n),i),a=yield*v6(Te(n),i),s=zb(n),o=N4(r).pipe(TJ(As(e)),zR(TB(Ry(r))),zu({other:N4(a).pipe(TJ(As(t.other)),zR(TB(Ry(a)))),onSelfDone:t.onSelfDone,onOtherDone:t.onOtherDone}));return new zV(zu(s,{other:o,onSelfDone:()=>N_(R),onOtherDone:e=>Nw(e)}))})}))),As=((e,t,i)=>new zV(M(TB(t),Tq(n=>M(e,As,Tq(e=>M(TB(t),ze(t=>[e,i(n,t)]))))))),e=>lP(e)?As(Ai(e)):e.channel),Ao=e=>new zV(zO(e.pipe(ch(e=>As(e))))),Al=e=>new zV(zE(t=>e(t).pipe(ch(e=>As(e))))),Ac=(e=>zG(e[1]),C(e=>zG(e[1]),(e,t,i,n)=>n?.concurrent?Aa(e,{other:t,onSelfDone:u5({onFailure:e=>Nw(l4(e)),onSuccess:e=>N_(u5({onFailure:l4,onSuccess:t=>cw(i(e,t))}))}),onOtherDone:u5({onFailure:e=>Nw(l4(e)),onSuccess:e=>N_(u5({onFailure:l4,onSuccess:t=>cw(i(t,e))}))})}):z9(e,e=>Ar(t,t=>i(e,t))))),Au="WithSTMRuntime",Ap="OnFailure",Ah="OnRetry",Ad="OnSuccess",Af="Sync",Am="Succeed",Ag="Retry",Ax="Fail",Ab="Interrupt",Av="Fail",Ay="Interrupt",Aw="Succeed",A_="Retry",AS="Done",Ak="Suspend";class AO{constructor(e){this.value=e}}let AE=(e,t)=>({ref:e,isNew:t,isChanged:!1,expected:e.versioned,newValue:e.versioned.value}),AF=e=>e.newValue,Aj=(e,t)=>{e.isChanged=!0,e.newValue=t},AI=e=>{e.ref.versioned=new AO(e.newValue)},AC=e=>e.ref.versioned!==e.expected,AR=e=>e.isChanged,AT="Invalid",AN="ReadWrite",Az=e=>{for(let t of e)AI(t[1])},AA=e=>{let t="ReadOnly";for(let[,i]of e)if((t=AC(i)?AT:AR(i)?AN:t)===AT)break;return t},AM=e=>{let t=new Map;for(let[,i]of e){for(let e of i.ref.todos)t.set(e[0],e[1]);i.ref.todos=new Map}return t},AD=e=>{for(let[t,i]of Array.from(e.entries()).sort((e,t)=>e[0]-t[0]))i()},AP=(e,t,i)=>{let n=!1;for(let[,r]of t)r.ref.todos.has(e)||(r.ref.todos.set(e,i),n=!0);return n},AL="Done",A$="Interrupted",Aq="Running",AU="effect/STM/State",AB=Symbol.for(AU),AJ=e=>X(e,AB),AH=e=>e._tag===Aq,AK=e=>e._tag===AL,AW=e=>({[AB]:AB,_tag:AL,exit:e,[ex](){return M(eb(AU),ey(eb(AL)),ey(eb(e)),ej(this))},[eI]:t=>AJ(t)&&t._tag===AL&&eC(e,t.exit)}),AV=M(eb(AU),ey(eb(A$)),ey(eb("interrupted"))),AG={[AB]:AB,_tag:A$,[ex]:()=>AV,[eI]:e=>AJ(e)&&e._tag===A$},AQ=M(eb(AU),ey(eb(Aq)),ey(eb("running"))),AY={[AB]:AB,_tag:Aq,[ex]:()=>AQ,[eI]:e=>AJ(e)&&e._tag===Aq},AZ=e=>{switch(e._tag){case Av:return AW(uZ(e.error));case"Die":return AW(uY(e.defect));case Ay:return AW(u2(e.fiberId));case Aw:return AW(u6(e.value));case A_:throw Error("BUG: STM.STMState.fromTExit - please report an issue at https://github.com/Effect-TS/effect/issues")}},AX="effect/TExit",A0=Symbol.for(AX),A1={_A:e=>e,_E:e=>e},A2=e=>X(e,A0),A3=e=>e._tag===Aw,A5=e=>e._tag===A_,A4=e=>({[A0]:A1,_tag:Av,error:e,[ex](){return M(eb(AX),ey(eb(Av)),ey(eb(e)),ej(this))},[eI]:t=>A2(t)&&t._tag===Av&&eC(e,t.error)}),A6=e=>({[A0]:A1,_tag:"Die",defect:e,[ex](){return M(eb(AX),ey(eb("Die")),ey(eb(e)),ej(this))},[eI]:t=>A2(t)&&"Die"===t._tag&&eC(e,t.defect)}),A7=e=>({[A0]:A1,_tag:Ay,fiberId:e,[ex](){return M(eb(AX),ey(eb(Ay)),ey(eb(e)),ej(this))},[eI]:t=>A2(t)&&t._tag===Ay&&eC(e,t.fiberId)}),A8=e=>({[A0]:A1,_tag:Aw,value:e,[ex](){return M(eb(AX),ey(eb(Aw)),ey(eb(e)),ej(this))},[eI]:t=>A2(t)&&t._tag===Aw&&eC(e,t.value)}),A9=M(eb(AX),ey(eb(A_)),ey(eb("retry"))),Me={[A0]:A1,_tag:A_,[ex]:()=>A9,[eI]:e=>A2(e)&&A5(e)},Mt=e=>({_tag:AS,exit:e}),Mi=e=>({_tag:Ak,journal:e}),Mn={ref:0},Mr=()=>{let e=Mn.ref+1;return Mn.ref=e,e},Ma=Symbol.for("effect/STM"),Ms={_R:e=>e,_E:e=>e,_A:e=>e};class Mo{get[Ma](){return Ms}constructor(e){this._op=eV,this.effect_instruction_i1=void 0,this.effect_instruction_i2=void 0,this.effect_instruction_i0=e,this[lN]=tt,this[e8]=Ms,this[zK]=Ms,this[TF]=Ms}[eI](e){return this===e}[ex](){return ej(this,ev(this))}[Symbol.iterator](){return new lF(new eh(this))}commit(){return Ml(this,A,A)}pipe(){return eK(this,arguments)}}let Ml=(e,t,i)=>lL(n=>{let r=n.id(),a=n.getFiberRef(ua),s=n.getFiberRef(mu),o=n.getFiberRef(us),l=Mu(r,e,a,s,o);switch(l._tag){case AS:return t(l.exit),l.exit;case Ak:{let n=Mr(),l={value:AY},c=lK(t=>Mp(r,e,n,l,a,s,o,t));return cj(e=>M(e(c),lW(e=>{let n=l.value;return(AH(n)&&(l.value=AG),AK(n=l.value))?(t(n.exit),n.exit):(i(),l4(e))})))}}}),Mc=(e,t,i,n,r,a)=>{let s=new Map,o=new Mf(t,s,e,n).run(),l=AA(s);if(l===AN)Az(s);else if(l===AT)throw Error("BUG: STM.TryCommit.tryCommit - please report an issue at https://github.com/Effect-TS/effect/issues");switch(o._tag){case Aw:return i.value=AZ(o),Mh(u6(o.value),s,r,a);case Av:return i.value=AZ(o),Mh(uX(oJ(o.error)),s,r,a);case"Die":return i.value=AZ(o),Mh(uX(oH(o.defect)),s,r,a);case Ay:return i.value=AZ(o),Mh(uX(oK(e)),s,r,a);case A_:return Mi(s)}},Mu=(e,t,i,n,r)=>{let a=new Map,s=new Mf(t,a,e,i).run(),o=AA(a);if(o===AN&&A3(s))Az(a);else if(o===AT)throw Error("BUG: STM.TryCommit.tryCommitSync - please report an issue at https://github.com/Effect-TS/effect/issues");switch(s._tag){case Aw:return Mh(u6(s.value),a,n,r);case Av:return Mh(uX(oJ(s.error)),a,n,r);case"Die":return Mh(uX(oH(s.defect)),a,n,r);case Ay:return Mh(uX(oK(e)),a,n,r);case A_:return Mi(a)}},Mp=(e,t,i,n,r,a,s,o)=>{if(AH(n.value)){let l=Mc(e,t,n,r,a,s);switch(l._tag){case AS:Md(l.exit,o);break;case Ak:AP(i,l.journal,()=>Mp(e,t,i,n,r,a,s,o))}}},Mh=(e,t,i,n)=>{let r=AM(t);return r.size>0&&i.scheduleTask(()=>AD(r),n),Mt(e)},Md=(e,t)=>{t(e)};class Mf{constructor(e,t,i,n){this.contStack=[],this.self=e,this.journal=t,this.fiberId=i,this.env=n}getEnv(){return this.env}pushStack(e){this.contStack.push(e)}popStack(){return this.contStack.pop()}nextSuccess(){let e=this.popStack();for(;void 0!==e&&e.effect_instruction_i0!==Ad;)e=this.popStack();return e}nextFailure(){let e=this.popStack();for(;void 0!==e&&e.effect_instruction_i0!==Ap;)e=this.popStack();return e}nextRetry(){let e=this.popStack();for(;void 0!==e&&e.effect_instruction_i0!==Ah;)e=this.popStack();return e}run(){let e,t=this.self;for(;void 0===e&&void 0!==t;)try{let i=t;if(i)switch(i._op){case"Tag":t=Mb((e,t,n)=>tz(n,i));break;case"Left":t=My(i.left);break;case"None":t=My(new uL);break;case"Right":t=Mj(i.right);break;case"Some":t=Mj(i.value);break;case"Commit":switch(i.effect_instruction_i0){case"Die":e=A6(em(()=>i.effect_instruction_i1()));break;case Ax:{let n=this.nextFailure();void 0===n?e=A4(em(()=>i.effect_instruction_i1())):t=em(()=>n.effect_instruction_i2(em(()=>i.effect_instruction_i1())));break}case Ag:{let i=this.nextRetry();void 0===i?e=Me:t=em(()=>i.effect_instruction_i2());break}case Ab:e=A7(this.fiberId);break;case Au:t=em(()=>i.effect_instruction_i1(this));break;case Ad:case Ap:case Ah:this.pushStack(i),t=i.effect_instruction_i1;break;case"Provide":{let e=this.env;this.env=em(()=>i.effect_instruction_i2(e)),t=M(i.effect_instruction_i1,Mv(MI(()=>this.env=e)));break}case Am:{let n=i.effect_instruction_i1,r=this.nextSuccess();void 0===r?e=A8(n):t=em(()=>r.effect_instruction_i2(n));break}case Af:{let n=em(()=>i.effect_instruction_i1()),r=this.nextSuccess();void 0===r?e=A8(n):t=em(()=>r.effect_instruction_i2(n))}}}}catch(e){t=Mg(e)}return e}}let Mm=C(2,(e,t)=>{let i=new Mo(Ap);return i.effect_instruction_i1=e,i.effect_instruction_i2=t,i}),Mg=e=>Mx(()=>e),Mx=e=>{let t=new Mo("Die");return t.effect_instruction_i1=e,t},Mb=e=>Mk(t=>Mj(e(t.journal,t.fiberId,t.getEnv()))),Mv=C(2,(e,t)=>MS(e,{onFailure:e=>MC(t,My(e)),onSuccess:e=>MC(t,Mj(e))})),My=e=>Mw(()=>e),Mw=e=>{let t=new Mo(Ax);return t.effect_instruction_i1=e,t},M_=C(2,(e,t)=>{let i=new Mo(Ad);return i.effect_instruction_i1=e,i.effect_instruction_i2=t,i}),MS=C(2,(e,{onFailure:t,onSuccess:i})=>M(e,ME(tQ),Mm(e=>M(t(e),ME(tG))),M_(e=>{switch(e._tag){case"Left":return Mj(e.left);case"Right":return i(e.right)}}))),Mk=e=>{let t=new Mo(Au);return t.effect_instruction_i1=e,t},MO=e=>{let t=new Mo(Ab);return t.effect_instruction_i1=e,t},ME=C(2,(e,t)=>M(e,M_(e=>MI(()=>t(e))))),MF=new Mo(Ag),Mj=e=>{let t=new Mo(Am);return t.effect_instruction_i1=e,t},MI=e=>{let t=new Mo(Af);return t.effect_instruction_i1=e,t},MC=C(2,(e,t)=>M(e,M_(()=>t))),MR=C(3,(e,t,i)=>M(e,M_(e=>M(t,ME(t=>i(e,t)))))),MT=((e,t)=>M(e,ME(()=>t)),e=>M_(e,R)),MN=C(e=>er(e[0]),(e,t,i)=>i?.discard?M(MI(()=>e[Symbol.iterator]()),M_(e=>{let i=Mz(()=>{let n=e.next();return n.done?MA:M(t(n.value),M_(()=>i))});return i})):Mz(()=>iF(e).reduce((e,i)=>MR(e,t(i),(e,t)=>(e.push(t),e)),Mj([])))),Mz=e=>MT(MI(e)),MA=Mj(void 0),MM=Symbol.for("effect/TRef"),MD={_A:e=>e};class MP{constructor(e){this[MM]=MD,this.versioned=new AO(e),this.todos=new Map}modify(e){return Mb(t=>{let i=ML(this,t),[n,r]=e(AF(i));return Aj(i,r),n})}pipe(){return eK(this,arguments)}}let ML=(e,t)=>{if(t.has(e))return t.get(e);let i=AE(e,!1);return t.set(e,i),i},M$=C(2,(e,t)=>AF(ML(e,t))),Mq=C(3,(e,t,i)=>{Aj(ML(e,i),t)}),MU=Symbol.for("effect/TQueue/TEnqueue"),MB=Symbol.for("effect/TQueue/TDequeue"),MJ={_Out:e=>e},MH={_In:e=>e},MK=((e,t,i)=>Mz(()=>{let n=(t,i,r)=>i<t?Mj(r):M(e.takeUpTo(i),M_(a=>{let s=t-a.length;return 1===s?M(e.take,ME(e=>M(r,nM(nj(a)),nR(e)))):s>1?M(e.take,M_(e=>n(s-1,i-a.length-1,M(r,nM(nj(a)),nR(e))))):Mj(M(r,nM(nj(a))))}));return ME(n(t,i,ny()),e=>Array.from(e))}),Symbol.for("effect/TPubSub")),MW=Symbol.for("effect/TPubSub/AbsentValue"),MV=(e,t,i)=>({head:e,subscribers:t,tail:i});class MG{static{h=MU}constructor(e,t,i,n,r,a,s){this[MK]={_A:e=>e},this[h]=MH,this.isShutdown=Mb(e=>void 0===M$(this.publisherTail,e)),this.awaitShutdown=M_(this.isShutdown,e=>e?MA:MF),this.size=Mk(e=>void 0===M$(this.publisherTail,e.journal)?MO(e.fiberId):Mj(M$(this.pubsubSize,e.journal))),this.isEmpty=ME(this.size,e=>0===e),this.isFull=ME(this.size,e=>e===this.capacity()),this.shutdown=Mb(e=>{void 0!==M$(this.publisherTail,e)&&(Mq(this.publisherTail,void 0,e),ax(M$(this.subscribers,e),t=>{Mq(t,void 0,e)}),Mq(this.subscribers,as(),e))}),this.pubsubSize=e,this.publisherHead=t,this.publisherTail=i,this.requestedCapacity=n,this.strategy=r,this.subscriberCount=a,this.subscribers=s}capacity(){return this.requestedCapacity}offer(e){return Mk(t=>{let i=M$(this.publisherTail,t.journal);if(void 0===i)return MO(t.fiberId);let n=M$(this.subscriberCount,t.journal);if(0===n)return Mj(!0);let r=M$(this.pubsubSize,t.journal);if(r<this.requestedCapacity){let a=new MP(void 0);return Mq(i,MV(e,n,a),t.journal),Mq(this.publisherTail,a,t.journal),Mq(this.pubsubSize,r+1,t.journal),Mj(!0)}switch(this.strategy._tag){case"BackPressure":return MF;case"Dropping":return Mj(!1);case"Sliding":{if(this.requestedCapacity>0){let e=M$(this.publisherHead,t.journal),i=!0;for(;i;){let n=M$(e,t.journal);if(void 0===n)return MF;let r=n.head,a=n.tail;r!==MW?(Mq(e,MV(MW,n.subscribers,n.tail),t.journal),Mq(this.publisherHead,a,t.journal),i=!1):e=a}}let r=new MP(void 0);return Mq(i,MV(e,n,r),t.journal),Mq(this.publisherTail,r,t.journal),Mj(!0)}}})}offerAll(e){return ME(MN(e,e=>this.offer(e)),no(R))}}class MQ{static{d=MB}constructor(e,t,i,n,r,a){this[MK]=MK,this[d]=MJ,this.isShutdown=Mb(e=>void 0===M$(this.subscriberHead,e)),this.awaitShutdown=M_(this.isShutdown,e=>e?MA:MF),this.size=Mk(e=>{let t=M$(this.subscriberHead,e.journal);if(void 0===t)return MO(e.fiberId);let i=!0,n=0;for(;i;){let r=M$(t,e.journal);void 0===r?i=!1:(r.head!==MW&&(n+=1)>=Number.MAX_SAFE_INTEGER&&(i=!1),t=r.tail)}return Mj(n)}),this.isEmpty=ME(this.size,e=>0===e),this.isFull=ME(this.size,e=>e===this.capacity()),this.peek=Mk(e=>{let t=M$(this.subscriberHead,e.journal);if(void 0===t)return MO(e.fiberId);let i=MW,n=!0;for(;n;){let r=M$(t,e.journal);if(void 0===r)return MF;let a=r.head,s=r.tail;a!==MW?(i=a,n=!1):t=s}return Mj(i)}),this.peekOption=Mk(e=>{let t=M$(this.subscriberHead,e.journal);if(void 0===t)return MO(e.fiberId);let i=t7(),n=!0;for(;n;){let r=M$(t,e.journal);if(void 0===r)i=t7(),n=!1;else{let e=r.head,a=r.tail;e!==MW?(i=tg(e),n=!1):t=a}}return Mj(i)}),this.shutdown=Mb(e=>{let t=M$(this.subscriberHead,e);if(void 0!==t){Mq(this.subscriberHead,void 0,e);let i=!0;for(;i;){let n=M$(t,e);if(void 0===n)i=!1;else{let i=n.head,r=n.tail;if(i!==MW){let a=n.subscribers;if(1===a){let i=M$(this.pubsubSize,e);Mq(t,MV(MW,0,r),e),Mq(this.publisherHead,r,e),Mq(this.pubsubSize,i-1,e)}else Mq(t,MV(i,a-1,r),e)}t=r}}let n=M$(this.subscriberCount,e);Mq(this.subscriberCount,n-1,e),Mq(this.subscribers,af(M$(this.subscribers,e),this.subscriberHead),e)}}),this.take=Mk(e=>{let t=M$(this.subscriberHead,e.journal);if(void 0===t)return MO(e.fiberId);let i=MW,n=!0;for(;n;){let r=M$(t,e.journal);if(void 0===r)return MF;let a=r.head,s=r.tail;if(a!==MW){let o=r.subscribers;if(1===o){let i=M$(this.pubsubSize,e.journal);Mq(t,MV(MW,0,s),e.journal),Mq(this.publisherHead,s,e.journal),Mq(this.pubsubSize,i-1,e.journal)}else Mq(t,MV(a,o-1,s),e.journal);Mq(this.subscriberHead,s,e.journal),i=a,n=!1}else t=s}return Mj(i)}),this.takeAll=this.takeUpTo(Number.POSITIVE_INFINITY),this.pubsubSize=e,this.publisherHead=t,this.requestedCapacity=i,this.subscriberHead=n,this.subscriberCount=r,this.subscribers=a}capacity(){return this.requestedCapacity}takeUpTo(e){return Mk(t=>{let i=M$(this.subscriberHead,t.journal);if(void 0===i)return MO(t.fiberId);let n=[],r=0;for(;r!==e;){let a=M$(i,t.journal);if(void 0===a)r=e;else{let e=a.head,s=a.tail;if(e!==MW){let o=a.subscribers;if(1===o){let e=M$(this.pubsubSize,t.journal);Mq(i,MV(MW,0,s),t.journal),Mq(this.publisherHead,s,t.journal),Mq(this.pubsubSize,e-1,t.journal)}else Mq(i,MV(e,o-1,s),t.journal);n.push(e),r+=1}i=s}}return Mq(this.subscriberHead,i,t.journal),Mj(n)})}}class MY{constructor(e){this.size=0,this.current=0,this.capacity=e,this.array=Array.from({length:e},A)}head(){return ii(this.array[this.current])}lastOrNull(){if(0===this.size)return;let e=0===this.current?this.array.length-1:this.current-1;return this.array[e]??void 0}put(e){this.array[this.current]=e,this.increment()}dropLast(){this.size>0&&(this.decrement(),this.array[this.current]=void 0)}toChunk(){let e=this.current-this.size;return nS(e<0?[...this.array.slice(this.capacity+e,this.capacity),...this.array.slice(0,this.current)]:this.array.slice(e,this.current))}increment(){this.size<this.capacity&&(this.size+=1),this.current=(this.current+1)%this.capacity}decrement(){this.size-=1,this.current>0?this.current-=1:this.current=this.capacity-1}}let MZ=Symbol.for("effect/Stream/Handoff"),MX="Empty",M0="Full",M1=e=>({_tag:MX,notifyConsumer:e}),M2=(e,t)=>({_tag:M0,value:e,notifyProducer:t}),M3=(e,t)=>i=>{switch(i._tag){case MX:return e(i.notifyConsumer);case M0:return t(i.value,i.notifyProducer)}},M5={_A:e=>e},M4=()=>M(pn(),l9(e=>me(M1(e))),ch(e=>({[MZ]:M5,ref:e}))),M6=C(2,(e,t)=>l9(pn(),i=>ci(mr(e.ref,n=>M(n,M3(e=>[vZ(pu(e,void 0),pa(i)),M2(t,i)],(i,r)=>[l9(pa(r),()=>M(e,M6(t))),n])))))),M7=e=>l9(pn(),t=>ci(mr(e.ref,i=>M(i,M3(t=>[l9(pa(t),()=>M7(e)),i],(e,i)=>[lq(pu(i,void 0),e),M1(t)]))))),M8="Emit",M9="Halt",De=e=>({_tag:M8,elements:e}),Dt=e=>({_tag:M9,cause:e}),Di=e=>({_tag:"End",reason:e}),Dn=()=>l3(t7()),Dr=e=>cf(l4(e),tg),Da="ScheduleEnd",Ds="UpstreamEnd",Do={_tag:Da},Dl={_tag:Ds},Dc="DrainLeft",Du="DrainRight",Dp="PullBoth",Dh="PullLeft",Dd="PullRight",Df={_tag:Dc},Dm={_tag:Du},Dg={_tag:Dp},Dx=e=>({_tag:Dh,rightChunk:e}),Db=e=>({_tag:Dd,leftChunk:e}),Dv="PullBoth",Dy="PullLet",Dw="PullRight",D_={_tag:Dv},DS=e=>({_tag:Dy,rightChunk:e}),Dk=e=>({_tag:Dw,leftChunk:e}),DO=Symbol.for("effect/Take"),DE={_A:e=>e,_E:e=>e};class DF{constructor(e){this[DO]=DE,this.exit=e}pipe(){return eK(this,arguments)}}let Dj=e=>new DF(u6(e)),DI=e=>c_(()=>e.exit),DC=new DF(uZ(t7())),DR=e=>new DF(uX(M(e,o9(tg)))),DT=C(2,(e,{onEnd:t,onFailure:i,onSuccess:n})=>u5(e.exit,{onFailure:e=>t8(yl(e),{onNone:t,onSome:i}),onSuccess:n})),DN=e=>new DF(u6(n_(e))),Dz=Symbol.for("effect/Stream"),DA={_R:e=>e,_E:e=>e,_A:e=>e};class DM{constructor(e){this[Dz]=DA,this.channel=e}pipe(){return eK(this,arguments)}}let DD=e=>X(e,Dz)||lP(e),DP=4096,DL=((e,t,i)=>D5(DL(e,t,i),e=>t0(e,{onLeft:t7,onRight:tg})),C(3,(e,t,i)=>Pr(vN([M4(),me(Do),me(ny()),w_(i),me(!1),me(!1)])).pipe(D4(([i,n,r,a,s,o])=>{let l=TW({onInput:e=>Tq(TB(M(i,M6(De(e)),gd(()=>nU(e)))),()=>l),onFailure:e=>TB(M6(i,Dt(e))),onDone:()=>TB(M6(i,Di(Dl)))}),c=M(mn(r,ny()),l9(e=>nU(e)?M(mi(s,!0),vZ(cw(M(TX(e),Tq(()=>c))))):M(M7(i),ch(e=>{switch(e._tag){case M8:return M(TB(mi(s,!0)),zT(TX(e.elements)),zT(TB(mt(o))),Tq(e=>e?TZ:c));case M9:return TL(e.cause);case"End":if(e.reason._tag===Da)return M(mt(s),ch(e=>e?TB(M(mi(n,Do),vZ(mi(o,!0)))):M(TB(M(mi(n,Do),vZ(mi(o,!0)))),Tq(()=>c))),zk);return M(mi(n,e.reason),vZ(mi(o,!0)),TB)}}))),zk),u=e=>a.next(e),p=(e,a,l)=>{let h=M(mi(s,!1),vZ(mi(o,!1)),vZ(M(c,zh(As(t)),TT,zd,w1(l)))),d=(e,t,i)=>M(mi(r,n$(e)),vZ(ch(mt(n),e=>{switch(e._tag){case Da:return M(vN([mt(s),h,M(u(tg(t)),w1(l))]),ch(([e,n,r])=>{let a=M(i,t8({onNone:()=>n_(tQ(t)),onSome:e=>nw(tQ(t),tG(e))}));return e?M(TX(a),Tq(()=>p(n,r,l))):p(n,r,l)}),zk);case Ds:return M(mt(s),ch(e=>e?TX(n_(tQ(t))):TZ),zk)}})),zk);return zk(yi(gL(e),gL(a),{onSelfDone:(e,t)=>M(c$(a),vZ(M(c_(()=>e),ch(([e,t])=>d(e,t,t7()))))),onOtherDone:(t,n)=>cr(c_(()=>t),{onFailure:t=>t0(o5(t),{onLeft:()=>M(i,M6(Di(Do)),vP,vZ(M(gL(e),ch(([e,t])=>d(e,t,t7()))))),onRight:t=>M(i,M6(Dt(t)),vP,vZ(M(gL(e),ch(([e,t])=>d(e,t,t7())))))}),onSuccess:t=>M(i,M6(Di(Do)),vP,vZ(M(gL(e),ch(([e,i])=>d(e,i,tg(t))))))})}))};return PK(i=>TJ(Pi(e),l).pipe(zd,w1(i),vZ(zh(c,As(t)).pipe(TT,zd,w1(i),l9(e=>u(t7()).pipe(w1(i),ch(t=>new DM(p(e,t,i)))))))))})))),D$=C(2,(e,t)=>Dq(e,e=>t0(o5(e),{onLeft:t,onRight:D3}))),Dq=C(2,(e,t)=>new DM(M(Pi(e),TR(e=>Pi(t(e)))))),DU=C(2,(e,t)=>M(e,Dq(e=>M(t(e),t9(()=>D3(e)))))),DB=e=>lV(mK(e),e=>"None"===e._tag?ga:l3(e.value)),DJ=C(4,(e,t,i,n)=>{let r=(e,t)=>zT(TB(M7(t)),TW({onInput:i=>Tq(TB(M(e,M6(Dj(i)))),()=>r(e,t)),onFailure:t=>TB(M6(e,DR(t))),onDone:()=>TB(M6(e,DC))}));return new DM(zE(a=>vN([M4(),M4(),M4(),M4()]).pipe(ck(([t,i,n])=>TJ(Pi(e),r(t,n)).pipe(Nx(a),w1(a))),ck(([e,i,n,s])=>TJ(Pi(t),r(i,s)).pipe(Nx(a),w1(a))),ch(([e,t,r,a])=>{let s=M6(r,void 0).pipe(vZ(M7(e).pipe(l9(DI)))),o=M6(a,void 0).pipe(vZ(M7(t).pipe(l9(DI))));return Pi(PB(i,e=>l9(n(e,s,o),DB)))}))))}),DH=C(2,(e,t)=>new DM(M(Pi(e),zT(Pi(t))))),DK=((e,t)=>D4(e,()=>t),e=>Pr(lX(e))),DW=C(2,(e,t)=>M(pn(),l9(i=>M(e,DQ({maximumLag:t.maximumLag,decide:e=>l9(pa(i),t=>t(e))}),l9(e=>M(vN(nK(n0(0,t.size-1),t=>ch(e,([e,i])=>[[e,t],i]))),ch(nj),l9(e=>{let[n,r]=ns(e,[new Map,ny()],([e,t],[i,n])=>[e.set(i[0],i[1]),M(t,nT(n))]);return M(pu(i,e=>ch(t.decide(e),e=>t=>M(e(n.get(t))))),lq(Array.from(r)))}))))))),DV={ref:0},DG=()=>{let e=DV.ref;return DV.ref=e+1,e},DQ=C(2,(e,t)=>DY(e,t.maximumLag,t.decide,()=>cI)),DY=C(4,(e,t,i,n)=>M(vj(me(new Map),(e,t)=>M(mt(e),l9(e=>M(e.values(),vz(Ry))))),l9(r=>SK(function*(a){let s=yield*a(SY(1)),o=yield*a(me(M(Ru(t),l9(e=>{let t=DG();return M(ma(r,i=>i.set(t,e)),lq([t,e]))})))),l=e=>s.withPermits(1)(M(mi(o,M(Ru(1),ck(t=>C2(t,e)),l9(e=>{let t=DG();return M(ma(r,i=>i.set(t,e)),lq(iS(t,e)))}))),vZ(M(mt(r),l9(t=>M(nS(t.values()),vz(t=>M(C2(t,e),mV(e=>oZ(e)?tg(cI):t7()))))))),vZ(n(e)),lU));return yield*a(e,Pj(e=>M(i(e),l9(t=>M(mt(r),l9(i=>M(i.entries(),gr(ny(),(i,[n,r])=>t(n)?M(C2(r,u6(e)),cr({onFailure:e=>oZ(e)?cw(M(i,nT(n))):l4(e),onSuccess:()=>cw(i)})):cw(i)),l9(e=>nU(e)?M(ma(r,t=>{for(let i of e)t.delete(i);return t})):cI))))),lU)),cr({onFailure:e=>l(uX(M(e,o9(tg)))),onSuccess:()=>l(uZ(t7()))}),w2),s.withPermits(1)(ci(mt(o)))})))),DZ=((e,t)=>{let i=e=>TK({onInput:t=>{let n=M(t,nz(e)),r=Math.max(0,e-t.length);return nq(t)||r>0?i(r):M(TX(n),zT(N7()))},onFailure:TP,onDone:()=>TZ});return new DM(M(Pi(e),zh(i(t))))},new DM(TZ)),DX=C(2,(e,t)=>new DM(M(Pi(e),NX(t)))),D0=()=>Pr(pf()),D1=e=>M(D0(),D4(e)),D2=e=>Pa(l3(tg(e))),D3=e=>Pr(l4(e)),D5=C(2,(e,t)=>Pd(e,nD(t))),D4=C(e=>DD(e[0]),(e,t,i)=>{let n=i?.bufferSize??16;return i?.switch?D6(i?.concurrency,()=>D7(e,1,n,t),i=>D7(e,i,n,t)):D6(i?.concurrency,()=>new DM(NQ(Pi(e),e=>M(e,nK(e=>Pi(t(e))),na(TZ,(e,t)=>M(e,zT(t)))))),n=>new DM(M(Pi(e),NQ(zj),zc(e=>Pi(t(e)),i))))}),D6=(e,t,i)=>{switch(e){case void 0:return t();case"unbounded":return i(Number.MAX_SAFE_INTEGER);default:return e>1?i(e):t()}},D7=C(4,(e,t,i,n)=>new DM(M(Pi(e),NQ(zj),zc(e=>Pi(n(e)),{concurrency:t,mergeStrategy:NM(),bufferSize:i})))),D8=C(e=>DD(e[0]),(e,t)=>D4(e,R,t)),D9=e=>{let t=TW({onInput:e=>Tq(zj(e),()=>t),onFailure:TL,onDone:()=>TZ});return new DM(M(Pi(e),TJ(t)))},Pe=e=>{let t=(e,t)=>{let[i,n]=M(e,nV(e=>!uW(e))),r=M(nB(n),t8({onNone:()=>t,onSome:u5({onFailure:e=>t8(yl(e),{onNone:()=>TZ,onSome:TL}),onSuccess:()=>TZ})}));return M(TX(M(i,nD(e=>uW(e)?tg(e.value):t7()))),Tq(()=>r))},i=TW({onInput:e=>t(e,i),onFailure:e=>TL(e),onDone:()=>TZ});return new DM(M(Pi(e),TJ(i)))},Pt=e=>D9(Pe(M(e,Pp(e=>e.exit)))),Pi=e=>{if("channel"in e)return e.channel;if(lP(e))return Pi(Pr(e));throw TypeError("Expected a Stream.")},Pn=e=>new DM(nq(e)?TZ:TX(e)),Pr=e=>M(e,cf(tg),Pa),Pa=e=>new DM(zk(m2(e,{onFailure:t8({onNone:()=>TZ,onSome:TP}),onSuccess:e=>TX(n_(e))}))),Ps=(e,t)=>{let i=t?.maxChunkSize??DP;if(t?.scoped){let n=ch(Te(e),e=>Pu(e,{maxChunkSize:i,shutdown:!0}));return t.shutdown?ch(n,DX(R9(e))):n}let n=D4(PN(Te(e)),e=>Pu(e,{maxChunkSize:i}));return t?.shutdown?DX(n,R9(e)):n},Po=e=>PA(()=>nb(e)?Pn(e):Pl(e[Symbol.iterator]())),Pl=(e,t=DP)=>M(cS(()=>{let i=[],n=e=>M(cS(()=>{let r=e.next();if(1===t)return r.done?TZ:M(TX(n_(r.value)),Tq(()=>n(e)));i=[];let a=0;for(;!1===r.done&&(i.push(r.value),!((a+=1)>=t));)r=e.next();return a>0?M(TX(nj(i)),Tq(()=>n(e))):TZ}),zk);return new DM(n(e))}),PJ),Pc=e=>M(e,ch(Pk),PH),Pu=(e,t)=>M(C6(e,1,t?.maxChunkSize??DP),lW(t=>M(Rb(e),l9(e=>e&&oZ(t)?Dn():Dr(t)))),Pk,t?.shutdown?DX(Ry(e)):R),Pp=((e,t)=>{let i=e=>M(_o(e),ch(t8({onNone:()=>TK({onInput:t=>Tq(TX(t),()=>i(e)),onFailure:TP,onDone:()=>TZ}),onSome:u5({onFailure:TL,onSuccess:()=>TZ})})),zk);return new DM(zE(n=>t.pipe(w1(n),ch(t=>Pi(e).pipe(TJ(i(t)))))))},C(2,(e,t)=>new DM(M(Pi(e),zr(nK(t)))))),Ph=C(3,(e,t,i)=>PA(()=>{let n=e=>TK({onInput:t=>M(c_(()=>{let r=[],a=e=>cS(()=>{r.push(e)});return M(t,gr(e,(e,t)=>M(i(e,t),l9(([e,t])=>M(a(t),lq(e))))),m2({onFailure:e=>0!==r.length?zT(TX(nj(r)),TP(e)):TP(e),onSuccess:e=>Tq(TX(nj(r)),()=>n(e))}))}),zk),onFailure:TP,onDone:()=>TZ});return new DM(M(Pi(e),zh(n(t))))})),Pd=C(2,(e,t)=>new DM(M(Pi(e),zr(t)))),Pf=((e,t)=>M(e,Pd(nL(t))),C(2,(e,t)=>{let i=e=>{let n=e.next();return n.done?TW({onInput:e=>i(e[Symbol.iterator]()),onFailure:TL,onDone:TV}):zk(ch(t(n.value),t=>Tq(TX(n_(t)),()=>i(e))))};return new DM(M(Pi(e),TJ(TQ(()=>i(ny()[Symbol.iterator]())))))})),Pm=C(3,(e,t,i)=>new DM(M(Pi(e),NQ(zj),zs(i,t),zr(n_)))),Pg=((e,t)=>new DM(M(Pi(e),zi(t))),C(2,(e,t)=>Px(e,t,{onSelf:tG,onOther:tQ}))),Px=C(3,(e,t,i)=>{let n=i.haltStrategy?zH(i.haltStrategy):zB,r=e=>t=>e||!uW(t)?Nw(c_(()=>t)):N_(e=>c_(()=>e));return new DM(zu(Pi(Pp(e,i.onSelf)),{other:Pi(Pp(t,i.onOther)),onSelfDone:r("Either"===n._tag||"Left"===n._tag),onOtherDone:r("Either"===n._tag||"Right"===n._tag)}))}),Pb=((e,t)=>new DM(M(Pi(e),zp(()=>Pi(t())))),C(2,(e,t)=>{let i=TK({onInput:e=>nq(e)?TQ(()=>i):M(TX(e),zT(N7())),onFailure:TP,onDone:()=>TQ(()=>Pi(t()))});return new DM(M(Pi(e),TJ(i)))})),Pv=(e=>"function"==typeof e[1],C(2,(e,t)=>new DM(M(Pi(e),TH(t))))),Py=((e,t)=>new DM(zE(i=>_$(t,i).pipe(ch(t=>M(Pi(e),TH(t)))))),C(3,(e,t,i)=>D1(n=>D4(i,i=>M(e,Pv(tC(n,t,i))))))),Pw=((e,t)=>D1(i=>M(e,Pv(t(i)))),C(2,(e,t)=>PA(()=>{let i=Math.max(t,1),n=P_(new PS(i),i);return new DM(M(Pi(e),TJ(n)))}))),P_=(e,t)=>TW({onInput:i=>{if(i.length===t&&e.isEmpty())return Tq(TX(i),()=>P_(e,t));if(i.length>0){let n;let r=[],a=0;for(;a<i.length;){for(;a<i.length&&void 0===n;)n=e.write(M(i,nC(a))),a+=1;void 0!==n&&(r.push(n),n=void 0)}return Tq(zF(...r),()=>P_(e,t))}return TQ(()=>P_(e,t))},onFailure:t=>zT(e.emitIfNotEmpty(),TL(t)),onDone:()=>e.emitIfNotEmpty()});class PS{constructor(e){this.builder=[],this.pos=0,this.n=e}isEmpty(){return 0===this.pos}write(e){if(this.builder.push(e),this.pos+=1,this.pos===this.n){let e=nj(this.builder);return this.builder=[],this.pos=0,e}}emitIfNotEmpty(){return 0!==this.pos?TX(nj(this.builder)):TZ}}let Pk=e=>PB(e,e=>M(ch(e,t=>tg([t,e])),lV(t8({onNone:()=>cw(t7()),onSome:l3})))),PO=e=>Pk(M(e,ch(n_))),PE=((e,t)=>PE(e,t,{onElement:e=>tQ(e),onSchedule:tG}),C(3,(e,t,i)=>M(w_(t),ch(t=>{let n=M(t.last,cb,ch(i.onSchedule)),r=M(e,Pp(i.onElement),Pi),a=zk(m2(t.next(void 0),{onFailure:()=>TZ,onSuccess:()=>M(r,zT(M(n,ch(e=>M(TX(n_(e)),Tq(()=>a))),zk)))}));return new DM(M(r,zT(a)))}),PJ))),PF=C(2,(e,t)=>Pi(e).pipe(zh(As(t)),zf)),Pj=((e,t,i,n)=>PF(e,z0(t,i,n)),C(2,(e,t)=>M(e,PT(Ae(t))))),PI=C(2,(e,t)=>M(e,PR(t))),PC=((e,t)=>M(e,PR(t),SG),C(2,(e,t)=>{let i=TW({onInput:e=>Tq(TB(C3(t,nK(e,u6))),()=>i),onFailure:e=>TB(C2(t,uX(o9(e,tg)))),onDone:()=>TB(C2(t,uZ(t7())))});return M(TJ(Pi(e),i),NZ,zm,lU)})),PR=C(2,(e,t)=>{let i=TW({onInput:e=>Tq(TX(Dj(e)),()=>i),onFailure:e=>TX(DR(e)),onDone:()=>TX(DC)});return M(TJ(Pi(e),i),za(e=>C2(t,e)),NZ,zm,lU)}),PT=C(2,(e,t)=>M(Pi(e),zh(As(t)),NZ,zm)),PN=((e,t)=>M(e,Ph(t7(),(e,i)=>{switch(e._tag){case"None":return cw([tg(i),i]);case"Some":return M(t(e.value,i),ch(e=>[tg(e),e]))}})),e=>new DM(NX(zg(M(e,ch(n_))),cI))),Pz=e=>new DM(zx(t=>e(t).pipe(ch(n_)))),PA=((e,t,i)=>t<=0||i<=0?DK(new uD("Invalid bounds - `chunkSize` and `stepSize` must be greater than zero")):new DM(TQ(()=>{let n=new MY(t),r=(e,r)=>{if(e<t){let e=n.toChunk();return M(TX(nq(e)?ny():n_(e)),Tq(()=>r))}let a=e-(e-t)%i;if(a===e)return r;let s=M(n.toChunk(),nQ(e-(a-t+i)));return M(TX(nq(s)?ny():n_(s)),Tq(()=>r))},a=e=>TW({onInput:r=>Tq(TX(nD(r,(r,a)=>{n.put(r);let s=e+a+1;return s<t||(s-t)%i>0?t7():tg(n.toChunk())})),()=>a(e+r.length)),onFailure:t=>r(e,TL(t)),onDone:()=>r(e,TZ)});return M(Pi(e),TJ(a(0)))})),e=>new DM(TQ(()=>Pi(e())))),PM=((e,t)=>{let i=TK({onInput:e=>{let n=M(e,nY(t));return n.length===e.length?M(TX(n),Tq(()=>i)):TX(n)},onFailure:TP,onDone:TV});return new DM(M(Pi(e),zh(i)))},(e,t,i,n,r)=>{let a=(e,s)=>TW({onInput:o=>M(t(o),vQ(h0),ch(([t,l])=>{let c=e+(l-s)/rf(n)*i,u=i+r<0?Number.POSITIVE_INFINITY:i+r,p=(c<0?u:Math.min(c,u))-t,h=rl(Math.max(0,(p>=0?0:-p/i)*rf(n)));return rw(h,ra)?M(TB(mD(h)),zT(TX(o)),Tq(()=>a(p,l))):Tq(TX(o),()=>a(p,l))}),zk),onFailure:TL,onDone:()=>TZ}),s=M(h0,ch(e=>a(i,e)),zk);return new DM(M(Pi(e),zh(s)))}),PD=C(3,(e,t,i)=>M(P$(e),ch(w4({onTimeout:()=>o9(t(),tg),duration:i})),Pc)),PP=((e,t,i)=>{let n=new uT("Stream Timeout");return M(e,PD(()=>oH(n),t),DU(e=>oQ(e)&&yu(e.defect)&&void 0!==e.defect.message&&"Stream Timeout"===e.defect.message?tg(i):t7()))},e=>{if("number"==typeof e)return R4(e);if("unbounded"===e.capacity)return R8({replay:e.replay});switch(e.strategy){case"dropping":return R6(e);case"sliding":return R7(e);default:return R4(e)}}),PL=C(2,(e,t)=>M(vj(PP(t),e=>R9(e)),ck(t=>M(e,PI(t),w2)))),P$=e=>ch(zv(Pi(e)),e=>M(e,cf(tg),l9(t0({onLeft:()=>l3(t7()),onRight:cw})))),Pq=(e=>DD(e[0]),C(e=>DD(e[0]),(e,t)=>ch(_S(),i=>PU(e,i,t)))),PU=C(e=>DD(e[0]),(e,t,i)=>{let n,r;let a=_u(t),s=_l(t);return new ReadableStream({start(t){r=a(v4());let i=M(P$(e),v6(r),a,l9(e=>nq(e)?i:cw(e)));n=M(i,ck(e=>cS(()=>{nK(e,e=>{t.enqueue(e)})})),gc(()=>uE(r,u7)),mQ({None:()=>cS(()=>{t.close()}),Some:e=>cS(()=>{t.error(e.value)})}),lU)},pull:()=>new Promise(e=>{s(n,{scope:r}).addObserver(t=>e())}),cancel:()=>new Promise(e=>{s(uE(r,u7)).addObserver(t=>e())})},i?.strategy)}),PB=(e,t)=>PA(()=>{let i=e=>zk(ch(t(e),t8({onNone:()=>TZ,onSome:([e,t])=>Tq(TX(e),()=>i(t))})));return new DM(i(e))}),PJ=e=>D8(Pr(e)),PH=e=>D8(PN(e)),PK=e=>D8(Pz(t=>e(t))),PW=((e,t)=>M(Pr(t),D4(t=>t?e:DZ)),C(3,(e,t,i)=>{let n=(e,t,i)=>{switch(e._tag){case Dv:return M(DB(t),vQ(DB(i),{concurrent:!0}),ca({onFailure:e=>cw(uZ(tg(e))),onSuccess:([e,a])=>tf(e)&&tf(a)?nq(e.value)&&nq(a.value)?n(D_,t,i):nq(e.value)?n(DS(a.value),t,i):nq(a.value)?n(Dk(e.value),t,i):cw(u6(r(e.value,a.value))):cw(uZ(t7()))}));case Dy:return ca(t,{onFailure:e=>cw(uZ(e)),onSuccess:a=>nq(a)?n(DS(e.rightChunk),t,i):nq(e.rightChunk)?n(Dk(a),t,i):cw(u6(r(a,e.rightChunk)))});case Dw:return ca(i,{onFailure:e=>cw(uZ(e)),onSuccess:a=>nq(a)?n(Dk(e.leftChunk),t,i):nq(e.leftChunk)?n(DS(a),t,i):cw(u6(r(e.leftChunk,a)))})}},r=(e,t)=>{let[n,r]=i(e,t);switch(r._tag){case"Left":if(nq(r.left))return[n,D_];return[n,Dk(r.left)];case"Right":if(nq(r.right))return[n,D_];return[n,DS(r.right)]}};return M(e,DJ(t,D_,n))})),PV=(e,t,i)=>e.length>t.length?[M(e,nN(t.length),nZ(t,i)),tG(M(e,nz(t.length)))]:[M(e,nZ(M(t,nN(e.length)),i)),tQ(M(t,nz(e.length)))],PG=Symbol.for("effect/GroupBy"),PQ={_R:e=>e,_E:e=>e,_K:e=>e,_V:e=>e},PY=e=>X(e,PG),PZ=C(e=>PY(e[0]),(e,t,i)=>D4(e.grouped,([e,i])=>t(e,Pt(Pu(i,{shutdown:!0}))),{concurrency:"unbounded",bufferSize:i?.bufferSize??16})),PX=e=>({[PG]:PQ,pipe(){return eK(this,arguments)},grouped:e});class P0 extends h7{static{f=CB}constructor(e,t){super(),this[f]={_Out:e=>e},this.dequeue=e,this.f=t}capacity(){return Rf(this.dequeue)}get size(){return Rm(this.dequeue)}unsafeSize(){return this.dequeue.unsafeSize()}get awaitShutdown(){return Rv(this.dequeue)}isActive(){return this.dequeue.isActive()}get isShutdown(){return Rb(this.dequeue)}get shutdown(){return Ry(this.dequeue)}get isFull(){return Rx(this.dequeue)}get isEmpty(){return Rg(this.dequeue)}get take(){return M(C5(this.dequeue),ch(e=>this.f(e)))}get takeAll(){return M(R_(this.dequeue),ch(nK(e=>this.f(e))))}takeUpTo(e){return M(C4(this.dequeue,e),ch(nK(e=>this.f(e))))}takeBetween(e,t){return M(C6(this.dequeue,e,t),ch(nK(e=>this.f(e))))}takeN(e){return M(C7(this.dequeue,e),ch(nK(e=>this.f(e))))}poll(){return M(Rw(this.dequeue),ch(io(e=>this.f(e))))}pipe(){return eK(this,arguments)}commit(){return this.take}}let P1=C(e=>"function"!=typeof e[0],(e,t,i)=>{let n=(e,r)=>TW({onInput:a=>Tq(TB(vz(P2(a,t),([t,n])=>{let a=e.get(t);return void 0===a?M(Ru(i?.bufferSize??16),l9(i=>M(cS(()=>{e.set(t,i)}),vZ(C2(r,DN([t,i]))),vZ(M(C2(i,Dj(n)),mV(e=>oX(e)?tg(cI):t7())))))):mV(C2(a,Dj(n)),e=>oX(e)?tg(cI):t7())},{discard:!0})),()=>n(e,r)),onFailure:e=>TB(C2(r,DR(e))),onDone:()=>M(TB(M(vz(e.entries(),([e,t])=>M(C2(t,DC),mV(e=>oX(e)?tg(cI):t7())),{discard:!0}),vZ(C2(r,DC)))))});return PX(PK(t=>SK(function*(){let i=new Map,r=yield*Rd();return yield*uk(t,Ry(r)),yield*Pi(e).pipe(TJ(n(i,r)),NZ,Nx(t),w1(t),lq(Pt(Pu(r,{shutdown:!0}))))})))}),P2=C(2,(e,t)=>{let i;let n=[],r=e[Symbol.iterator](),a=new Map;for(;(i=r.next())&&!i.done;){let e=i.value,r=t(e);if(a.has(r))a.get(r).push(e);else{let t=[e];n.push([r,t]),a.set(r,t)}}return nj(n.map(e=>[e[0],nj(e[1])]))}),P3=(...e)=>{let t=1===e.length?e[0].evaluate:e[0],i=1===e.length?e[0].onError:e[1],n=1===e.length&&!0===e[0].releaseLockOnEnd;return PH(ch(vj(cS(()=>t().getReader()),e=>n?cS(()=>e.releaseLock()):SW(()=>e.cancel())),e=>PO(l9(gu({try:()=>e.read(),catch:e=>tg(i(e))}),({done:e,value:t})=>e?l3(t7()):cw(t)))))},P5=Symbol.for("@effect/platform/HttpBody"),P4=Symbol.for("@effect/platform/HttpBody/HttpBodyError"),P6=e=>{let t=void 0===e?Object.create(tn):su(e);return t._tag="HttpBodyError",t};class P7{constructor(){this[P5]=P5}[ez](){return this.toJSON()}toString(){return eM(this)}}class P8 extends P7{toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}constructor(...e){super(...e),this._tag="Empty"}}let P9=new P8;class Le extends P7{constructor(e,t){super(),this._tag="Uint8Array",this.body=e,this.contentType=t}get contentLength(){return this.body.length}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Uint8Array",body:this.contentType.startsWith("text/")||this.contentType.endsWith("json")?new TextDecoder().decode(this.body):`Uint8Array(${this.body.length})`,contentType:this.contentType,contentLength:this.contentLength}}}let Lt=(e,t)=>new Le(e,t??"application/octet-stream"),Li=new TextEncoder,Ln=(e,t)=>Lt(Li.encode(e),t??"text/plain"),Lr=e=>Ln(JSON.stringify(e),"application/json");class La extends P7{constructor(e){super(),this._tag="FormData",this.formData=e}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"FormData",formData:this.formData}}}let Ls=e=>new La(e);class Lo extends P7{constructor(e,t,i){super(),this._tag="Stream",this.stream=e,this.contentType=t,this.contentLength=i}toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Stream",contentType:this.contentType,contentLength:this.contentLength}}}let Ll=Symbol.for("@effect/platform/HttpClientRequest"),Lc={[Ll]:Ll,...eD,toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:eH(this.headers),body:this.body.toJSON()}},pipe(){return eK(this,arguments)}};function Lu(e,t,i,n,r,a){let s=Object.create(Lc);return s.method=e,s.url=t,s.urlParams=i,s.hash=n,s.headers=r,s.body=a,s}let Lp=Lu("GET","",[],t7(),Ck,P9),Lh=e=>(t,i)=>Ly(Lp,{method:e,url:t,...i??void 0}),Ld=Lh("GET"),Lf=Lh("POST"),Lm=Lh("PUT"),Lg=Lh("PATCH"),Lx=Lh("DELETE"),Lb=Lh("HEAD"),Lv=Lh("OPTIONS"),Ly=C(2,(e,t)=>{let i=e;return t.method&&(i=LO(i,t.method)),t.url&&(i=LE(i,t.url)),t.headers&&(i=L_(i,t.headers)),t.urlParams&&(i=Lj(i,t.urlParams)),t.hash&&(i=LI(i,t.hash)),t.body&&(i=LC(i,t.body)),t.accept&&(i=LS(i,t.accept)),t.acceptJson&&(i=Lk(i)),i}),Lw=C(3,(e,t,i)=>Lu(e.method,e.url,e.urlParams,e.hash,CF(e.headers,t,i),e.body)),L_=C(2,(e,t)=>Lu(e.method,e.url,e.urlParams,e.hash,Cj(e.headers,t),e.body)),LS=C(2,(e,t)=>Lw(e,"Accept",t)),Lk=LS("application/json"),LO=C(2,(e,t)=>Lu(t,e.url,e.urlParams,e.hash,e.headers,e.body)),LE=C(2,(e,t)=>{if("string"==typeof t)return Lu(e.method,t,e.urlParams,e.hash,e.headers,e.body);let i=new URL(t.toString()),n=CP(i.searchParams),r=i.hash?tg(i.hash.slice(1)):t7();return i.search="",i.hash="",Lu(e.method,i.toString(),n,r,e.headers,e.body)}),LF=C(2,(e,t)=>Lu(e.method,t.endsWith("/")&&e.url.startsWith("/")?t+e.url.slice(1):t+e.url,e.urlParams,e.hash,e.headers,e.body)),Lj=C(2,(e,t)=>Lu(e.method,e.url,CL(e.urlParams,t),e.hash,e.headers,e.body)),LI=C(2,(e,t)=>Lu(e.method,e.url,e.urlParams,tg(t),e.headers,e.body)),LC=C(2,(e,t)=>{let i=e.headers;if("Empty"===t._tag)i=CI(CI(i,"Content-Type"),"Content-length");else{let e=t.contentType;e&&(i=CF(i,"content-type",e));let n=t.contentLength;n&&(i=CF(i,"content-length",n.toString()))}return Lu(e.method,e.url,e.urlParams,e.hash,i,t)}),LR=C(2,(e,t)=>LC(e,Lr(t))),LT=C(2,(e,t)=>LC(e,Ls(t))),LN=Symbol.for("@effect/platform/HttpIncomingMessage"),Lz=(e,t)=>{let i=jC(e,t);return e=>l9(e.json,i)},LA=(e,t)=>{let i;let n=e.headers["content-type"]??"";if(n.includes("application/json"))try{i=_I(e.json)}catch(e){}else if(n.includes("text/")||n.includes("urlencoded"))try{i=_I(e.text)}catch(e){}let r={...t,headers:eH(e.headers),remoteAddress:e.remoteAddress.toJSON()};return void 0!==i&&(r.body=i),r},LM=Symbol.for("@effect/platform/HttpClientResponse"),LD=(e,t)=>new LP(e,t);class LP extends eP{constructor(e,t){super(),this.request=e,this.source=t,this[LN]=LN,this[LM]=LM}toJSON(){return LA(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return CO(this.source.headers)}get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=kN(this.source.headers.getSetCookie())}get remoteAddress(){return t7()}get stream(){return this.source.body?P3(()=>this.source.body,e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})):D2(new CM({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return gp(this.text,{try:e=>""===e?null:JSON.parse(e),catch:e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})})}get text(){return this.textBody??=gu({try:()=>this.source.text(),catch:e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(SH,_I)}get urlParamsBody(){return l9(this.text,e=>mW({try:()=>CP(new URLSearchParams(e)),catch:e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})}))}get formData(){return this.formDataBody??=gu({try:()=>this.source.formData(),catch:e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(SH,_I)}get arrayBuffer(){return this.arrayBufferBody??=gu({try:()=>this.source.arrayBuffer(),catch:e=>new CM({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(SH,_I)}}let LL=e=>e.status>=200&&e.status<300?cw(e):l3(new CM({response:e,request:e.request,reason:"StatusCode",description:"non 2xx status code"})),L$=Symbol.for("@effect/platform/HttpClient"),Lq=tD("@effect/platform/HttpClient"),LU=$(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),()=>ue(z)),LB=$(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),()=>ue(!0)),LJ={[L$]:L$,pipe(){return eK(this,arguments)},...eD,toJSON:()=>({_id:"@effect/platform/HttpClient"}),get(e,t){return this.execute(Ld(e,t))},head(e,t){return this.execute(Lb(e,t))},post(e,t){return this.execute(Lf(e,t))},put(e,t){return this.execute(Lm(e,t))},patch(e,t){return this.execute(Lg(e,t))},del(e,t){return this.execute(Lx(e,t))},options(e,t){return this.execute(Lv(e,t))}},LH=(e,t)=>{let i=Object.create(LJ);return i.preprocess=t,i.postprocess=e,i.execute=function(i){return e(t(i))},i},{del:LK,execute:LW,get:LV,head:LG,options:LQ,patch:LY,post:LZ,put:LX}=new Proxy({},{get:(e,t,i)=>(...e)=>l9(Lq,i=>i[t](...e))}),L0=C(2,(e,t)=>LH(i=>t(e.postprocess(i)),e.preprocess)),L1=e=>L0(e,l9(LL)),L2=e=>hp(new Map(i7(hz(e),([e,t])=>[hN(e).join("\uFEFF"),t])),{pathDelim:"\uFEFF",seqDelim:"\uFEFF"});jz("inline","attachment"),jz("public-read","private"),jz("upload"),jz("callback","error");let L3=IT(IH,jU,{decode:e=>new TextDecoder().decode(e),encode:e=>new TextEncoder().encode(e)}),L5=Im({apiKey:(e=>IT(e,IJ(jI(e)),{strict:!0,decode:e=>ks(e),encode:e=>ko(e)}))(jU.pipe(((e,t)=>i=>{let n=JSON.stringify(e);return i.pipe(II(t=>t.startsWith(e),{schemaId:Iz,[Iz]:{startsWith:e},title:`startsWith(${n})`,description:`a string starting with ${n}`,jsonSchema:{pattern:`^${e}`},...t}))})("sk_"))),appId:jU,regions:j2(jU),ingestHost:jU.pipe(Iu({default:()=>"ingest.uploadthing.com"}))}),L4=IK.pipe(IS(L3),IS(ID(L5))),L6=hu().pipe(hv(()=>hp(new Map(Object.entries(Object.fromEntries(Object.entries({}).filter(e=>null!=e[1])))),{pathDelim:"_"})),hb("uploadthing"),e=>hg(e,hi)),L7=e=>L2(e??{}).pipe(hv(()=>L6)),L8=(e=>{let t=k9("a boolean property",e=>{switch(e){case"true":case"yes":case"on":case"1":return tQ(!0);case"false":case"no":case"off":case"0":return tQ(!1);default:return tG(p$([],`Expected a boolean value but received ${e}`))}});return void 0===e?t:k6(t,e)})("isDev").pipe(k7(()=>Ot("undefined"!=typeof process?"production":void 0).pipe(k3(e=>"development"===e))),On(!1)),L9=((e,t)=>{let i=FU(t);return Oe(e).pipe(k4(e=>i(e).pipe(tX(e=>p$([],F8.formatIssueSync(e))))))})("token",L4).pipe(mQ({ConfigError:e=>new kh({code:"InvalidData"===e._op?"INVALID_SERVER_CONFIG":"MISSING_ENV",message:"InvalidData"===e._op?"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.":"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.",cause:e})})),$e=Oe("apiUrl").pipe(On("https://api.uploadthing.com"),k5(e=>new URL(e)),k3(e=>e.href.replace(/\/$/,""))),$t=SK(function*(){let{regions:e,ingestHost:t}=yield*L9,i=e[0];return yield*Oe("ingestUrl").pipe(On(`https://${i}.${t}`),k5(e=>new URL(e)),k3(e=>e.href.replace(/\/$/,"")))});Oe("utfsHost").pipe(On("utfs.io"));let $i=Oe("ufsHost").pipe(On("ufs.sh")),$n=C(2,(e,t)=>e.log({fiberId:aD,logLevel:cK,message:t,cause:oB,context:da(),spans:a9(),annotations:rW(),date:new Date})),$r=gU,$a=gJ,$s=kv,$o=ky,$l=kw,$c=gH,$u=gK,$p=gW,$h=gV,$d=vF,$f=vv,$m=e=>gJ(t=>{let i=tz(dm(t.context,hY),hM).unsafe;switch(t.logLevel._tag){case"Debug":return i.debug(e.log(t));case"Info":return i.info(e.log(t));case"Trace":return i.trace(e.log(t));case"Warning":return i.warn(e.log(t));case"Error":case"Fatal":return i.error(e.log(t));default:return i.log(e.log(t))}}),$g=e=>gJ(t=>{tz(dm(t.context,hY),hM).unsafe.error(e.log(t))}),$x={[gU]:gB,log:A,pipe(){return eK(this,arguments)}},$b=k_,$v=kS,$y=kk,$w=kO,$_=gG,$S=e=>gG(()=>e),$k=e=>gG(e),$O=$n,$E=kb,$F=e=>gK(e,e=>{let t=il(df(e.context,ua),tA(hH));return"None"===t._tag?e:{...e,annotations:M(e.annotations,rZ("effect.traceId",t.value.traceId),rZ("effect.spanId",t.value.spanId),"Span"===t.value._tag?rZ("effect.spanName",t.value.name):R)}}),$j=gQ,$I=gY,$C=gZ,$R=vy,$T=g6,$N=g3,$z=gX,$A=xu,$M=xd,$D=g5,$P=vO,$L=$v(vy,vw),$$=$v(vy,v_),$q=$v(vy,vS),$U=$v(vy,vk),$B=e=>_0(v8(vb,e)),$J=e=>"object"==typeof e&&null!=e&&gU in e,$H=(e=>{let t=k4(Oe(),e=>{let t=e.toUpperCase(),i=cQ.find(e=>e.label===t);return void 0===i?tG(p$([],`Expected a log level but received ${e}`)):tQ(i)});return void 0===e?t:k6(t,e)})("logLevel").pipe(On(cK),ce(e=>$B(e)),gl(e=>m7("Invalid log level").pipe(mH("error",e))),mG("ConfigError",e=>new kh({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),_9),$K=((...e)=>t=>{let i=e.map(String).join(", "),n=k9(`one of (${i})`,t=>{let n=e.find(e=>String(e)===t);return void 0===n?tG(p$([],`Expected one of (${i}) but received ${t}`)):tQ(n)});return void 0===t?n:k6(n,t)})("json","logFmt","structured","pretty")("logFormat"),$W=SK(function*(){let e=yield*L8;return E[yield*$K.pipe(On(e?"pretty":"json"))]}).pipe(mG("ConfigError",e=>new kh({code:"INVALID_SERVER_CONFIG",message:"Invalid server configuration",cause:e})),_9),$V=(e,t)=>{let i=t?.mixin??"json",n=dU(t?.level??"Debug");return t=>l9("None"!==i?t[i]:cI,()=>SQ(n,`${e} (${t.status})`).pipe(mH("response",t)))},$G=e=>t=>"ResponseError"===t._tag?$V(e,{level:"Error"})(t.response):m7(e).pipe(mH("error",t)),$Q="@effect/platform/FetchHttpClient/Fetch",$Y=(e=>LH(t=>l9(t,t=>lL(i=>{let n=tz(i.getFiberRef(ua),v0),r=new AbortController,a=uk(n,cS(()=>r.abort())),s=C$(t.url,t.urlParams,t.hash);if("Left"===s._tag)return l3(new CA({request:t,reason:"InvalidUrl",cause:s.left}));let o=s.right;return!i.getFiberRef(ub)||i.getFiberRef(LU)(t)?vZ(a,e(t,o,r.signal,i)):vZ(a,gb(`http.client ${t.method}`,{kind:"client",captureStackTrace:!1},n=>{n.attribute("http.request.method",t.method),n.attribute("server.address",o.origin),""!==o.port&&n.attribute("server.port",+o.port),n.attribute("url.full",o.toString()),n.attribute("url.path",o.pathname),n.attribute("url.scheme",o.protocol.slice(0,-1));let a=o.search.slice(1);""!==a&&n.attribute("url.query",a);let s=i.getFiberRef(CR),l=CC(t.headers,s);for(let e in l)n.attribute(`http.request.header.${e}`,String(l[e]));return ck(gv(e(t=i.getFiberRef(LB)?L_(t,CD(n)):t,o,r.signal,i),n),e=>{n.attribute("http.response.status_code",e.status);let t=CC(e.headers,s);for(let e in t)n.attribute(`http.response.header.${e}`,String(t[e]))})}))})),cw))((e,t,i,n)=>{let r=n.getFiberRef(ua),a=r.unsafeMap.get($Q)??globalThis.fetch,s=r.unsafeMap.get("@effect/platform/FetchHttpClient/FetchOptions")??{},o=new globalThis.Headers(e.headers),l=n=>ch(gu({try:()=>a(t,{...s,method:e.method,headers:o,body:n,duplex:"Stream"===e.body._tag?"half":void 0,signal:i}),catch:t=>new CA({request:e,reason:"Transport",cause:t})}),t=>LD(e,t));switch(e.body._tag){case"Raw":case"Uint8Array":return l(e.body.body);case"FormData":return l(e.body.formData);case"Stream":return l9(Pq(e.body.stream),l)}return l(void 0)}),$Z=(k=cw($Y),_W(Lq,l9(pf(),e=>ch(k,t=>L0(t,pb(t=>tM(e,t)))))));class $X extends t$($Q)(){}function $0(e,t){return l9(e.runtimeEffect,e=>lL(i=>(i.setFiberRefs(e.fiberRefs),i.currentRuntimeFlags=e.runtimeFlags,pg(t,e.context))))}let $1={...tr,[_n]:_n,pipe(){return eK(this,arguments)},commit(){return this.runtimeEffect}},$2=(e,t)=>{let i;t=t??_L();let n=_I(v4()),r=lL(r=>(i||(i=_E(ck(v6(_4(e,t),n),e=>{a.cachedRuntime=e}),{scope:n,scheduler:r.currentScheduler})),ci(i.await))),a=Object.assign(Object.create($1),{memoMap:t,scope:n,runtimeEffect:r,cachedRuntime:void 0,runtime:()=>void 0===a.cachedRuntime?_F(a.runtimeEffect):Promise.resolve(a.cachedRuntime),dispose:()=>_F(a.disposeEffect),disposeEffect:c_(()=>(a.runtimeEffect=lX("ManagedRuntime disposed"),a.cachedRuntime=void 0,uE(a.scope,u7))),runFork:(e,t)=>void 0===a.cachedRuntime?_E($0(a,e),t):_l(a.cachedRuntime)(e,t),runSyncExit:e=>void 0===a.cachedRuntime?_C($0(a,e)):_b(a.cachedRuntime)(e),runSync:e=>void 0===a.cachedRuntime?_I($0(a,e)):_u(a.cachedRuntime)(e),runPromiseExit:(e,t)=>void 0===a.cachedRuntime?_j($0(a,e),t):_y(a.cachedRuntime)(e,t),runCallback:(e,t)=>void 0===a.cachedRuntime?_c(_O)($0(a,e),t):_c(a.cachedRuntime)(e,t),runPromise:(e,t)=>void 0===a.cachedRuntime?_F($0(a,e),t):_v(a.cachedRuntime)(e,t)});return a},$3=(e,t)=>$2(_6(_Z($W,$H,_7($Z,_2($X,e)),kE(c3(CR,e=>e.concat(["x-uploadthing-api-key"])))),kF(L7(t)))),$5={"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applixware":{source:"apache",extensions:["aw"]},"application/atom+xml":{source:"iana",extensions:["atom"]},"application/atomcat+xml":{source:"iana",extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",extensions:["atomdeleted"]},"application/atomsvc+xml":{source:"iana",extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",extensions:["dwd"]},"application/atsc-held+xml":{source:"iana",extensions:["held"]},"application/atsc-rsat+xml":{source:"iana",extensions:["rsat"]},"application/calendar+xml":{source:"iana",extensions:["xcs"]},"application/ccxml+xml":{source:"iana",extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cpl+xml":{source:"iana",extensions:["cpl"]},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/dash+xml":{source:"iana",extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",extensions:["mpp"]},"application/davmount+xml":{source:"iana",extensions:["davmount"]},"application/dicom":{source:"iana",extensions:["dcm"]},"application/docbook+xml":{source:"apache",extensions:["dbk"]},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",extensions:["xdssc"]},"application/ecmascript":{source:"iana",extensions:["es","ecma"]},"application/emma+xml":{source:"iana",extensions:["emma"]},"application/emotionml+xml":{source:"iana",extensions:["emotionml"]},"application/epub+zip":{source:"iana",extensions:["epub"]},"application/exi":{source:"iana",extensions:["exi"]},"application/express":{source:"iana",extensions:["exp"]},"application/fdt+xml":{source:"iana",extensions:["fdt"]},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/geo+json":{source:"iana",extensions:["geojson"]},"application/gml+xml":{source:"iana",extensions:["gml"]},"application/gpx+xml":{source:"apache",extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",extensions:["gz"]},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/inkml+xml":{source:"iana",extensions:["ink","inkml"]},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/its+xml":{source:"iana",extensions:["its"]},"application/java-archive":{source:"apache",extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",extensions:["ser"]},"application/java-vm":{source:"apache",extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",extensions:["js","mjs"]},"application/json":{source:"iana",charset:"UTF-8",extensions:["json","map"]},"application/jsonml+json":{source:"apache",extensions:["jsonml"]},"application/ld+json":{source:"iana",extensions:["jsonld"]},"application/lgr+xml":{source:"iana",extensions:["lgr"]},"application/lost+xml":{source:"iana",extensions:["lostxml"]},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/mads+xml":{source:"iana",extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",extensions:["mathml"]},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",extensions:["mpf"]},"application/mediaservercontrol+xml":{source:"iana",extensions:["mscml"]},"application/metalink+xml":{source:"apache",extensions:["metalink"]},"application/metalink4+xml":{source:"iana",extensions:["meta4"]},"application/mets+xml":{source:"iana",extensions:["mets"]},"application/mmt-aei+xml":{source:"iana",extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",extensions:["musd"]},"application/mods+xml":{source:"iana",extensions:["mods"]},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/msword":{source:"iana",extensions:["doc","dot"]},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/node":{source:"iana",extensions:["cjs"]},"application/octet-stream":{source:"iana",extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/oebps-package+xml":{source:"iana",extensions:["opf"]},"application/ogg":{source:"iana",extensions:["ogx"]},"application/omdoc+xml":{source:"apache",extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",extensions:["relo"]},"application/patch-ops-error+xml":{source:"iana",extensions:["xer"]},"application/pdf":{source:"iana",extensions:["pdf"]},"application/pgp-encrypted":{source:"iana",extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",extensions:["pls"]},"application/postscript":{source:"iana",extensions:["ai","eps","ps"]},"application/provenance+xml":{source:"iana",extensions:["provx"]},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/pskc+xml":{source:"iana",extensions:["pskcxml"]},"application/rdf+xml":{source:"iana",extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/resource-lists+xml":{source:"iana",extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",extensions:["rld"]},"application/rls-services+xml":{source:"iana",extensions:["rs"]},"application/route-apd+xml":{source:"iana",extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",extensions:["sls"]},"application/route-usd+xml":{source:"iana",extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rsd+xml":{source:"apache",extensions:["rsd"]},"application/rss+xml":{source:"apache",extensions:["rss"]},"application/rtf":{source:"iana",extensions:["rtf"]},"application/sbml+xml":{source:"iana",extensions:["sbml"]},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/senml+xml":{source:"iana",extensions:["senmlx"]},"application/sensml+xml":{source:"iana",extensions:["sensmlx"]},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/shf+xml":{source:"iana",extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/smil+xml":{source:"iana",extensions:["smi","smil"]},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",extensions:["srx"]},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",extensions:["grxml"]},"application/sru+xml":{source:"iana",extensions:["sru"]},"application/ssdl+xml":{source:"apache",extensions:["ssdl"]},"application/ssml+xml":{source:"iana",extensions:["ssml"]},"application/swid+xml":{source:"iana",extensions:["swidtag"]},"application/tei+xml":{source:"iana",extensions:["tei","teicorpus"]},"application/thraud+xml":{source:"iana",extensions:["tfi"]},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",extensions:["ttml"]},"application/urc-ressheet+xml":{source:"iana",extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",extensions:["td"]},"application/vnd.1000minds.decision-model+xml":{source:"iana",extensions:["1km"]},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",extensions:["air"]},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.xdp+xml":{source:"iana",extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.android.package-archive":{source:"apache",extensions:["apk"]},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apple.installer+xml":{source:"iana",extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.balsamiq.bmml+xml":{source:"iana",extensions:["bmml"]},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.chemdraw+xml":{source:"iana",extensions:["cdxml"]},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.citationstyles.style+xml":{source:"iana",extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.dart":{source:"iana",extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.eszigno3+xml":{source:"iana",extensions:["es3","et3"]},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-earth.kml+xml":{source:"iana",extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",extensions:["kmz"]},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+xml":{source:"iana",extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+xml":{source:"iana",extensions:["lasxml"]},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.mozilla.xul+xml":{source:"iana",extensions:["xul"]},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-excel":{source:"iana",extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-powerpoint":{source:"iana",extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",extensions:["xps"]},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma.dd2+xml":{source:"iana",extensions:["dd2"]},"application/vnd.openblox.game+xml":{source:"iana",extensions:["obgx"]},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",extensions:["osm"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",extensions:["musicxml"]},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",extensions:["link66"]},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",extensions:["fo"]},"application/vnd.solent.sdkm+xml":{source:"iana",extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.sun.wadl+xml":{source:"iana",extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",extensions:["xdm"]},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",extensions:["ddf"]},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",extensions:["uoml"]},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",extensions:["osfpvg"]},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",extensions:["zaz"]},"application/voicexml+xml":{source:"iana",extensions:["vxml"]},"application/wasm":{source:"iana",extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",extensions:["wif"]},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wsdl+xml":{source:"iana",extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",extensions:["bz"]},"application/x-bzip2":{source:"apache",extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",extensions:["res"]},"application/x-dvi":{source:"apache",extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",extensions:["jnlp"]},"application/x-latex":{source:"apache",extensions:["latex"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",extensions:["xlf"]},"application/x-xpinstall":{source:"apache",extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/xaml+xml":{source:"apache",extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",extensions:["xel"]},"application/xcap-ns+xml":{source:"iana",extensions:["xns"]},"application/xenc+xml":{source:"iana",extensions:["xenc"]},"application/xhtml+xml":{source:"iana",extensions:["xhtml","xht"]},"application/xliff+xml":{source:"iana",extensions:["xlf"]},"application/xml":{source:"iana",extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",extensions:["dtd"]},"application/xop+xml":{source:"iana",extensions:["xop"]},"application/xproc+xml":{source:"apache",extensions:["xpl"]},"application/xslt+xml":{source:"iana",extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",extensions:["xspf"]},"application/xv+xml":{source:"iana",extensions:["mxml","xhvml","xvml","xvm"]},"application/yaml":{source:"iana",extensions:["yaml","yml"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yin+xml":{source:"iana",extensions:["yin"]},"application/zip":{source:"iana",extensions:["zip"]},"audio/3gpp":{source:"iana",extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/basic":{source:"iana",extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp4":{source:"iana",extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",extensions:["oga","ogg","spx","opus"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/webm":{source:"apache",extensions:["weba"]},"audio/x-aac":{source:"apache",extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/x-gsm":{source:"apache",extensions:["gsm"]},"audio/xm":{source:"apache",extensions:["xm"]},"image/aces":{source:"iana",extensions:["exr"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",extensions:["avif"]},"image/bmp":{source:"iana",extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",extensions:["jpeg","jpg","jpe","jfif","pjpeg","pjp"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",extensions:["jpm"]},"image/jpx":{source:"iana",extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/png":{source:"iana",extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"text/cache-manifest":{source:"iana",extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/css":{source:"iana",charset:"UTF-8",extensions:["css"]},"text/csv":{source:"iana",extensions:["csv"]},"text/html":{source:"iana",extensions:["html","htm","shtml"]},"text/markdown":{source:"iana",extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/n3":{source:"iana",charset:"UTF-8",extensions:["n3"]},"text/plain":{source:"iana",extensions:["txt","text","conf","def","list","log","in","ini"]},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/richtext":{source:"iana",extensions:["rtx"]},"text/rtf":{source:"iana",extensions:["rtf"]},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{source:"iana",extensions:["shex"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/tab-separated-values":{source:"iana",extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/uri-list":{source:"iana",extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",extensions:["vcard"]},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",extensions:["xml"]},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h264":{source:"iana",extensions:["h264"]},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"iana",extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"iana",extensions:["ogv"]},"video/quicktime":{source:"iana",extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/webm":{source:"apache",extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",extensions:["otf"]},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/rfc822":{source:"iana",extensions:["eml","mime"]},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/gltf+json":{source:"iana",extensions:["gltf"]},"model/gltf-binary":{source:"iana",extensions:["glb"]},"model/iges":{source:"iana",extensions:["igs","iges"]},"model/mesh":{source:"iana",extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana",extensions:[".p21",".stp",".step",".stpnc",".210"]},"model/step+xml":{source:"iana",extensions:["stpx"]},"model/step+zip":{source:"iana",extensions:["stpz"]},"model/step-xml+zip":{source:"iana",extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]}},$4={},$6={},$7=!1,$8=e=>{console.warn(`⚠️ [uploadthing][deprecated] ${e}`)},$9=(e,t)=>SK(function*(){let i=new FormData;i.append("file",e);let n=(yield*Lq).pipe(L1),r=yield*Lm(t.url).pipe(LT(i),Lw("Range","bytes=0-"),Lw("x-uploadthing-version","7.5.2"),n.execute,gl($G("Failed to upload file")),cf(e=>new kh({code:"UPLOAD_FAILED",message:"Failed to upload file",cause:e})),ce(e=>e.json),ce(R),SG);return yield*m6(`File ${e.name} uploaded successfully`).pipe(mH("json",r)),{...r,get url(){return $8("`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),r.url},get appUrl(){return $8("`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead."),r.appUrl}}});class qe extends Blob{constructor(e,t,i){let n={...i,type:i?.type??(function(e){if(!e||"string"!=typeof e)return!1;let t=(function(e){let t=e.lastIndexOf(".");return t<0?"":e.substring(t)})("x."+e).toLowerCase().substring(1);return!!t&&((function(e,t){if($7)return;$7=!0;let i=["nginx","apache",void 0,"iana"];Object.keys($5).forEach(n=>{let r=$5[n],a=r.extensions;if(a?.length)for(let s of(e[n]=a,a)){if(t[s]){let e=i.indexOf($5[t[s]].source),n=i.indexOf(r.source);if("application/octet-stream"!==t[s]&&(e>n||e===n&&t[s].startsWith("application/")))continue}t[s]=n}})}($4,$6),$6)[t]||!1)}(t)||"application/octet-stream"),lastModified:i?.lastModified??Date.now()};super(e,n),this.name=t,this.customId=n.customId,this.lastModified=n.lastModified}}function qt(){if("undefined"!=typeof window)throw new kh({code:"INTERNAL_SERVER_ERROR",message:"The `utapi` can only be used on the server."})}let qi=e=>SK(function*(){let t=ea(e)?e.url:e;if("string"==typeof t&&t.startsWith("data:"))return yield*l3({code:"BAD_REQUEST",message:"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.",data:void 0});t=new URL(t);let{name:i=t.pathname.split("/").pop()??"unknown-filename",customId:n}=ea(e)?e:{},r=(yield*Lq).pipe(L1);return new qe([(yield*Ld(t).pipe(Ly({headers:{}}),r.execute,l9(e=>e.arrayBuffer),cf(e=>({code:"BAD_REQUEST",message:`Failed to download requested file: ${e.message}`,data:e.toJSON()})),SG))],i,{customId:n,lastModified:Date.now()})}).pipe(m8("downloadFile")),qn=(e,t,i)=>SK(function*(){let{apiKey:n,appId:r}=yield*L9,a=yield*$t,s=yield*kg(e,r);return{url:yield*kx(`${a}/${s}`,n,{data:{"x-ut-identifier":r,"x-ut-file-name":e.name,"x-ut-file-size":e.size,"x-ut-file-type":e.type,"x-ut-custom-id":e.customId,"x-ut-content-disposition":t,"x-ut-acl":i}}),key:s}}).pipe(m8("generatePresignedUrl")),qr=(e,t)=>SK(function*(){let i=yield*qn(e,t.contentDisposition??"inline",t.acl).pipe(mG("UploadThingError",e=>l3(kh.toObject(e))),mG("ConfigError",()=>l3({code:"INVALID_SERVER_CONFIG",message:"Failed to generate presigned URL"}))),n=yield*$9(e,i).pipe(mG("UploadThingError",e=>l3(kh.toObject(e))),mG("ResponseError",e=>l3({code:"UPLOAD_FAILED",message:"Failed to upload file",data:e.toJSON()})));return{key:i.key,url:n.url,appUrl:n.appUrl,ufsUrl:n.ufsUrl,lastModified:e.lastModified??Date.now(),name:e.name,size:e.size,type:e.type,customId:e.customId??null,fileHash:n.fileHash}}).pipe(m8("uploadFile"));class qa{constructor(e){this.opts=e,this.requestUploadThing=(e,t,i)=>SK(this,function*(){let{apiKey:n}=yield*L9,r=yield*$e,a=(yield*Lq).pipe(L1);return yield*Lf(e).pipe(LF(r),LR(t),L_({"x-uploadthing-version":"7.5.2","x-uploadthing-be-adapter":"server-sdk","x-uploadthing-api-key":ko(n)}),a.execute,go({onSuccess:$V("UploadThing API Response"),onFailure:$G("Failed to request UploadThing API")}),l9(Lz(i)),SG)}).pipe(mG("ConfigError",e=>new kh({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:e})),m8("utapi.#requestUploadThing")),this.executeAsync=async(e,t)=>{let i=await e.pipe(m8("utapi.#executeAsync"),e=>this.runtime.runPromiseExit(e,t?{signal:t}:void 0));if("Failure"===i._tag)throw yc(i.cause);return i.value},this.deleteFiles=async(e,t)=>{qt();let{keyType:i=this.defaultKeyType}=t??{};class n extends I3("DeleteFileResponse")({success:jJ,deletedCount:jB}){}return await this.executeAsync(this.requestUploadThing("/v6/deleteFiles","fileKey"===i?{fileKeys:ij(e)}:{customIds:ij(e)},n).pipe(m8("deleteFiles")))},this.getFileUrls=async(e,t)=>{qt();let{keyType:i=this.defaultKeyType}=t??{};class n extends I3("GetFileUrlResponse")({data:j1(Im({key:jU,url:jU}))}){}return await this.executeAsync(this.requestUploadThing("/v6/getFileUrl","fileKey"===i?{fileKeys:ij(e)}:{customIds:ij(e)},n).pipe(m8("getFileUrls")))},this.listFiles=async e=>{qt();class t extends I3("ListFileResponse")({hasMore:jJ,files:j1(Im({id:jU,customId:jV(jU),key:jU,name:jU,size:jB,status:jz("Deletion Pending","Failed","Uploaded","Uploading"),uploadedAt:jB}))}){}return await this.executeAsync(this.requestUploadThing("/v6/listFiles",{...e},t).pipe(m8("listFiles")))},this.renameFiles=async e=>{qt();class t extends I3("RenameFileResponse")({success:jJ}){}return await this.executeAsync(this.requestUploadThing("/v6/renameFiles",{updates:ij(e)},t).pipe(m8("renameFiles")))},this.getUsageInfo=async()=>{qt();class e extends I3("GetUsageInfoResponse")({totalBytes:jB,appTotalBytes:jB,filesUploaded:jB,limitBytes:jB}){}return await this.executeAsync(this.requestUploadThing("/v6/getUsageInfo",{},e).pipe(m8("getUsageInfo")))},this.generateSignedURL=async(e,t)=>{qt();let i=kp(t?.expiresIn??"5 minutes");if(t?.expiresIn&&isNaN(i))throw new kh({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(i>604800)throw new kh({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});let n=SK(function*(){let{apiKey:t,appId:n}=yield*L9,r=yield*$i,a=r.includes("local")?"http":"https";return{ufsUrl:yield*kx(`${a}://${n}.${r}/f/${e}`,t,{ttlInSeconds:i})}});return await this.executeAsync(n.pipe(mG("ConfigError",e=>new kh({code:"INVALID_SERVER_CONFIG",message:"There was an error with the server configuration. More info can be found on this error's `cause` property",cause:e})),m8("generateSignedURL")))},this.getSignedURL=async(e,t)=>{qt();let i=t?.expiresIn?kp(t.expiresIn):void 0,{keyType:n=this.defaultKeyType}=t??{};if(t?.expiresIn&&isNaN(i))throw new kh({code:"BAD_REQUEST",message:"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds."});if(i&&i>604800)throw new kh({code:"BAD_REQUEST",message:"expiresIn must be less than 7 days (604800 seconds)."});class r extends I3("GetSignedUrlResponse")({url:jU,ufsUrl:jU}){}return await this.executeAsync(this.requestUploadThing("/v6/requestFileAccess","fileKey"===n?{fileKey:e,expiresIn:i}:{customId:e,expiresIn:i},r).pipe(m8("getSignedURL")))},this.updateACL=async(e,t,i)=>{qt();let{keyType:n=this.defaultKeyType}=i??{},r=ij(e).map(e=>"fileKey"===n?{fileKey:e,acl:t}:{customId:e,acl:t}),a=Im({success:jJ});return await this.executeAsync(this.requestUploadThing("/v6/updateACL",{updates:r},a).pipe(m8("updateACL")))},qt(),this.fetch=e?.fetch??globalThis.fetch,this.defaultKeyType=e?.defaultKeyType??"fileKey",this.runtime=$3(this.fetch,this.opts)}uploadFiles(e,t){qt();let i=vz(ij(e),e=>qr(e,t??{}).pipe(m2({onSuccess:e=>({data:e,error:null}),onFailure:e=>({data:null,error:e})}))).pipe(ch(t=>Array.isArray(e)?t:t[0]),ck(e=>m6("Finished uploading").pipe(mH("uploadResult",e))),m8("uploadFiles"));return this.executeAsync(i,t?.signal)}uploadFilesFromUrl(e,t){qt();let i=vz(ij(e),e=>qi(e).pipe(l9(e=>qr(e,t??{})),m2({onSuccess:e=>({data:e,error:null}),onFailure:e=>({data:null,error:e})}))).pipe(ch(t=>Array.isArray(e)?t:t[0]),ck(e=>m6("Finished uploading").pipe(mH("uploadResult",e))),m8("uploadFiles")).pipe(m8("uploadFilesFromUrl"));return this.executeAsync(i,t?.signal)}}var qs=i(99344);let qo=new qa;async function ql(e,t,i){let n;if(e.size>t.maxSize)return{success:!1,msg:"File is too large",status:400};let r=!1;if(t.formats.forEach(t=>{e.type.split("/")[0]===t&&(r=!0)}),t.types.forEach(t=>{e.type.split("/")[1]===t&&(n=!0)}),!r)return{success:!1,msg:"Invalid file",status:400};if(!n)return{success:!1,msg:"Invalid file type",status:400};if(!e.name||e.name.trim().length<2)return{success:!1,msg:"Invalid file name",status:400};if(e.name.length>99)return{success:!1,msg:"File name is too long",status:400};let a=await (0,F.q)();if(!a||!a.user||!a.session)return{success:!1,msg:"Not authenticated",status:403};let s=function(e,t,i,n){let r=new Date,a=r.toISOString().split("T")[0].replace(/-/g,""),s=r.toTimeString().split(" ")[0].replace(/:/g,"");return`${e}_${i}_${t}_${a}_${s}${n}`}(a.user.id,`${e.name.split(".")[0]}`,i,`.${e.type.split("/")[1]}`),o=function(e,t){let[i,n]=e.split(","),r=i.match(/:(.*?);/)[1],a=atob(n),s=new ArrayBuffer(a.length),o=new Uint8Array(s);for(let e=0;e<a.length;e++)o[e]=a.charCodeAt(e);return new File([new Blob([s],{type:r})],t,{type:r})}(e.src,s);try{let t=await qo.uploadFiles(o),i=[a.user.id,t.data?.ufsUrl,s.trim().replaceAll(" ","-"),e.size,new Date],n=await (0,I.P)(`
            INSERT INTO images (user_id, url, name, size, created_at)
            VALUES ($1, $2, $3, $4, $5)
            RETURNING id
        `,i);if(!n||1!==n.rowCount)return{success:!1,msg:"Image has been uploaded but not inserted to database",status:400};let r=n.rows[0].id;return{success:!0,msg:"File uploaded",status:200,file:{...t.data,id:r}}}catch(e){return{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:505}}}async function qc(e){if(!e)return{success:!1,msg:"No organization data provided",status:400};if(!e.name||e.name.length<2)return{success:!1,msg:"Please enter a valid name",status:400};if(e.name.length>99)return{success:!1,msg:"Organization name is too long",status:400};if(!e.slug||e.slug.length<2)return{success:!1,msg:"Please enter a valid slug",status:400};if(e.slug.length>99)return{success:!1,msg:"Organization slug is too long",status:400};let t=await (0,F.q)();if(!t||!t.user||!t.session)return{success:!1,msg:"Sorry, you're not authenticated",status:403};try{let i=[t.user.id,e.name.trim(),e.slug.trim().toLowerCase(),new Date],n=await (0,I.P)(`
            INSERT INTO organizations (owner_id, name, slug, created_at)
            VALUES ($1, $2, $3, $4)
            RETURNING id
        `,i);if(!n)throw"A database error occurred";if(0===n.rowCount)return{success:!1,msg:"Could not create organization",status:500};let r=n.rows[0].id,a=1;if(e.logo){let t=await ql({src:e.logo.src,name:e.logo.name,size:e.logo.size,type:e.logo.type},{maxSize:5242880,formats:["image"],types:["png","jpg","jpeg","gif","webp","bmp","svg","apng","ico","tiff","avif"]},"organization-logo");if(console.log(t),!t.success)return{success:!0,msg:t.msg,status:400};a=t.file.id}if(1!==a){let e=[a,r],t=await (0,I.P)(`
                UPDATE organizations SET logo_id = $1 WHERE id = $2
            `,e);if(!t||1!==t.rowCount)return{success:!0,msg:"Organization created but could not update logo",status:500}}return{success:!0,msg:"Organization created successfully",status:200,data:{id:r,slug:e.slug.trim().toLowerCase()}}}catch(e){if("23505"===e.code)return{success:!1,msg:"Vanity URL is already in use",status:400};return{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:505}}}(0,qs.D)([ql]),(0,j.A)(ql,"7052c2797f282e76c1cdb34d614b0cce0dfe9ccabc",null),(0,qs.D)([qc]),(0,j.A)(qc,"403814d4b61d66b97e0e15b47472217cd272008abf",null)},96665:(e,t,i)=>{Promise.resolve().then(i.bind(i,60621))},49465:(e,t,i)=>{Promise.resolve().then(i.bind(i,47094))},90351:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var i=Array.isArray(t)?t:t.split(",");if(0===i.length)return!0;var n=e.name||"",r=(e.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return i.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):r===t})}return!0}},61518:(e,t,i)=>{"use strict";var n=i(53897);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,a,s){if(s!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return i.PropTypes=i,i}},28200:(e,t,i)=>{e.exports=i(61518)()},53897:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},47094:(e,t,i)=>{"use strict";i.d(t,{default:()=>ep});var n=i(45512),r=i(26248);let a=(0,r.createServerReference)("403814d4b61d66b97e0e15b47472217cd272008abf",r.callServer,void 0,r.findSourceMapURL,"default");var s=i(58009),o=i(28200);function l(e,t,i,n){return new(i||(i=Promise))(function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,o)}l((n=n.apply(e,t||[])).next())})}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;let c=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function u(e,t,i){let n=function(e){let{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){let i=t.split(".").pop().toLowerCase(),n=c.get(i);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:r}=e,a="string"==typeof t?t:"string"==typeof r&&r.length>0?r:`./${e.name}`;return"string"!=typeof n.path&&p(n,"path",a),void 0!==i&&Object.defineProperty(n,"handle",{value:i,writable:!1,configurable:!1,enumerable:!0}),p(n,"relativePath",a),n}function p(e,t,i){Object.defineProperty(e,t,{value:i,writable:!1,configurable:!1,enumerable:!0})}let h=[".DS_Store","Thumbs.db"];function d(e){return"object"==typeof e&&null!==e}function f(e){return e.filter(e=>-1===h.indexOf(e.name))}function m(e){if(null===e)return[];let t=[];for(let i=0;i<e.length;i++){let n=e[i];t.push(n)}return t}function g(e){if("function"!=typeof e.webkitGetAsEntry)return x(e);let t=e.webkitGetAsEntry();return t&&t.isDirectory?v(t):x(e,t)}function x(e,t){return l(this,void 0,void 0,function*(){var i;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){let t=yield e.getAsFileSystemHandle();if(null===t)throw Error(`${e} is not a File`);if(void 0!==t){let e=yield t.getFile();return e.handle=t,u(e)}}let n=e.getAsFile();if(!n)throw Error(`${e} is not a File`);return u(n,null!==(i=null==t?void 0:t.fullPath)&&void 0!==i?i:void 0)})}function b(e){return l(this,void 0,void 0,function*(){return e.isDirectory?v(e):function(e){return l(this,void 0,void 0,function*(){return new Promise((t,i)=>{e.file(i=>{t(u(i,e.fullPath))},e=>{i(e)})})})}(e)})}function v(e){let t=e.createReader();return new Promise((e,i)=>{let n=[];!function r(){t.readEntries(t=>l(this,void 0,void 0,function*(){if(t.length){let e=Promise.all(t.map(b));n.push(e),r()}else try{let t=yield Promise.all(n);e(t)}catch(e){i(e)}}),e=>{i(e)})}()})}var y=i(90351);function w(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach(function(t){k(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,n,r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return a}}(e,t)||E(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return F(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return F(e,t)}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}var j="function"==typeof y?y:y.default,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(","),i=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:"file-invalid-type",message:"File type must be ".concat(i)}},C=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},R=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},T={code:"too-many-files",message:"Too many files"};function N(e,t){var i="application/x-moz-file"===e.type||j(e,t);return[i,i?null:I(t)]}function z(e,t,i){if(A(e.size)){if(A(t)&&A(i)){if(e.size>i)return[!1,C(i)];if(e.size<t)return[!1,R(t)]}else if(A(t)&&e.size<t)return[!1,R(t)];else if(A(i)&&e.size>i)return[!1,C(i)]}return[!0,null]}function A(e){return null!=e}function M(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function D(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function P(e){e.preventDefault()}function L(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){for(var i=arguments.length,n=Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return t.some(function(t){return!M(e)&&t&&t.apply(void 0,[e].concat(n)),M(e)})}}function $(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function q(e){return/^.*\.[\w]+$/.test(e)}var U=["children"],B=["open"],J=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],H=["refKey","onChange","onClick"];function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i,n,r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){o=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw n}}return a}}(e,t)||W(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return V(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return V(e,t)}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function Q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach(function(t){Y(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function Y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Z(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var X=(0,s.forwardRef)(function(e,t){var i=e.children,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Q(Q({},ee),e),i=t.accept,n=t.disabled,r=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,p=t.onDragLeave,h=t.onDragOver,d=t.onDrop,f=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,x=t.onFileDialogOpen,b=t.useFsAccessApi,v=t.autoFocus,y=t.preventDropOnDocument,_=t.noClick,E=t.noKeyboard,F=t.noDrag,j=t.noDragEventsBubbling,I=t.onError,C=t.validator,R=(0,s.useMemo)(function(){return function(e){if(A(e))return Object.entries(e).reduce(function(e,t){var i=O(t,2),n=i[0],r=i[1];return[].concat(w(e),[n],w(r))},[]).filter(function(e){return $(e)||q(e)}).join(",")}(i)},[i]),U=(0,s.useMemo)(function(){return A(i)?[{description:"Files",accept:Object.entries(i).filter(function(e){var t=O(e,2),i=t[0],n=t[1],r=!0;return $(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(n)&&n.every(q)||(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),r=!1),r}).reduce(function(e,t){var i=O(t,2),n=i[0],r=i[1];return S(S({},e),{},k({},n,r))},{})}]:i},[i]),B=(0,s.useMemo)(function(){return"function"==typeof x?x:en},[x]),G=(0,s.useMemo)(function(){return"function"==typeof g?g:en},[g]),X=(0,s.useRef)(null),er=(0,s.useRef)(null),ea=K((0,s.useReducer)(ei,et),2),es=ea[0],eo=ea[1],el=es.isFocused,ec=es.isFileDialogActive,eu=(0,s.useRef)("undefined"!=typeof window&&window.isSecureContext&&b&&"showOpenFilePicker"in window),ep=function(){!eu.current&&ec&&setTimeout(function(){er.current&&!er.current.files.length&&(eo({type:"closeDialog"}),G())},300)};(0,s.useEffect)(function(){return window.addEventListener("focus",ep,!1),function(){window.removeEventListener("focus",ep,!1)}},[er,ec,G,eu]);var eh=(0,s.useRef)([]),ed=function(e){X.current&&X.current.contains(e.target)||(e.preventDefault(),eh.current=[])};(0,s.useEffect)(function(){return y&&(document.addEventListener("dragover",P,!1),document.addEventListener("drop",ed,!1)),function(){y&&(document.removeEventListener("dragover",P),document.removeEventListener("drop",ed))}},[X,y]),(0,s.useEffect)(function(){return!n&&v&&X.current&&X.current.focus(),function(){}},[X,v,n]);var ef=(0,s.useCallback)(function(e){I?I(e):console.error(e)},[I]),em=(0,s.useCallback)(function(e){var t;e.preventDefault(),e.persist(),ej(e),eh.current=[].concat(function(e){if(Array.isArray(e))return V(e)}(t=eh.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||W(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.target]),D(e)&&Promise.resolve(r(e)).then(function(t){if(!M(e)||j){var i,n,r,s,p,h,d,f,m=t.length,g=m>0&&(n=(i={files:t,accept:R,minSize:o,maxSize:a,multiple:l,maxFiles:c,validator:C}).files,r=i.accept,s=i.minSize,p=i.maxSize,h=i.multiple,d=i.maxFiles,f=i.validator,(!!h||!(n.length>1))&&(!h||!(d>=1)||!(n.length>d))&&n.every(function(e){var t=O(N(e,r),1)[0],i=O(z(e,s,p),1)[0],n=f?f(e):null;return t&&i&&!n}));eo({isDragAccept:g,isDragReject:m>0&&!g,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}}).catch(function(e){return ef(e)})},[r,u,ef,j,R,o,a,l,c,C]),eg=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ej(e);var t=D(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&h&&h(e),!1},[h,j]),ex=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ej(e);var t=eh.current.filter(function(e){return X.current&&X.current.contains(e)}),i=t.indexOf(e.target);-1!==i&&t.splice(i,1),eh.current=t,!(t.length>0)&&(eo({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),D(e)&&p&&p(e))},[X,p,j]),eb=(0,s.useCallback)(function(e,t){var i=[],n=[];e.forEach(function(e){var t=K(N(e,R),2),r=t[0],s=t[1],l=K(z(e,o,a),2),c=l[0],u=l[1],p=C?C(e):null;if(r&&c&&!p)i.push(e);else{var h=[s,u];p&&(h=h.concat(p)),n.push({file:e,errors:h.filter(function(e){return e})})}}),(!l&&i.length>1||l&&c>=1&&i.length>c)&&(i.forEach(function(e){n.push({file:e,errors:[T]})}),i.splice(0)),eo({acceptedFiles:i,fileRejections:n,isDragReject:n.length>0,type:"setFiles"}),d&&d(i,n,t),n.length>0&&m&&m(n,t),i.length>0&&f&&f(i,t)},[eo,l,R,o,a,c,d,f,m,C]),ev=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),ej(e),eh.current=[],D(e)&&Promise.resolve(r(e)).then(function(t){(!M(e)||j)&&eb(t,e)}).catch(function(e){return ef(e)}),eo({type:"reset"})},[r,eb,ef,j]),ey=(0,s.useCallback)(function(){if(eu.current){eo({type:"openDialog"}),B(),window.showOpenFilePicker({multiple:l,types:U}).then(function(e){return r(e)}).then(function(e){eb(e,null),eo({type:"closeDialog"})}).catch(function(e){e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)?(G(e),eo({type:"closeDialog"})):e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)?(eu.current=!1,er.current?(er.current.value=null,er.current.click()):ef(Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ef(e)});return}er.current&&(eo({type:"openDialog"}),B(),er.current.value=null,er.current.click())},[eo,B,G,b,eb,ef,U,l]),ew=(0,s.useCallback)(function(e){X.current&&X.current.isEqualNode(e.target)&&(" "===e.key||"Enter"===e.key||32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),ey())},[X,ey]),e_=(0,s.useCallback)(function(){eo({type:"focus"})},[]),eS=(0,s.useCallback)(function(){eo({type:"blur"})},[]),ek=(0,s.useCallback)(function(){_||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return -1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/")}()?setTimeout(ey,0):ey())},[_,ey]),eO=function(e){return n?null:e},eE=function(e){return E?null:eO(e)},eF=function(e){return F?null:eO(e)},ej=function(e){j&&e.stopPropagation()},eI=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=e.role,r=e.onKeyDown,a=e.onFocus,s=e.onBlur,o=e.onClick,l=e.onDragEnter,c=e.onDragOver,u=e.onDragLeave,p=e.onDrop,h=Z(e,J);return Q(Q(Y({onKeyDown:eE(L(r,ew)),onFocus:eE(L(a,e_)),onBlur:eE(L(s,eS)),onClick:eO(L(o,ek)),onDragEnter:eF(L(l,em)),onDragOver:eF(L(c,eg)),onDragLeave:eF(L(u,ex)),onDrop:eF(L(p,ev)),role:"string"==typeof i&&""!==i?i:"presentation"},void 0===t?"ref":t,X),n||E?{}:{tabIndex:0}),h)}},[X,ew,e_,eS,ek,em,eg,ex,ev,E,F,n]),eC=(0,s.useCallback)(function(e){e.stopPropagation()},[]),eR=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=e.onChange,n=e.onClick,r=Z(e,H);return Q(Q({},Y({accept:R,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:eO(L(i,ev)),onClick:eO(L(n,eC)),tabIndex:-1},void 0===t?"ref":t,er)),r)}},[er,i,l,ev,n]);return Q(Q({},es),{},{isFocused:el&&!n,getRootProps:eI,getInputProps:eR,rootRef:X,inputRef:er,open:eO(ey)})}(Z(e,U)),r=n.open,a=Z(n,B);return(0,s.useImperativeHandle)(t,function(){return{open:r}},[r]),s.createElement(s.Fragment,null,i(Q(Q({},a),{},{open:r})))});X.displayName="Dropzone";var ee={disabled:!1,getFilesFromEvent:function(e){return l(this,void 0,void 0,function*(){return d(e)&&d(e.dataTransfer)?function(e,t){return l(this,void 0,void 0,function*(){if(e.items){let i=m(e.items).filter(e=>"file"===e.kind);return"drop"!==t?i:f(function e(t){return t.reduce((t,i)=>[...t,...Array.isArray(i)?e(i):[i]],[])}((yield Promise.all(i.map(g)))))}return f(m(e.files).map(e=>u(e)))})}(e.dataTransfer,e.type):d(e)&&d(e.target)?m(e.target.files).map(e=>u(e)):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return l(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>u(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};X.defaultProps=ee,X.propTypes={children:o.func,accept:o.objectOf(o.arrayOf(o.string)),multiple:o.bool,preventDropOnDocument:o.bool,noClick:o.bool,noKeyboard:o.bool,noDrag:o.bool,noDragEventsBubbling:o.bool,minSize:o.number,maxSize:o.number,maxFiles:o.number,disabled:o.bool,getFilesFromEvent:o.func,onFileDialogCancel:o.func,onFileDialogOpen:o.func,useFsAccessApi:o.bool,autoFocus:o.bool,onDragEnter:o.func,onDragLeave:o.func,onDragOver:o.func,onDrop:o.func,onDropAccepted:o.func,onDropRejected:o.func,onError:o.func,validator:o.func};var et={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ei(e,t){switch(t.type){case"focus":return Q(Q({},e),{},{isFocused:!0});case"blur":return Q(Q({},e),{},{isFocused:!1});case"openDialog":return Q(Q({},et),{},{isFileDialogActive:!0});case"closeDialog":return Q(Q({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Q(Q({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Q(Q({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return Q({},et);default:return e}}function en(){}var er=i(49850),ea=i(5110),es=i.n(ea);function eo({img:e,setImg:t,uploadState:i,setUploadState:r,customizations:a,restrictions:o}){let l=(0,s.useCallback)(e=>{r({state:null,msg:""}),r({state:"loading",msg:"Loading"}),e.forEach(e=>{let i=new FileReader;i.onabort=()=>r({state:"error",msg:"File reading was aborted"}),i.onerror=()=>r({state:"error",msg:"Could not read file"});let n=!1;if(o.acceptedFormats.forEach(t=>{e.type.split("/")[0]===t&&(n=!0)}),!n){r({state:"error",msg:"Invalid file"});return}let a=!1;if(o.acceptedTypes.forEach(t=>{e.type.split("/")[1]===t&&(a=!0)}),!a){r({state:"error",msg:"Invalid file type"});return}if(e.size>o.maxSize){r({state:"error",msg:"File too large"});return}i.onload=()=>{t({src:i.result,type:e.type,size:e.size,name:e.name}),r({state:"selected",msg:"Image selected"})},i.readAsDataURL(e)})},[]);return"locked"!==i.state?(0,n.jsx)(X,{onDrop:l,onDragEnter:()=>r({state:"dragging",msg:""}),onDragLeave:()=>r({state:null,msg:""}),onDropRejected:()=>r({state:"error",msg:""}),onFileDialogCancel:()=>r({state:"error",msg:"Upload canceled"}),onFileDialogOpen:()=>r({state:"loading",msg:"Selecting file"}),children:({getRootProps:t,getInputProps:r})=>(0,n.jsx)("section",{className:`${a?.className&&a.className}`,children:(0,n.jsx)("div",{className:`flex flex-col items-center justify-center cursor-pointer h-[300px] p-5 ${"dragging"===i.state?"bg-white/10":`${"error"===i.state?"bg-red-400/10":`${"loading"===i.state?"bg-white/5 border-dashed border-2 border-white/20":"bg-white/5"}`}`} rounded-xl relative`,...t(),children:(0,n.jsxs)("div",{className:`${"dragging"===i.state?"scale-110":""} transition-all duration-200 ease-in-out flex flex-col items-center text-center`,children:[(0,n.jsx)("input",{...r()}),e&&"selected"===i.state?(0,n.jsx)("img",{src:e.src,alt:`${e}`,className:`w-[200px] h-[200px] object-contain bg-secondary-bg rounded-xl ${a?.previewClassName&&a?.previewClassName}`}):(0,n.jsx)(er.dkL,{className:`text-[100px] ${"error"===i.state?`text-red-500/60 ${es().error}`:"text-white/20"}`}),null===i.state&&a?.uploadText!==null&&(0,n.jsxs)("p",{className:"mt-1 font-semibold text-white/30",children:[" ",a?.uploadText?a.uploadText:"Upload image"," "]}),"selected"===i.state&&e&&(0,n.jsxs)("p",{className:"mt-2 mb-[2px] text-[16px]",children:[" ",e.name," "]}),"selected"===i.state&&e&&(0,n.jsx)("p",{className:"text-sm grey",children:" Simply drag/select a new image to replace this "}),"error"===i.state&&(0,n.jsxs)("p",{className:"mt-1 text-red-500/80 font-semibold",children:[" ",i.msg," "]}),"loading"===i.state&&(0,n.jsxs)("p",{className:"mt-1 text-white/50 font-semibold",children:[" ",i.msg," "]})]})})})}):(0,n.jsx)("div",{children:(0,n.jsx)("section",{className:`${a?.className&&a?.className}`,children:(0,n.jsx)("div",{className:"flex flex-col items-center justify-center cursor-pointer h-[300px] p-5 bg-white/5 rounded-xl",children:(0,n.jsxs)("div",{className:"transition-all duration-200 ease-in-out flex flex-col items-center text-center",children:[(0,n.jsx)(er.HVe,{className:"text-[100px] text-white/60"}),(0,n.jsx)("p",{className:"mt-2 font-semibold text-white/70",children:" Uploading image "})]})})})})}var el=i(92273),ec=i(30115),eu=i(79334);function ep(){let[e,t]=(0,s.useState)(""),[i,r]=(0,s.useState)(""),[o,l]=(0,s.useState)(null),[c,u]=(0,s.useState)({state:null,msg:""}),p=(0,eu.useRouter)(),h=(0,el.d4)(e=>e.ui),d=(0,el.wA)(),[f,m]=(0,s.useState)({isError:!1,msg:"An error occurred"});async function g(t){if(t.preventDefault(),m({isError:!1,msg:"Loading"}),h.loading){m({isError:!0,msg:"Please wait, loading"});return}let n=c.state;u({state:"locked",msg:"Uploading"}),d((0,ec.vL)());try{if(!e||e.trim().length<2)throw"Please enter a valid organization name";if(e.length>99)throw"Organization name is too long";if(!i||i.trim().length<2||"new"===i.trim().toLowerCase())throw"Please enter a valid organization slug";if(i.trim().length>99)throw"Organization slug is too long";if(o&&o.size>5242880)throw"Logo file size too large";if(o&&o.name.length>99)throw"Logo file name too long";let t=await a({name:e,slug:i,logo:o});if(!t)throw"Could not create organization";if(403===t.status)throw p.push("/login"),"Not authenticated";if(!t.success)throw t.msg;p.push(`/organization/${i.toLowerCase().trim().replaceAll(" ","")}`)}catch(e){m({isError:!0,msg:`${e}`})}finally{d((0,ec.xv)()),u({state:n,msg:""})}}return(0,n.jsx)("div",{children:(0,n.jsxs)("form",{onSubmit:g,className:"flex flex-col my-10 w-full",children:[(0,n.jsxs)("label",{htmlFor:"name",className:"font-semibold mb-1",children:[" Name ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})," "]}),(0,n.jsx)("input",{required:!0,value:e,onChange:e=>{t(e.target.value),r(e.target.value.toLowerCase().replaceAll(" ",""))},type:"text",name:"name",placeholder:"My New Organization"}),(0,n.jsxs)("label",{htmlFor:"name",className:"font-semibold mb-1 mt-5",children:[" Vanity URL ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})," "]}),(0,n.jsxs)("div",{className:"flex w-full",children:[(0,n.jsx)("div",{className:"bg-secondary-bg border-l-2 border-t-2 border-b-2 border-tertiary-bg rounded-l-lg p-1 px-2",children:" seagull.com/ "}),(0,n.jsx)("input",{required:!0,value:i,onChange:e=>r(e.target.value.toLowerCase().trim()),type:"text",name:"name",placeholder:"vanity",className:"rounded-l-[0px] flex-grow"})]}),(0,n.jsx)("label",{className:"font-semibold mt-5 mb-1",children:"Upload Logo"}),(0,n.jsx)(eo,{img:o,setImg:l,uploadState:c,setUploadState:u,customizations:{uploadText:"Upload logo",previewClassName:"border-2 border-tertiary-bg"},restrictions:{acceptedTypes:["png","jpg","jpeg","gif","webp","bmp","svg","apng","ico","tiff","avif"],acceptedFormats:["image"],maxSize:5242880}}),(0,n.jsx)("p",{className:"grey text-[12px] mt-2",children:" If no logo is uploaded, we'll use a default logo for now "}),f.isError&&(0,n.jsxs)("p",{className:"text-red-500 font-semibold mt-3",children:[" ",f.msg," "]}),(0,n.jsx)("button",{disabled:h.loading,type:"submit",className:"button red mt-5",children:" Create "})]})})}},5110:e=>{e.exports={error:"ImageDropzone_error__48KqR","image-shake":"ImageDropzone_image-shake__ZSj82"}},60621:(e,t,i)=>{"use strict";i.d(t,{default:()=>n});let n=(0,i(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/new/Form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/new/Form.tsx","default")},91394:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i(62740),r=i(60621);function a(){return(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)("div",{className:"container mt-6 max-w-[550px_!important]",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("h3",{className:"text-[16px] font-semibold grey",children:" Change the world with Seagull "}),(0,n.jsx)("h1",{className:"text-[32px]",children:" Create New Organization "})]}),(0,n.jsx)(r.default,{})]})})}},90559:(e,t,i)=>{"use strict";i.d(t,{q:()=>h});var n=i(21590);i(70376);var r=i(42385),a=i(23346),s=i(13362),o=i(64230),l=i(57647),c=i(71082),u=i(99344);async function p(e){let t=(0,o.tO)((0,l.sc)(new TextEncoder().encode(e))),i=await (0,s.P)(`
        SELECT 
            s.id AS session_id, 
            s.user_id, 
            s.created_at AS session_created_at, 
            s.expires_at,
            u.slug
        FROM user_sessions s
        INNER JOIN users u
            ON u.id = s.user_id 
        WHERE s.id = $1`,[t]);if(!i||0===i.rowCount)return{session:null,user:null};let n=i.rows[0],r=await (0,c.A)(n.slug,!0);if(!r.success||!r.user)return{session:null,user:null};let a={id:n.session_id,userId:n.user_id,createdAt:new Date(n.session_created_at.toISOString()),expiresAt:new Date(n.expires_at.toISOString())},u=new Date(a.expiresAt);return Date.now()>=u.getTime()?(await (0,s.P)("DELETE FROM user_sessions WHERE id = $1",[a.id]),{session:null,user:null}):(Date.now()>=u.getTime()-2592e6&&(a.expiresAt=new Date(Date.now()+2592e6),await (0,s.P)("UPDATE user_sessions SET expires_at = $1 WHERE id = $2",[a.expiresAt,a.id])),{session:a,user:r.user})}(0,u.D)([p]),(0,n.A)(p,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a",null);let h=(0,a.cache)(async()=>{let e=await (0,r.UL)(),t=e.get("session")?.value??null;return null===t?{session:null,user:null}:await p(t)});(0,u.D)([h]),(0,n.A)(h,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6",null)},70440:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i(88077);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[638,246,825,77,567,436,82],()=>i(50706));module.exports=n})();