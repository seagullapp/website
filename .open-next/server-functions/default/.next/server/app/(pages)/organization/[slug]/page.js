(()=>{var e={};e.id=192,e.ids=[192],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},42449:e=>{"use strict";e.exports=require("pg")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},40706:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>l});var t=r(70260),a=r(28203),n=r(25155),i=r.n(n),o=r(67292),u={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>o[e]);r.d(s,u);let l=["",{children:["(pages)",{children:["organization",{children:["[slug]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,39676)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/[slug]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11068)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/[slug]/layout.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/tahaparacha/Downloads/Coding/Main Projects/seagull/website/src/app/(pages)/organization/[slug]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(pages)/organization/[slug]/page",pathname:"/organization/[slug]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},34516:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6":()=>t.q});var t=r(90559)},71791:(e,s,r)=>{"use strict";r.r(s),r.d(s,{"001ceca995e446d8feebb36954bff66df1af521413":()=>t.m,"6098242062054845d9c23bff0445dbf4ba7b3e57ee":()=>t.P});var t=r(76109)},10525:()=>{},54493:()=>{},96487:()=>{},78335:()=>{},61860:e=>{e.exports={logo:"Logo_logo__csV_j"}},11068:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});var t=r(62740),a=r(63280);function n({organization:e,className:s}){return(0,t.jsx)("div",{className:`widget ${s&&s}`,children:(0,t.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,t.jsx)(a.A,{logo:e.logo_id,logo_url:e.logo_url,size:70}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold",children:[" ",e.name," "]}),e.about&&(0,t.jsxs)("p",{children:[" ",e.about," "]})]})]})})}var i=r(76109);async function o(e){if(!e||e.trim().length<2||e.length>99)return{success:!1,msg:"Invalid slug",status:404};try{let s=[e.trim().toLowerCase()],r=await (0,i.P)(`
            SELECT
                o.id,
                o.owner_id,
                    u.slug AS owner_slug,
                    u.first_name AS owner_first_name,
                    u.last_name AS owner_last_name,
                o.name,
                o.slug,
                    o.logo_id,
                i.url AS logo_url,
                o.created_at,
                o.about
            FROM organizations o
            INNER JOIN images i
                ON i.id = o.logo_id
            INNER JOIN users u
                ON u.id = o.owner_id
            WHERE o.slug = $1
            LIMIT 1
        `,s);if(!r)throw"A database error occurred";if(1!==r.rowCount)return{success:!1,msg:"Not found",status:404};let t=r.rows[0];return{success:!0,msg:"Organization found",status:200,data:t}}catch(e){return{success:!1,msg:e?`${`${e}`.includes("error: ")?`${e}`.split("error: ")[1].trim():e}`:"A server error occurred",status:505}}}var u=r(31831);async function l({params:e,children:s}){let r=(await e).slug,a=await o(r);console.log(a),a.success||(404===a.status&&(0,u.notFound)(),console.log("Not successful"),(0,u.notFound)());let i=a.data;return(0,t.jsx)("div",{className:"wrapper",children:(0,t.jsx)("div",{className:"container my-7",children:(0,t.jsx)(n,{organization:i})})})}},39676:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(62740);function a(){return(0,t.jsx)("div",{})}},63280:(e,s,r)=>{"use strict";r.d(s,{A:()=>i});var t=r(62740),a=r(61860),n=r.n(a);function i({logo:e,logo_url:s,size:r,className:a}){return(0,t.jsx)("img",{src:function(){let r=s;if(e<=6)switch(e){case 1:r="/images/public/yellow.svg";break;case 2:r="/images/public/blue.svg";break;case 3:r="/images/public/cyan.svg";break;case 4:r="/images/public/purple.svg";break;case 5:r="/images/public/green.svg";break;case 6:r="/images/public/orange.svg"}return r}(),alt:"Logo",className:`${n().logo} ${a&&a}`,width:r,height:r,style:{width:`${r}px`,height:`${r}px`}})}},90559:(e,s,r)=>{"use strict";r.d(s,{q:()=>p});var t=r(21590);r(70376);var a=r(42385),n=r(23346),i=r(13362),o=r(64230),u=r(57647),l=r(71082),d=r(99344);async function c(e){let s=(0,o.tO)((0,u.sc)(new TextEncoder().encode(e))),r=await (0,i.P)(`
        SELECT 
            s.id AS session_id, 
            s.user_id, 
            s.created_at AS session_created_at, 
            s.expires_at,
            u.slug
        FROM user_sessions s
        INNER JOIN users u
            ON u.id = s.user_id 
        WHERE s.id = $1`,[s]);if(!r||0===r.rowCount)return{session:null,user:null};let t=r.rows[0],a=await (0,l.A)(t.slug,!0);if(!a.success||!a.user)return{session:null,user:null};let n={id:t.session_id,userId:t.user_id,createdAt:new Date(t.session_created_at.toISOString()),expiresAt:new Date(t.expires_at.toISOString())},d=new Date(n.expiresAt);return Date.now()>=d.getTime()?(await (0,i.P)("DELETE FROM user_sessions WHERE id = $1",[n.id]),{session:null,user:null}):(Date.now()>=d.getTime()-2592e6&&(n.expiresAt=new Date(Date.now()+2592e6),await (0,i.P)("UPDATE user_sessions SET expires_at = $1 WHERE id = $2",[n.expiresAt,n.id])),{session:n,user:a.user})}(0,d.D)([c]),(0,t.A)(c,"40f6de09ec2822252f3fdfc0bb278e4ae125d2c60a",null);let p=(0,n.cache)(async()=>{let e=await (0,a.UL)(),s=e.get("session")?.value??null;return null===s?{session:null,user:null}:await c(s)});(0,d.D)([p]),(0,t.A)(p,"7f5f553b95b32f91fbfa62b02a301ed5755c7b9bb6",null)},76109:(e,s,r)=>{"use strict";r.d(s,{P:()=>u,m:()=>o});var t=r(88977);r(98063);var a=r(42449),n=r(56215);let i=new a.Pool({host:process.env.DB_HOST,user:process.env.DB_USER,port:5432,password:process.env.DB_PASSWORD,database:process.env.DB_DATABASE,ssl:!0});async function o(){return(await i.query("SELECT version();")).rows}async function u(e,s){return await i.query(e,s||[])}(0,n.D)([o,u]),(0,t.A)(o,"001ceca995e446d8feebb36954bff66df1af521413",null),(0,t.A)(u,"6098242062054845d9c23bff0445dbf4ba7b3e57ee",null)},70440:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[638,246,825,77,635,436,82],()=>r(40706));module.exports=t})();