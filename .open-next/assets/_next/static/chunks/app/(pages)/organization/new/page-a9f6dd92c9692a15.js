(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{9207:(e,t,a)=>{Promise.resolve().then(a.bind(a,2575))},2575:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(5155),r=a(5828);let l=(0,r.createServerReference)("403814d4b61d66b97e0e15b47472217cd272008abf",r.callServer,void 0,r.findSourceMapURL,"default");var o=a(2115),i=a(6702),n=a(1589),c=a(203),d=a.n(c);function m(e){let{img:t,setImg:a,uploadState:r,setUploadState:l,customizations:c,restrictions:m}=e,g=(0,o.useCallback)(e=>{l({state:null,msg:""}),l({state:"loading",msg:"Loading"}),e.forEach(e=>{let t=new FileReader;t.onabort=()=>l({state:"error",msg:"File reading was aborted"}),t.onerror=()=>l({state:"error",msg:"Could not read file"});let s=!1;if(m.acceptedFormats.forEach(t=>{e.type.split("/")[0]===t&&(s=!0)}),!s){l({state:"error",msg:"Invalid file"});return}let r=!1;if(m.acceptedTypes.forEach(t=>{e.type.split("/")[1]===t&&(r=!0)}),!r){l({state:"error",msg:"Invalid file type"});return}if(e.size>m.maxSize){l({state:"error",msg:"File too large"});return}t.onload=()=>{a({src:t.result,type:e.type,size:e.size,name:e.name}),l({state:"selected",msg:"Image selected"})},t.readAsDataURL(e)})},[]);return"locked"!==r.state?(0,s.jsx)(i.Ay,{onDrop:g,onDragEnter:()=>l({state:"dragging",msg:""}),onDragLeave:()=>l({state:null,msg:""}),onDropRejected:()=>l({state:"error",msg:""}),onFileDialogCancel:()=>l({state:"error",msg:"Upload canceled"}),onFileDialogOpen:()=>l({state:"loading",msg:"Selecting file"}),children:e=>{let{getRootProps:a,getInputProps:l}=e;return(0,s.jsx)("section",{className:"".concat((null==c?void 0:c.className)&&c.className),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center cursor-pointer h-[300px] p-5 ".concat("dragging"===r.state?"bg-white/10":"".concat("error"===r.state?"bg-red-400/10":"".concat("loading"===r.state?"bg-white/5 border-dashed border-2 border-white/20":"bg-white/5"))," rounded-xl relative"),...a(),children:(0,s.jsxs)("div",{className:"".concat("dragging"===r.state?"scale-110":""," transition-all duration-200 ease-in-out flex flex-col items-center text-center"),children:[(0,s.jsx)("input",{...l()}),t&&"selected"===r.state?(0,s.jsx)("img",{src:t.src,alt:"".concat(t),className:"w-[200px] h-[200px] object-contain bg-secondary-bg rounded-xl ".concat((null==c?void 0:c.previewClassName)&&(null==c?void 0:c.previewClassName))}):(0,s.jsx)(n.dkL,{className:"text-[100px] ".concat("error"===r.state?"text-red-500/60 ".concat(d().error):"text-white/20")}),null===r.state&&(null==c?void 0:c.uploadText)!==null&&(0,s.jsxs)("p",{className:"mt-1 font-semibold text-white/30",children:[" ",(null==c?void 0:c.uploadText)?c.uploadText:"Upload image"," "]}),"selected"===r.state&&t&&(0,s.jsxs)("p",{className:"mt-2 mb-[2px] text-[16px]",children:[" ",t.name," "]}),"selected"===r.state&&t&&(0,s.jsx)("p",{className:"text-sm grey",children:" Simply drag/select a new image to replace this "}),"error"===r.state&&(0,s.jsxs)("p",{className:"mt-1 text-red-500/80 font-semibold",children:[" ",r.msg," "]}),"loading"===r.state&&(0,s.jsxs)("p",{className:"mt-1 text-white/50 font-semibold",children:[" ",r.msg," "]})]})})})}}):(0,s.jsx)("div",{children:(0,s.jsx)("section",{className:"".concat((null==c?void 0:c.className)&&(null==c?void 0:c.className)),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center cursor-pointer h-[300px] p-5 bg-white/5 rounded-xl",children:(0,s.jsxs)("div",{className:"transition-all duration-200 ease-in-out flex flex-col items-center text-center",children:[(0,s.jsx)(n.HVe,{className:"text-[100px] text-white/60"}),(0,s.jsx)("p",{className:"mt-2 font-semibold text-white/70",children:" Uploading image "})]})})})})}var g=a(3391),u=a(8505),p=a(6046);function x(){let[e,t]=(0,o.useState)(""),[a,r]=(0,o.useState)(""),[i,n]=(0,o.useState)(null),[c,d]=(0,o.useState)({state:null,msg:""}),x=(0,p.useRouter)(),h=(0,g.d4)(e=>e.ui),f=(0,g.wA)(),[b,v]=(0,o.useState)({isError:!1,msg:"An error occurred"});async function w(t){if(t.preventDefault(),v({isError:!1,msg:"Loading"}),h.loading){v({isError:!0,msg:"Please wait, loading"});return}let s=c.state;d({state:"locked",msg:"Uploading"}),f((0,u.vL)());try{if(!e||e.trim().length<2)throw"Please enter a valid organization name";if(e.length>99)throw"Organization name is too long";if(!a||a.trim().length<2||"new"===a.trim().toLowerCase())throw"Please enter a valid organization slug";if(a.trim().length>99)throw"Organization slug is too long";if(i&&i.size>5242880)throw"Logo file size too large";if(i&&i.name.length>99)throw"Logo file name too long";let t=await l({name:e,slug:a,logo:i});if(!t)throw"Could not create organization";if(403===t.status)throw x.push("/login"),"Not authenticated";if(!t.success)throw t.msg;x.push("/organization/".concat(a.toLowerCase().trim().replaceAll(" ","")))}catch(e){v({isError:!0,msg:"".concat(e)})}finally{f((0,u.xv)()),d({state:s,msg:""})}}return(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:w,className:"flex flex-col my-10 w-full",children:[(0,s.jsxs)("label",{htmlFor:"name",className:"font-semibold mb-1",children:[" Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})," "]}),(0,s.jsx)("input",{required:!0,value:e,onChange:e=>{t(e.target.value),r(e.target.value.toLowerCase().replaceAll(" ",""))},type:"text",name:"name",placeholder:"My New Organization"}),(0,s.jsxs)("label",{htmlFor:"name",className:"font-semibold mb-1 mt-5",children:[" Vanity URL ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})," "]}),(0,s.jsxs)("div",{className:"flex w-full",children:[(0,s.jsx)("div",{className:"bg-secondary-bg border-l-2 border-t-2 border-b-2 border-tertiary-bg rounded-l-lg p-1 px-2",children:" seagull.com/ "}),(0,s.jsx)("input",{required:!0,value:a,onChange:e=>r(e.target.value.toLowerCase().trim()),type:"text",name:"name",placeholder:"vanity",className:"rounded-l-[0px] flex-grow"})]}),(0,s.jsx)("label",{className:"font-semibold mt-5 mb-1",children:"Upload Logo"}),(0,s.jsx)(m,{img:i,setImg:n,uploadState:c,setUploadState:d,customizations:{uploadText:"Upload logo",previewClassName:"border-2 border-tertiary-bg"},restrictions:{acceptedTypes:["png","jpg","jpeg","gif","webp","bmp","svg","apng","ico","tiff","avif"],acceptedFormats:["image"],maxSize:5242880}}),(0,s.jsx)("p",{className:"grey text-[12px] mt-2",children:" If no logo is uploaded, we'll use a default logo for now "}),b.isError&&(0,s.jsxs)("p",{className:"text-red-500 font-semibold mt-3",children:[" ",b.msg," "]}),(0,s.jsx)("button",{disabled:h.loading,type:"submit",className:"button red mt-5",children:" Create "})]})})}},8505:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>o,vL:()=>r,xv:()=>l});let s=(0,a(8943).Z0)({name:"ui",initialState:{loading:!1},reducers:{startLoading:()=>({loading:!0}),stopLoading:()=>({loading:!1})}}),{startLoading:r,stopLoading:l}=s.actions,o=s.reducer},203:e=>{e.exports={error:"ImageDropzone_error__48KqR","image-shake":"ImageDropzone_image-shake__ZSj82"}}},e=>{var t=t=>e(e.s=t);e.O(0,[644,446,391,92,383,441,517,358],()=>t(9207)),_N_E=e.O()}]);